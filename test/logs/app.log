[2018-12-13T18:10:53.398] [DEBUG] app - starting "koa2" ...
[2018-12-13T18:10:53.408] [INFO] app - init mongoose "127.0.0.1":27017/"usercenter" ...
[2018-12-13T18:10:53.408] [DEBUG] app - mongodb connStr:"mongodb://127.0.0.1:27017/usercenter"
[2018-12-13T18:10:53.417] [DEBUG] app - create redis instance for "redis_cache"
[2018-12-13T18:10:53.419] [DEBUG] app - initRedisSession
[2018-12-13T18:10:53.421] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/manage/cdkeyHandler.js"  ...
[2018-12-13T18:10:53.434] [DEBUG] app - register handler method: "importCdkey" on "/manage/cdkeyHandler/importCdkey"
[2018-12-13T18:10:53.435] [DEBUG] app - register handler method: "genQrCode" on "/manage/cdkeyHandler/genQrCode"
[2018-12-13T18:10:53.435] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/manage/login.js"  ...
[2018-12-13T18:10:53.436] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/manage/login.js" to "/manage/login"
[2018-12-13T18:10:53.436] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/post.js"  ...
[2018-12-13T18:10:53.437] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/post.js" to "/post"
[2018-12-13T18:10:53.437] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/qrcode.js"  ...
[2018-12-13T18:10:53.438] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/qrcode.js" to "/qrcode"
[2018-12-13T18:10:53.438] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/redis.js"  ...
[2018-12-13T18:10:53.440] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/redis.js" to "/redis"
[2018-12-13T18:10:53.440] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/root.js"  ...
[2018-12-13T18:10:53.441] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/root.js" to "/"
[2018-12-13T18:10:53.441] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/drawAward.js"  ...
[2018-12-13T18:10:53.442] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/drawAward.js" to "/wxWeb/api/drawAward"
[2018-12-13T18:10:53.442] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/exchangeShopHandler.js"  ...
[2018-12-13T18:10:53.443] [DEBUG] app - register handler method: "queryOnSaleItemCount" on "/wxWeb/api/exchangeShopHandler/queryOnSaleItemCount"
[2018-12-13T18:10:53.445] [DEBUG] app - register handler method: "queryOnSaleItems" on "/wxWeb/api/exchangeShopHandler/queryOnSaleItems"
[2018-12-13T18:10:53.445] [DEBUG] app - register handler method: "exchangeItem" on "/wxWeb/api/exchangeShopHandler/exchangeItem"
[2018-12-13T18:10:53.445] [DEBUG] app - register handler method: "sendMessage" on "/wxWeb/api/exchangeShopHandler/sendMessage"
[2018-12-13T18:10:53.446] [DEBUG] app - register handler method: "markMessageRead" on "/wxWeb/api/exchangeShopHandler/markMessageRead"
[2018-12-13T18:10:53.446] [DEBUG] app - register handler method: "deleteMessage" on "/wxWeb/api/exchangeShopHandler/deleteMessage"
[2018-12-13T18:10:53.446] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/messageHandler.js"  ...
[2018-12-13T18:10:53.447] [DEBUG] app - register handler method: "getMessagePageCount" on "/wxWeb/api/messageHandler/getMessagePageCount"
[2018-12-13T18:10:53.447] [DEBUG] app - register handler method: "getMessagePage" on "/wxWeb/api/messageHandler/getMessagePage"
[2018-12-13T18:10:53.448] [DEBUG] app - register handler method: "sendMessage" on "/wxWeb/api/messageHandler/sendMessage"
[2018-12-13T18:10:53.448] [DEBUG] app - register handler method: "markMessageRead" on "/wxWeb/api/messageHandler/markMessageRead"
[2018-12-13T18:10:53.448] [DEBUG] app - register handler method: "deleteMessage" on "/wxWeb/api/messageHandler/deleteMessage"
[2018-12-13T18:10:53.448] [DEBUG] app - register handler method: "hasUnreadMessage" on "/wxWeb/api/messageHandler/hasUnreadMessage"
[2018-12-13T18:10:53.448] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/queryCdkeyUsage.js"  ...
[2018-12-13T18:10:53.449] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/queryCdkeyUsage.js" to "/wxWeb/api/queryCdkeyUsage"
[2018-12-13T18:10:53.449] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/queryUserStatus.js"  ...
[2018-12-13T18:10:53.453] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/queryUserStatus.js" to "/wxWeb/api/queryUserStatus"
[2018-12-13T18:10:53.453] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/smsHandler.js"  ...
[2018-12-13T18:10:53.454] [DEBUG] app - register handler method: "registerPhone" on "/wxWeb/api/smsHandler/registerPhone"
[2018-12-13T18:10:53.454] [DEBUG] app - register handler method: "getSmsCode" on "/wxWeb/api/smsHandler/getSmsCode"
[2018-12-13T18:10:53.455] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/taskHandler.js"  ...
[2018-12-13T18:10:53.456] [DEBUG] app - register handler method: "queryTaskList" on "/wxWeb/api/taskHandler/queryTaskList"
[2018-12-13T18:10:53.456] [DEBUG] app - register handler method: "rewardTask" on "/wxWeb/api/taskHandler/rewardTask"
[2018-12-13T18:10:53.456] [DEBUG] app - register handler method: "queryTaskInfo" on "/wxWeb/api/taskHandler/queryTaskInfo"
[2018-12-13T18:10:53.457] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/userHandler.js"  ...
[2018-12-13T18:10:53.457] [DEBUG] app - register handler method: "queryUserInfo" on "/wxWeb/api/userHandler/queryUserInfo"
[2018-12-13T18:10:53.458] [DEBUG] app - register handler method: "updateUserInfo" on "/wxWeb/api/userHandler/updateUserInfo"
[2018-12-13T18:10:53.458] [DEBUG] app - register handler method: "isAddressComplete" on "/wxWeb/api/userHandler/isAddressComplete"
[2018-12-13T18:10:53.458] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/scanActivity.js"  ...
[2018-12-13T18:10:53.459] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/scanActivity.js" to "/wxWeb/scanActivity"
[2018-12-13T18:10:53.459] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/wxAccess.js"  ...
[2018-12-13T18:10:53.460] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/wxAccess.js" to "/wxWeb/wxAccess"
[2018-12-13T18:10:53.461] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/wxLogin.js"  ...
[2018-12-13T18:10:53.461] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/wxLogin.js" to "/wxWeb/wxLogin"
[2018-12-13T18:10:53.463] [DEBUG] app - load dbJsonImpl "D:\\workspace\\koa2/dbJson/scanActivity.json" ...
[2018-12-13T18:10:53.464] [DEBUG] app - load dbJsonImpl "D:\\workspace\\koa2/dbJson/taskInfo.json" ...
[2018-12-13T18:10:53.465] [DEBUG] app - DummyService.start
[2018-12-13T18:10:53.467] [DEBUG] app - start scan activity
[2018-12-13T18:10:53.549] [DEBUG] app - register event: "LOGIN"
[2018-12-13T18:10:53.549] [DEBUG] app - register event: "COMPLETE_PERSON_INFO"
[2018-12-13T18:10:53.550] [DEBUG] app - register event: "SHARE"
[2018-12-13T18:10:53.550] [DEBUG] app - register event: "ACQUIRE_POINTS"
[2018-12-13T18:10:53.550] [DEBUG] app - register event: "READ"
[2018-12-13T18:10:53.557] [DEBUG] app - UserService.start
[2018-12-13T18:10:53.558] [DEBUG] app - WechatService.start
[2018-12-13T18:10:53.558] [DEBUG] app - DummyService.afterStart
[2018-12-13T18:10:53.558] [DEBUG] app - UserService.afterStart
[2018-12-13T18:10:53.559] [DEBUG] app - WechatService.afterStart
[2018-12-13T18:10:53.559] [INFO] app - app start from dir: "D:\\workspace\\koa2"
[2018-12-13T18:10:53.575] [INFO] app - redis "redis_cache" ready.
[2018-12-13T18:10:53.592] [INFO] app - mongoose connect successfully.
[2018-12-13T18:10:53.622] [DEBUG] app - before process "GET" on "/"  req:{"method":"GET","url":"/","header":{"host":"127.0.0.1:9900","accept-encoding":"gzip, deflate","user-agent":"node-superagent/3.8.3","connection":"close"}}
[2018-12-13T18:10:53.623] [DEBUG] app - before check privillege
[2018-12-13T18:10:53.624] [DEBUG] app - uid is:""
[2018-12-13T18:10:53.624] [ERROR] app - user not login
[2018-12-13T18:10:53.624] [INFO] app - not login redirect to "/wxWeb/wxLogin?targetUrl=/"
[2018-12-13T18:10:53.626] [DEBUG] app - after process "GET" on "/" res:{"status":302,"message":"Found","header":{"location":"/wxWeb/wxLogin?targetUrl=/","content-type":"text/html; charset=utf-8","content-length":"83"}}


[2018-12-13T18:10:53.626] [DEBUG] app - redis session set "1544695853621-HfTiPXJ4Mf5YRyWBTsyCI4Lbmw_ECDgm",{"uid":"","_expire":1544782253626,"_maxAge":86400000},86410000,{"changed":true}
[2018-12-13T18:10:54.335] [DEBUG] app - createMenu:{"errcode":0,"errmsg":"ok"}
[2018-12-13T18:20:53.679] [DEBUG] app - starting "koa2" ...
[2018-12-13T18:20:53.689] [INFO] app - init mongoose "127.0.0.1":27017/"usercenter" ...
[2018-12-13T18:20:53.689] [DEBUG] app - mongodb connStr:"mongodb://127.0.0.1:27017/usercenter"
[2018-12-13T18:20:53.698] [DEBUG] app - create redis instance for "redis_cache"
[2018-12-13T18:20:53.700] [DEBUG] app - initRedisSession
[2018-12-13T18:20:53.701] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/manage/cdkeyHandler.js"  ...
[2018-12-13T18:20:53.711] [DEBUG] app - register handler method: "importCdkey" on "/manage/cdkeyHandler/importCdkey"
[2018-12-13T18:20:53.712] [DEBUG] app - register handler method: "genQrCode" on "/manage/cdkeyHandler/genQrCode"
[2018-12-13T18:20:53.713] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/manage/login.js"  ...
[2018-12-13T18:20:53.714] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/manage/login.js" to "/manage/login"
[2018-12-13T18:20:53.715] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/post.js"  ...
[2018-12-13T18:20:53.716] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/post.js" to "/post"
[2018-12-13T18:20:53.716] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/qrcode.js"  ...
[2018-12-13T18:20:53.717] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/qrcode.js" to "/qrcode"
[2018-12-13T18:20:53.717] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/redis.js"  ...
[2018-12-13T18:20:53.718] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/redis.js" to "/redis"
[2018-12-13T18:20:53.718] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/root.js"  ...
[2018-12-13T18:20:53.719] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/root.js" to "/"
[2018-12-13T18:20:53.719] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/drawAward.js"  ...
[2018-12-13T18:20:53.720] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/drawAward.js" to "/wxWeb/api/drawAward"
[2018-12-13T18:20:53.720] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/exchangeShopHandler.js"  ...
[2018-12-13T18:20:53.721] [DEBUG] app - register handler method: "queryOnSaleItemCount" on "/wxWeb/api/exchangeShopHandler/queryOnSaleItemCount"
[2018-12-13T18:20:53.722] [DEBUG] app - register handler method: "queryOnSaleItems" on "/wxWeb/api/exchangeShopHandler/queryOnSaleItems"
[2018-12-13T18:20:53.722] [DEBUG] app - register handler method: "exchangeItem" on "/wxWeb/api/exchangeShopHandler/exchangeItem"
[2018-12-13T18:20:53.722] [DEBUG] app - register handler method: "sendMessage" on "/wxWeb/api/exchangeShopHandler/sendMessage"
[2018-12-13T18:20:53.722] [DEBUG] app - register handler method: "markMessageRead" on "/wxWeb/api/exchangeShopHandler/markMessageRead"
[2018-12-13T18:20:53.723] [DEBUG] app - register handler method: "deleteMessage" on "/wxWeb/api/exchangeShopHandler/deleteMessage"
[2018-12-13T18:20:53.723] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/messageHandler.js"  ...
[2018-12-13T18:20:53.724] [DEBUG] app - register handler method: "getMessagePageCount" on "/wxWeb/api/messageHandler/getMessagePageCount"
[2018-12-13T18:20:53.724] [DEBUG] app - register handler method: "getMessagePage" on "/wxWeb/api/messageHandler/getMessagePage"
[2018-12-13T18:20:53.724] [DEBUG] app - register handler method: "sendMessage" on "/wxWeb/api/messageHandler/sendMessage"
[2018-12-13T18:20:53.724] [DEBUG] app - register handler method: "markMessageRead" on "/wxWeb/api/messageHandler/markMessageRead"
[2018-12-13T18:20:53.725] [DEBUG] app - register handler method: "deleteMessage" on "/wxWeb/api/messageHandler/deleteMessage"
[2018-12-13T18:20:53.725] [DEBUG] app - register handler method: "hasUnreadMessage" on "/wxWeb/api/messageHandler/hasUnreadMessage"
[2018-12-13T18:20:53.725] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/queryCdkeyUsage.js"  ...
[2018-12-13T18:20:53.726] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/queryCdkeyUsage.js" to "/wxWeb/api/queryCdkeyUsage"
[2018-12-13T18:20:53.726] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/queryUserStatus.js"  ...
[2018-12-13T18:20:53.730] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/queryUserStatus.js" to "/wxWeb/api/queryUserStatus"
[2018-12-13T18:20:53.730] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/smsHandler.js"  ...
[2018-12-13T18:20:53.731] [DEBUG] app - register handler method: "registerPhone" on "/wxWeb/api/smsHandler/registerPhone"
[2018-12-13T18:20:53.732] [DEBUG] app - register handler method: "getSmsCode" on "/wxWeb/api/smsHandler/getSmsCode"
[2018-12-13T18:20:53.732] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/taskHandler.js"  ...
[2018-12-13T18:20:53.733] [DEBUG] app - register handler method: "queryTaskList" on "/wxWeb/api/taskHandler/queryTaskList"
[2018-12-13T18:20:53.733] [DEBUG] app - register handler method: "rewardTask" on "/wxWeb/api/taskHandler/rewardTask"
[2018-12-13T18:20:53.733] [DEBUG] app - register handler method: "queryTaskInfo" on "/wxWeb/api/taskHandler/queryTaskInfo"
[2018-12-13T18:20:53.733] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/userHandler.js"  ...
[2018-12-13T18:20:53.734] [DEBUG] app - register handler method: "queryUserInfo" on "/wxWeb/api/userHandler/queryUserInfo"
[2018-12-13T18:20:53.734] [DEBUG] app - register handler method: "updateUserInfo" on "/wxWeb/api/userHandler/updateUserInfo"
[2018-12-13T18:20:53.735] [DEBUG] app - register handler method: "isAddressComplete" on "/wxWeb/api/userHandler/isAddressComplete"
[2018-12-13T18:20:53.735] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/scanActivity.js"  ...
[2018-12-13T18:20:53.736] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/scanActivity.js" to "/wxWeb/scanActivity"
[2018-12-13T18:20:53.736] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/wxAccess.js"  ...
[2018-12-13T18:20:53.737] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/wxAccess.js" to "/wxWeb/wxAccess"
[2018-12-13T18:20:53.738] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/wxLogin.js"  ...
[2018-12-13T18:20:53.738] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/wxLogin.js" to "/wxWeb/wxLogin"
[2018-12-13T18:20:53.740] [DEBUG] app - load dbJsonImpl "D:\\workspace\\koa2/dbJson/scanActivity.json" ...
[2018-12-13T18:20:53.741] [DEBUG] app - load dbJsonImpl "D:\\workspace\\koa2/dbJson/taskInfo.json" ...
[2018-12-13T18:20:53.742] [DEBUG] app - DummyService.start
[2018-12-13T18:20:53.745] [DEBUG] app - start scan activity
[2018-12-13T18:20:53.816] [DEBUG] app - register event: "LOGIN"
[2018-12-13T18:20:53.817] [DEBUG] app - register event: "COMPLETE_PERSON_INFO"
[2018-12-13T18:20:53.817] [DEBUG] app - register event: "SHARE"
[2018-12-13T18:20:53.817] [DEBUG] app - register event: "ACQUIRE_POINTS"
[2018-12-13T18:20:53.818] [DEBUG] app - register event: "READ"
[2018-12-13T18:20:53.824] [DEBUG] app - UserService.start
[2018-12-13T18:20:53.825] [DEBUG] app - WechatService.start
[2018-12-13T18:20:53.825] [DEBUG] app - DummyService.afterStart
[2018-12-13T18:20:53.826] [DEBUG] app - UserService.afterStart
[2018-12-13T18:20:53.826] [DEBUG] app - WechatService.afterStart
[2018-12-13T18:20:53.826] [INFO] app - app start from dir: "D:\\workspace\\koa2"
[2018-12-13T18:20:53.848] [INFO] app - redis "redis_cache" ready.
[2018-12-13T18:20:53.867] [INFO] app - mongoose connect successfully.
[2018-12-13T18:20:53.895] [DEBUG] app - before process "POST" on "/wxWeb/taskHandler/queryTaskList"  req:{"method":"POST","url":"/wxWeb/taskHandler/queryTaskList","header":{"host":"127.0.0.1:9900","accept-encoding":"gzip, deflate","user-agent":"node-superagent/3.8.3","connection":"close","content-length":"0"}}
[2018-12-13T18:20:53.896] [DEBUG] app - before check privillege
[2018-12-13T18:20:53.897] [DEBUG] app - uid is:""
[2018-12-13T18:20:53.897] [ERROR] app - user not login
[2018-12-13T18:20:53.897] [INFO] app - not login redirect to "/wxWeb/wxLogin?targetUrl=/wxWeb/taskHandler/queryTaskList"
[2018-12-13T18:20:53.898] [DEBUG] app - after process "POST" on "/wxWeb/taskHandler/queryTaskList" res:{"status":302,"message":"Found","header":{"location":"/wxWeb/wxLogin?targetUrl=/wxWeb/taskHandler/queryTaskList","content-type":"text/html; charset=utf-8","content-length":"145"}}


[2018-12-13T18:20:53.899] [DEBUG] app - redis session set "1544696453893-c6tdF3ONnckG5kYC_a8cDhbDrJvXm_9_",{"uid":"","_expire":1544782853899,"_maxAge":86400000},86410000,{"changed":true}
[2018-12-13T18:20:54.629] [DEBUG] app - createMenu:{"errcode":0,"errmsg":"ok"}
[2018-12-13T18:23:08.725] [DEBUG] app - starting "koa2" ...
[2018-12-13T18:23:08.735] [INFO] app - init mongoose "127.0.0.1":27017/"usercenter" ...
[2018-12-13T18:23:08.736] [DEBUG] app - mongodb connStr:"mongodb://127.0.0.1:27017/usercenter"
[2018-12-13T18:23:08.746] [DEBUG] app - create redis instance for "redis_cache"
[2018-12-13T18:23:08.747] [DEBUG] app - initRedisSession
[2018-12-13T18:23:08.749] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/manage/cdkeyHandler.js"  ...
[2018-12-13T18:23:08.760] [DEBUG] app - register handler method: "importCdkey" on "/manage/cdkeyHandler/importCdkey"
[2018-12-13T18:23:08.761] [DEBUG] app - register handler method: "genQrCode" on "/manage/cdkeyHandler/genQrCode"
[2018-12-13T18:23:08.761] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/manage/login.js"  ...
[2018-12-13T18:23:08.762] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/manage/login.js" to "/manage/login"
[2018-12-13T18:23:08.762] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/post.js"  ...
[2018-12-13T18:23:08.763] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/post.js" to "/post"
[2018-12-13T18:23:08.763] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/qrcode.js"  ...
[2018-12-13T18:23:08.764] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/qrcode.js" to "/qrcode"
[2018-12-13T18:23:08.764] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/redis.js"  ...
[2018-12-13T18:23:08.768] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/redis.js" to "/redis"
[2018-12-13T18:23:08.768] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/root.js"  ...
[2018-12-13T18:23:08.768] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/root.js" to "/"
[2018-12-13T18:23:08.769] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/drawAward.js"  ...
[2018-12-13T18:23:08.770] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/drawAward.js" to "/wxWeb/api/drawAward"
[2018-12-13T18:23:08.770] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/exchangeShopHandler.js"  ...
[2018-12-13T18:23:08.771] [DEBUG] app - register handler method: "queryOnSaleItemCount" on "/wxWeb/api/exchangeShopHandler/queryOnSaleItemCount"
[2018-12-13T18:23:08.771] [DEBUG] app - register handler method: "queryOnSaleItems" on "/wxWeb/api/exchangeShopHandler/queryOnSaleItems"
[2018-12-13T18:23:08.771] [DEBUG] app - register handler method: "exchangeItem" on "/wxWeb/api/exchangeShopHandler/exchangeItem"
[2018-12-13T18:23:08.771] [DEBUG] app - register handler method: "sendMessage" on "/wxWeb/api/exchangeShopHandler/sendMessage"
[2018-12-13T18:23:08.772] [DEBUG] app - register handler method: "markMessageRead" on "/wxWeb/api/exchangeShopHandler/markMessageRead"
[2018-12-13T18:23:08.772] [DEBUG] app - register handler method: "deleteMessage" on "/wxWeb/api/exchangeShopHandler/deleteMessage"
[2018-12-13T18:23:08.772] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/messageHandler.js"  ...
[2018-12-13T18:23:08.773] [DEBUG] app - register handler method: "getMessagePageCount" on "/wxWeb/api/messageHandler/getMessagePageCount"
[2018-12-13T18:23:08.773] [DEBUG] app - register handler method: "getMessagePage" on "/wxWeb/api/messageHandler/getMessagePage"
[2018-12-13T18:23:08.773] [DEBUG] app - register handler method: "sendMessage" on "/wxWeb/api/messageHandler/sendMessage"
[2018-12-13T18:23:08.774] [DEBUG] app - register handler method: "markMessageRead" on "/wxWeb/api/messageHandler/markMessageRead"
[2018-12-13T18:23:08.774] [DEBUG] app - register handler method: "deleteMessage" on "/wxWeb/api/messageHandler/deleteMessage"
[2018-12-13T18:23:08.774] [DEBUG] app - register handler method: "hasUnreadMessage" on "/wxWeb/api/messageHandler/hasUnreadMessage"
[2018-12-13T18:23:08.774] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/queryCdkeyUsage.js"  ...
[2018-12-13T18:23:08.775] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/queryCdkeyUsage.js" to "/wxWeb/api/queryCdkeyUsage"
[2018-12-13T18:23:08.775] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/queryUserStatus.js"  ...
[2018-12-13T18:23:08.779] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/queryUserStatus.js" to "/wxWeb/api/queryUserStatus"
[2018-12-13T18:23:08.780] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/smsHandler.js"  ...
[2018-12-13T18:23:08.781] [DEBUG] app - register handler method: "registerPhone" on "/wxWeb/api/smsHandler/registerPhone"
[2018-12-13T18:23:08.782] [DEBUG] app - register handler method: "getSmsCode" on "/wxWeb/api/smsHandler/getSmsCode"
[2018-12-13T18:23:08.782] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/taskHandler.js"  ...
[2018-12-13T18:23:08.783] [DEBUG] app - register handler method: "queryTaskList" on "/wxWeb/api/taskHandler/queryTaskList"
[2018-12-13T18:23:08.783] [DEBUG] app - register handler method: "rewardTask" on "/wxWeb/api/taskHandler/rewardTask"
[2018-12-13T18:23:08.783] [DEBUG] app - register handler method: "queryTaskInfo" on "/wxWeb/api/taskHandler/queryTaskInfo"
[2018-12-13T18:23:08.784] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/userHandler.js"  ...
[2018-12-13T18:23:08.784] [DEBUG] app - register handler method: "queryUserInfo" on "/wxWeb/api/userHandler/queryUserInfo"
[2018-12-13T18:23:08.785] [DEBUG] app - register handler method: "updateUserInfo" on "/wxWeb/api/userHandler/updateUserInfo"
[2018-12-13T18:23:08.785] [DEBUG] app - register handler method: "isAddressComplete" on "/wxWeb/api/userHandler/isAddressComplete"
[2018-12-13T18:23:08.785] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/scanActivity.js"  ...
[2018-12-13T18:23:08.786] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/scanActivity.js" to "/wxWeb/scanActivity"
[2018-12-13T18:23:08.786] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/wxAccess.js"  ...
[2018-12-13T18:23:08.788] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/wxAccess.js" to "/wxWeb/wxAccess"
[2018-12-13T18:23:08.789] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/wxLogin.js"  ...
[2018-12-13T18:23:08.790] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/wxLogin.js" to "/wxWeb/wxLogin"
[2018-12-13T18:23:08.791] [DEBUG] app - load dbJsonImpl "D:\\workspace\\koa2/dbJson/scanActivity.json" ...
[2018-12-13T18:23:08.792] [DEBUG] app - load dbJsonImpl "D:\\workspace\\koa2/dbJson/taskInfo.json" ...
[2018-12-13T18:23:08.794] [DEBUG] app - DummyService.start
[2018-12-13T18:23:08.798] [DEBUG] app - start scan activity
[2018-12-13T18:23:08.871] [DEBUG] app - register event: "LOGIN"
[2018-12-13T18:23:08.872] [DEBUG] app - register event: "COMPLETE_PERSON_INFO"
[2018-12-13T18:23:08.872] [DEBUG] app - register event: "SHARE"
[2018-12-13T18:23:08.872] [DEBUG] app - register event: "ACQUIRE_POINTS"
[2018-12-13T18:23:08.873] [DEBUG] app - register event: "READ"
[2018-12-13T18:23:08.878] [DEBUG] app - UserService.start
[2018-12-13T18:23:08.880] [DEBUG] app - WechatService.start
[2018-12-13T18:23:08.880] [DEBUG] app - DummyService.afterStart
[2018-12-13T18:23:08.880] [DEBUG] app - UserService.afterStart
[2018-12-13T18:23:08.880] [DEBUG] app - WechatService.afterStart
[2018-12-13T18:23:08.881] [INFO] app - app start from dir: "D:\\workspace\\koa2"
[2018-12-13T18:23:08.900] [INFO] app - redis "redis_cache" ready.
[2018-12-13T18:23:08.919] [INFO] app - mongoose connect successfully.
[2018-12-13T18:23:08.948] [DEBUG] app - before process "POST" on "/wxWeb/taskHandler/queryTaskList"  req:{"method":"POST","url":"/wxWeb/taskHandler/queryTaskList","header":{"host":"127.0.0.1:9900","accept-encoding":"gzip, deflate","user-agent":"node-superagent/3.8.3","connection":"close","content-length":"0"}}
[2018-12-13T18:23:08.948] [DEBUG] app - before check privillege
[2018-12-13T18:23:08.949] [DEBUG] app - uid is:""
[2018-12-13T18:23:08.949] [ERROR] app - user not login
[2018-12-13T18:23:08.949] [INFO] app - not login redirect to "/wxWeb/wxLogin?targetUrl=/wxWeb/taskHandler/queryTaskList"
[2018-12-13T18:23:08.950] [DEBUG] app - after process "POST" on "/wxWeb/taskHandler/queryTaskList" res:{"status":302,"message":"Found","header":{"location":"/wxWeb/wxLogin?targetUrl=/wxWeb/taskHandler/queryTaskList","content-type":"text/html; charset=utf-8","content-length":"145"}}


[2018-12-13T18:23:08.954] [DEBUG] app - redis session set "1544696588947-ZcRTRZN0rAd_tHXrnj-mBELiN5krgcCM",{"uid":"","_expire":1544782988954,"_maxAge":86400000},86410000,{"changed":true}
[2018-12-13T18:23:09.696] [DEBUG] app - createMenu:{"errcode":0,"errmsg":"ok"}
[2018-12-13T18:23:34.487] [DEBUG] app - starting "koa2" ...
[2018-12-13T18:23:34.498] [INFO] app - init mongoose "127.0.0.1":27017/"usercenter" ...
[2018-12-13T18:23:34.498] [DEBUG] app - mongodb connStr:"mongodb://127.0.0.1:27017/usercenter"
[2018-12-13T18:23:34.507] [DEBUG] app - create redis instance for "redis_cache"
[2018-12-13T18:23:34.509] [DEBUG] app - initRedisSession
[2018-12-13T18:23:34.510] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/manage/cdkeyHandler.js"  ...
[2018-12-13T18:23:34.520] [DEBUG] app - register handler method: "importCdkey" on "/manage/cdkeyHandler/importCdkey"
[2018-12-13T18:23:34.523] [DEBUG] app - register handler method: "genQrCode" on "/manage/cdkeyHandler/genQrCode"
[2018-12-13T18:23:34.523] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/manage/login.js"  ...
[2018-12-13T18:23:34.524] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/manage/login.js" to "/manage/login"
[2018-12-13T18:23:34.525] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/post.js"  ...
[2018-12-13T18:23:34.526] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/post.js" to "/post"
[2018-12-13T18:23:34.526] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/qrcode.js"  ...
[2018-12-13T18:23:34.527] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/qrcode.js" to "/qrcode"
[2018-12-13T18:23:34.527] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/redis.js"  ...
[2018-12-13T18:23:34.528] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/redis.js" to "/redis"
[2018-12-13T18:23:34.528] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/root.js"  ...
[2018-12-13T18:23:34.528] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/root.js" to "/"
[2018-12-13T18:23:34.529] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/drawAward.js"  ...
[2018-12-13T18:23:34.529] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/drawAward.js" to "/wxWeb/api/drawAward"
[2018-12-13T18:23:34.530] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/exchangeShopHandler.js"  ...
[2018-12-13T18:23:34.530] [DEBUG] app - register handler method: "queryOnSaleItemCount" on "/wxWeb/api/exchangeShopHandler/queryOnSaleItemCount"
[2018-12-13T18:23:34.531] [DEBUG] app - register handler method: "queryOnSaleItems" on "/wxWeb/api/exchangeShopHandler/queryOnSaleItems"
[2018-12-13T18:23:34.531] [DEBUG] app - register handler method: "exchangeItem" on "/wxWeb/api/exchangeShopHandler/exchangeItem"
[2018-12-13T18:23:34.531] [DEBUG] app - register handler method: "sendMessage" on "/wxWeb/api/exchangeShopHandler/sendMessage"
[2018-12-13T18:23:34.531] [DEBUG] app - register handler method: "markMessageRead" on "/wxWeb/api/exchangeShopHandler/markMessageRead"
[2018-12-13T18:23:34.532] [DEBUG] app - register handler method: "deleteMessage" on "/wxWeb/api/exchangeShopHandler/deleteMessage"
[2018-12-13T18:23:34.532] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/messageHandler.js"  ...
[2018-12-13T18:23:34.533] [DEBUG] app - register handler method: "getMessagePageCount" on "/wxWeb/api/messageHandler/getMessagePageCount"
[2018-12-13T18:23:34.533] [DEBUG] app - register handler method: "getMessagePage" on "/wxWeb/api/messageHandler/getMessagePage"
[2018-12-13T18:23:34.533] [DEBUG] app - register handler method: "sendMessage" on "/wxWeb/api/messageHandler/sendMessage"
[2018-12-13T18:23:34.533] [DEBUG] app - register handler method: "markMessageRead" on "/wxWeb/api/messageHandler/markMessageRead"
[2018-12-13T18:23:34.534] [DEBUG] app - register handler method: "deleteMessage" on "/wxWeb/api/messageHandler/deleteMessage"
[2018-12-13T18:23:34.534] [DEBUG] app - register handler method: "hasUnreadMessage" on "/wxWeb/api/messageHandler/hasUnreadMessage"
[2018-12-13T18:23:34.534] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/queryCdkeyUsage.js"  ...
[2018-12-13T18:23:34.535] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/queryCdkeyUsage.js" to "/wxWeb/api/queryCdkeyUsage"
[2018-12-13T18:23:34.535] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/queryUserStatus.js"  ...
[2018-12-13T18:23:34.540] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/queryUserStatus.js" to "/wxWeb/api/queryUserStatus"
[2018-12-13T18:23:34.540] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/smsHandler.js"  ...
[2018-12-13T18:23:34.541] [DEBUG] app - register handler method: "registerPhone" on "/wxWeb/api/smsHandler/registerPhone"
[2018-12-13T18:23:34.541] [DEBUG] app - register handler method: "getSmsCode" on "/wxWeb/api/smsHandler/getSmsCode"
[2018-12-13T18:23:34.541] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/taskHandler.js"  ...
[2018-12-13T18:23:34.542] [DEBUG] app - register handler method: "queryTaskList" on "/wxWeb/api/taskHandler/queryTaskList"
[2018-12-13T18:23:34.542] [DEBUG] app - register handler method: "rewardTask" on "/wxWeb/api/taskHandler/rewardTask"
[2018-12-13T18:23:34.543] [DEBUG] app - register handler method: "queryTaskInfo" on "/wxWeb/api/taskHandler/queryTaskInfo"
[2018-12-13T18:23:34.543] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/userHandler.js"  ...
[2018-12-13T18:23:34.543] [DEBUG] app - register handler method: "queryUserInfo" on "/wxWeb/api/userHandler/queryUserInfo"
[2018-12-13T18:23:34.544] [DEBUG] app - register handler method: "updateUserInfo" on "/wxWeb/api/userHandler/updateUserInfo"
[2018-12-13T18:23:34.544] [DEBUG] app - register handler method: "isAddressComplete" on "/wxWeb/api/userHandler/isAddressComplete"
[2018-12-13T18:23:34.544] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/scanActivity.js"  ...
[2018-12-13T18:23:34.545] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/scanActivity.js" to "/wxWeb/scanActivity"
[2018-12-13T18:23:34.545] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/wxAccess.js"  ...
[2018-12-13T18:23:34.546] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/wxAccess.js" to "/wxWeb/wxAccess"
[2018-12-13T18:23:34.547] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/wxLogin.js"  ...
[2018-12-13T18:23:34.547] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/wxLogin.js" to "/wxWeb/wxLogin"
[2018-12-13T18:23:34.549] [DEBUG] app - load dbJsonImpl "D:\\workspace\\koa2/dbJson/scanActivity.json" ...
[2018-12-13T18:23:34.550] [DEBUG] app - load dbJsonImpl "D:\\workspace\\koa2/dbJson/taskInfo.json" ...
[2018-12-13T18:23:34.551] [DEBUG] app - DummyService.start
[2018-12-13T18:23:34.554] [DEBUG] app - start scan activity
[2018-12-13T18:23:34.627] [DEBUG] app - register event: "LOGIN"
[2018-12-13T18:23:34.627] [DEBUG] app - register event: "COMPLETE_PERSON_INFO"
[2018-12-13T18:23:34.627] [DEBUG] app - register event: "SHARE"
[2018-12-13T18:23:34.628] [DEBUG] app - register event: "ACQUIRE_POINTS"
[2018-12-13T18:23:34.628] [DEBUG] app - register event: "READ"
[2018-12-13T18:23:34.634] [DEBUG] app - UserService.start
[2018-12-13T18:23:34.635] [DEBUG] app - WechatService.start
[2018-12-13T18:23:34.635] [DEBUG] app - DummyService.afterStart
[2018-12-13T18:23:34.635] [DEBUG] app - UserService.afterStart
[2018-12-13T18:23:34.636] [DEBUG] app - WechatService.afterStart
[2018-12-13T18:23:34.636] [INFO] app - app start from dir: "D:\\workspace\\koa2"
[2018-12-13T18:23:34.654] [INFO] app - redis "redis_cache" ready.
[2018-12-13T18:23:34.672] [INFO] app - mongoose connect successfully.
[2018-12-13T18:23:34.681] [FATAL] app - unhandledRejection: "TypeError: Cannot read property 'resetDaily' of undefined\n    at TaskManager.assignCurrentTask (D:\\workspace\\koa2\\domain\\task\\taskManager.js:90:67)\n    at Context.it (D:\\workspace\\koa2\\test\\taskManger.test.js:28:35)\n    at callFn (C:\\Users\\EDZ\\AppData\\Roaming\\npm\\node_modules\\mocha\\lib\\runnable.js:372:21)\n    at Test.Runnable.run (C:\\Users\\EDZ\\AppData\\Roaming\\npm\\node_modules\\mocha\\lib\\runnable.js:364:7)\n    at Runner.runTest (C:\\Users\\EDZ\\AppData\\Roaming\\npm\\node_modules\\mocha\\lib\\runner.js:455:10)\n    at C:\\Users\\EDZ\\AppData\\Roaming\\npm\\node_modules\\mocha\\lib\\runner.js:573:12\n    at next (C:\\Users\\EDZ\\AppData\\Roaming\\npm\\node_modules\\mocha\\lib\\runner.js:369:14)\n    at C:\\Users\\EDZ\\AppData\\Roaming\\npm\\node_modules\\mocha\\lib\\runner.js:379:7\n    at next (C:\\Users\\EDZ\\AppData\\Roaming\\npm\\node_modules\\mocha\\lib\\runner.js:303:14)\n    at C:\\Users\\EDZ\\AppData\\Roaming\\npm\\node_modules\\mocha\\lib\\runner.js:342:7\n    at done (C:\\Users\\EDZ\\AppData\\Roaming\\npm\\node_modules\\mocha\\lib\\runnable.js:319:5)\n    at callFn (C:\\Users\\EDZ\\AppData\\Roaming\\npm\\node_modules\\mocha\\lib\\runnable.js:395:7)\n    at Hook.Runnable.run (C:\\Users\\EDZ\\AppData\\Roaming\\npm\\node_modules\\mocha\\lib\\runnable.js:364:7)\n    at next (C:\\Users\\EDZ\\AppData\\Roaming\\npm\\node_modules\\mocha\\lib\\runner.js:317:10)\n    at Immediate._onImmediate (C:\\Users\\EDZ\\AppData\\Roaming\\npm\\node_modules\\mocha\\lib\\runner.js:347:5)\n    at runCallback (timers.js:705:18)\n    at tryOnImmediate (timers.js:676:5)\n    at processImmediate (timers.js:658:5)"
[2018-12-13T18:23:34.702] [DEBUG] app - before process "POST" on "/wxWeb/taskHandler/queryTaskList"  req:{"method":"POST","url":"/wxWeb/taskHandler/queryTaskList","header":{"host":"127.0.0.1:9900","accept-encoding":"gzip, deflate","user-agent":"node-superagent/3.8.3","connection":"close","content-length":"0"}}
[2018-12-13T18:23:34.703] [DEBUG] app - before check privillege
[2018-12-13T18:23:34.703] [DEBUG] app - uid is:""
[2018-12-13T18:23:34.704] [ERROR] app - user not login
[2018-12-13T18:23:34.704] [INFO] app - not login redirect to "/wxWeb/wxLogin?targetUrl=/wxWeb/taskHandler/queryTaskList"
[2018-12-13T18:23:34.705] [DEBUG] app - after process "POST" on "/wxWeb/taskHandler/queryTaskList" res:{"status":302,"message":"Found","header":{"location":"/wxWeb/wxLogin?targetUrl=/wxWeb/taskHandler/queryTaskList","content-type":"text/html; charset=utf-8","content-length":"145"}}


[2018-12-13T18:23:34.706] [DEBUG] app - redis session set "1544696614701-docyIwULjjFx0trAC-LMmBHpP3kEjwFb",{"uid":"","_expire":1544783014706,"_maxAge":86400000},86410000,{"changed":true}
[2018-12-13T18:23:35.393] [DEBUG] app - createMenu:{"errcode":0,"errmsg":"ok"}
[2018-12-13T18:24:08.040] [DEBUG] app - starting "koa2" ...
[2018-12-13T18:24:08.050] [INFO] app - init mongoose "127.0.0.1":27017/"usercenter" ...
[2018-12-13T18:24:08.051] [DEBUG] app - mongodb connStr:"mongodb://127.0.0.1:27017/usercenter"
[2018-12-13T18:24:08.060] [DEBUG] app - create redis instance for "redis_cache"
[2018-12-13T18:24:08.061] [DEBUG] app - initRedisSession
[2018-12-13T18:24:08.063] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/manage/cdkeyHandler.js"  ...
[2018-12-13T18:24:08.073] [DEBUG] app - register handler method: "importCdkey" on "/manage/cdkeyHandler/importCdkey"
[2018-12-13T18:24:08.074] [DEBUG] app - register handler method: "genQrCode" on "/manage/cdkeyHandler/genQrCode"
[2018-12-13T18:24:08.074] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/manage/login.js"  ...
[2018-12-13T18:24:08.075] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/manage/login.js" to "/manage/login"
[2018-12-13T18:24:08.075] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/post.js"  ...
[2018-12-13T18:24:08.076] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/post.js" to "/post"
[2018-12-13T18:24:08.076] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/qrcode.js"  ...
[2018-12-13T18:24:08.077] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/qrcode.js" to "/qrcode"
[2018-12-13T18:24:08.077] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/redis.js"  ...
[2018-12-13T18:24:08.078] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/redis.js" to "/redis"
[2018-12-13T18:24:08.079] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/root.js"  ...
[2018-12-13T18:24:08.080] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/root.js" to "/"
[2018-12-13T18:24:08.080] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/drawAward.js"  ...
[2018-12-13T18:24:08.081] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/drawAward.js" to "/wxWeb/api/drawAward"
[2018-12-13T18:24:08.081] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/exchangeShopHandler.js"  ...
[2018-12-13T18:24:08.082] [DEBUG] app - register handler method: "queryOnSaleItemCount" on "/wxWeb/api/exchangeShopHandler/queryOnSaleItemCount"
[2018-12-13T18:24:08.082] [DEBUG] app - register handler method: "queryOnSaleItems" on "/wxWeb/api/exchangeShopHandler/queryOnSaleItems"
[2018-12-13T18:24:08.083] [DEBUG] app - register handler method: "exchangeItem" on "/wxWeb/api/exchangeShopHandler/exchangeItem"
[2018-12-13T18:24:08.083] [DEBUG] app - register handler method: "sendMessage" on "/wxWeb/api/exchangeShopHandler/sendMessage"
[2018-12-13T18:24:08.083] [DEBUG] app - register handler method: "markMessageRead" on "/wxWeb/api/exchangeShopHandler/markMessageRead"
[2018-12-13T18:24:08.083] [DEBUG] app - register handler method: "deleteMessage" on "/wxWeb/api/exchangeShopHandler/deleteMessage"
[2018-12-13T18:24:08.084] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/messageHandler.js"  ...
[2018-12-13T18:24:08.084] [DEBUG] app - register handler method: "getMessagePageCount" on "/wxWeb/api/messageHandler/getMessagePageCount"
[2018-12-13T18:24:08.084] [DEBUG] app - register handler method: "getMessagePage" on "/wxWeb/api/messageHandler/getMessagePage"
[2018-12-13T18:24:08.085] [DEBUG] app - register handler method: "sendMessage" on "/wxWeb/api/messageHandler/sendMessage"
[2018-12-13T18:24:08.085] [DEBUG] app - register handler method: "markMessageRead" on "/wxWeb/api/messageHandler/markMessageRead"
[2018-12-13T18:24:08.085] [DEBUG] app - register handler method: "deleteMessage" on "/wxWeb/api/messageHandler/deleteMessage"
[2018-12-13T18:24:08.085] [DEBUG] app - register handler method: "hasUnreadMessage" on "/wxWeb/api/messageHandler/hasUnreadMessage"
[2018-12-13T18:24:08.086] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/queryCdkeyUsage.js"  ...
[2018-12-13T18:24:08.086] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/queryCdkeyUsage.js" to "/wxWeb/api/queryCdkeyUsage"
[2018-12-13T18:24:08.086] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/queryUserStatus.js"  ...
[2018-12-13T18:24:08.091] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/queryUserStatus.js" to "/wxWeb/api/queryUserStatus"
[2018-12-13T18:24:08.091] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/smsHandler.js"  ...
[2018-12-13T18:24:08.092] [DEBUG] app - register handler method: "registerPhone" on "/wxWeb/api/smsHandler/registerPhone"
[2018-12-13T18:24:08.092] [DEBUG] app - register handler method: "getSmsCode" on "/wxWeb/api/smsHandler/getSmsCode"
[2018-12-13T18:24:08.093] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/taskHandler.js"  ...
[2018-12-13T18:24:08.093] [DEBUG] app - register handler method: "queryTaskList" on "/wxWeb/api/taskHandler/queryTaskList"
[2018-12-13T18:24:08.094] [DEBUG] app - register handler method: "rewardTask" on "/wxWeb/api/taskHandler/rewardTask"
[2018-12-13T18:24:08.094] [DEBUG] app - register handler method: "queryTaskInfo" on "/wxWeb/api/taskHandler/queryTaskInfo"
[2018-12-13T18:24:08.094] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/userHandler.js"  ...
[2018-12-13T18:24:08.095] [DEBUG] app - register handler method: "queryUserInfo" on "/wxWeb/api/userHandler/queryUserInfo"
[2018-12-13T18:24:08.095] [DEBUG] app - register handler method: "updateUserInfo" on "/wxWeb/api/userHandler/updateUserInfo"
[2018-12-13T18:24:08.095] [DEBUG] app - register handler method: "isAddressComplete" on "/wxWeb/api/userHandler/isAddressComplete"
[2018-12-13T18:24:08.095] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/scanActivity.js"  ...
[2018-12-13T18:24:08.097] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/scanActivity.js" to "/wxWeb/scanActivity"
[2018-12-13T18:24:08.097] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/wxAccess.js"  ...
[2018-12-13T18:24:08.098] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/wxAccess.js" to "/wxWeb/wxAccess"
[2018-12-13T18:24:08.098] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/wxLogin.js"  ...
[2018-12-13T18:24:08.099] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/wxLogin.js" to "/wxWeb/wxLogin"
[2018-12-13T18:24:08.100] [DEBUG] app - load dbJsonImpl "D:\\workspace\\koa2/dbJson/scanActivity.json" ...
[2018-12-13T18:24:08.101] [DEBUG] app - load dbJsonImpl "D:\\workspace\\koa2/dbJson/taskInfo.json" ...
[2018-12-13T18:24:08.102] [DEBUG] app - DummyService.start
[2018-12-13T18:24:08.104] [DEBUG] app - start scan activity
[2018-12-13T18:24:08.178] [DEBUG] app - register event: "LOGIN"
[2018-12-13T18:24:08.178] [DEBUG] app - register event: "COMPLETE_PERSON_INFO"
[2018-12-13T18:24:08.179] [DEBUG] app - register event: "SHARE"
[2018-12-13T18:24:08.180] [DEBUG] app - register event: "ACQUIRE_POINTS"
[2018-12-13T18:24:08.180] [DEBUG] app - register event: "READ"
[2018-12-13T18:24:08.186] [DEBUG] app - UserService.start
[2018-12-13T18:24:08.187] [DEBUG] app - WechatService.start
[2018-12-13T18:24:08.188] [DEBUG] app - DummyService.afterStart
[2018-12-13T18:24:08.188] [DEBUG] app - UserService.afterStart
[2018-12-13T18:24:08.188] [DEBUG] app - WechatService.afterStart
[2018-12-13T18:24:08.189] [INFO] app - app start from dir: "D:\\workspace\\koa2"
[2018-12-13T18:24:08.204] [INFO] app - redis "redis_cache" ready.
[2018-12-13T18:24:08.224] [INFO] app - mongoose connect successfully.
[2018-12-13T18:24:08.260] [DEBUG] app - before process "POST" on "/wxWeb/taskHandler/queryTaskList"  req:{"method":"POST","url":"/wxWeb/taskHandler/queryTaskList","header":{"host":"127.0.0.1:9900","accept-encoding":"gzip, deflate","user-agent":"node-superagent/3.8.3","connection":"close","content-length":"0"}}
[2018-12-13T18:24:08.260] [DEBUG] app - before check privillege
[2018-12-13T18:24:08.260] [DEBUG] app - uid is:""
[2018-12-13T18:24:08.261] [ERROR] app - user not login
[2018-12-13T18:24:08.261] [INFO] app - not login redirect to "/wxWeb/wxLogin?targetUrl=/wxWeb/taskHandler/queryTaskList"
[2018-12-13T18:24:08.262] [DEBUG] app - after process "POST" on "/wxWeb/taskHandler/queryTaskList" res:{"status":302,"message":"Found","header":{"location":"/wxWeb/wxLogin?targetUrl=/wxWeb/taskHandler/queryTaskList","content-type":"text/html; charset=utf-8","content-length":"145"}}


[2018-12-13T18:24:08.263] [DEBUG] app - redis session set "1544696648258-hOaQurgAJnQaKbhVW6vmcfpUKI9xqyfE",{"uid":"","_expire":1544783048263,"_maxAge":86400000},86410000,{"changed":true}
[2018-12-13T18:24:08.272] [DEBUG] app - assignTask:{"n":1,"nModified":0,"upserted":[{"index":0,"_id":"5c123348ac2eea0183a35d87"}],"opTime":{"ts":"6634421585400823809","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634421585400823809","$clusterTime":{"clusterTime":"6634421585400823809","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-13T18:24:09.128] [DEBUG] app - createMenu:{"errcode":0,"errmsg":"ok"}
[2018-12-13T18:27:27.683] [DEBUG] app - starting "koa2" ...
[2018-12-13T18:27:27.694] [INFO] app - init mongoose "127.0.0.1":27017/"usercenter" ...
[2018-12-13T18:27:27.694] [DEBUG] app - mongodb connStr:"mongodb://127.0.0.1:27017/usercenter"
[2018-12-13T18:27:27.703] [DEBUG] app - create redis instance for "redis_cache"
[2018-12-13T18:27:27.705] [DEBUG] app - initRedisSession
[2018-12-13T18:27:27.706] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/manage/cdkeyHandler.js"  ...
[2018-12-13T18:27:27.716] [DEBUG] app - register handler method: "importCdkey" on "/manage/cdkeyHandler/importCdkey"
[2018-12-13T18:27:27.718] [DEBUG] app - register handler method: "genQrCode" on "/manage/cdkeyHandler/genQrCode"
[2018-12-13T18:27:27.718] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/manage/login.js"  ...
[2018-12-13T18:27:27.719] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/manage/login.js" to "/manage/login"
[2018-12-13T18:27:27.719] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/post.js"  ...
[2018-12-13T18:27:27.720] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/post.js" to "/post"
[2018-12-13T18:27:27.720] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/qrcode.js"  ...
[2018-12-13T18:27:27.720] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/qrcode.js" to "/qrcode"
[2018-12-13T18:27:27.721] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/redis.js"  ...
[2018-12-13T18:27:27.721] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/redis.js" to "/redis"
[2018-12-13T18:27:27.722] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/root.js"  ...
[2018-12-13T18:27:27.722] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/root.js" to "/"
[2018-12-13T18:27:27.723] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/drawAward.js"  ...
[2018-12-13T18:27:27.724] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/drawAward.js" to "/wxWeb/api/drawAward"
[2018-12-13T18:27:27.724] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/exchangeShopHandler.js"  ...
[2018-12-13T18:27:27.725] [DEBUG] app - register handler method: "queryOnSaleItemCount" on "/wxWeb/api/exchangeShopHandler/queryOnSaleItemCount"
[2018-12-13T18:27:27.725] [DEBUG] app - register handler method: "queryOnSaleItems" on "/wxWeb/api/exchangeShopHandler/queryOnSaleItems"
[2018-12-13T18:27:27.725] [DEBUG] app - register handler method: "exchangeItem" on "/wxWeb/api/exchangeShopHandler/exchangeItem"
[2018-12-13T18:27:27.725] [DEBUG] app - register handler method: "sendMessage" on "/wxWeb/api/exchangeShopHandler/sendMessage"
[2018-12-13T18:27:27.726] [DEBUG] app - register handler method: "markMessageRead" on "/wxWeb/api/exchangeShopHandler/markMessageRead"
[2018-12-13T18:27:27.726] [DEBUG] app - register handler method: "deleteMessage" on "/wxWeb/api/exchangeShopHandler/deleteMessage"
[2018-12-13T18:27:27.726] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/messageHandler.js"  ...
[2018-12-13T18:27:27.727] [DEBUG] app - register handler method: "getMessagePageCount" on "/wxWeb/api/messageHandler/getMessagePageCount"
[2018-12-13T18:27:27.727] [DEBUG] app - register handler method: "getMessagePage" on "/wxWeb/api/messageHandler/getMessagePage"
[2018-12-13T18:27:27.727] [DEBUG] app - register handler method: "sendMessage" on "/wxWeb/api/messageHandler/sendMessage"
[2018-12-13T18:27:27.728] [DEBUG] app - register handler method: "markMessageRead" on "/wxWeb/api/messageHandler/markMessageRead"
[2018-12-13T18:27:27.728] [DEBUG] app - register handler method: "deleteMessage" on "/wxWeb/api/messageHandler/deleteMessage"
[2018-12-13T18:27:27.728] [DEBUG] app - register handler method: "hasUnreadMessage" on "/wxWeb/api/messageHandler/hasUnreadMessage"
[2018-12-13T18:27:27.728] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/queryCdkeyUsage.js"  ...
[2018-12-13T18:27:27.729] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/queryCdkeyUsage.js" to "/wxWeb/api/queryCdkeyUsage"
[2018-12-13T18:27:27.730] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/queryUserStatus.js"  ...
[2018-12-13T18:27:27.735] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/queryUserStatus.js" to "/wxWeb/api/queryUserStatus"
[2018-12-13T18:27:27.735] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/smsHandler.js"  ...
[2018-12-13T18:27:27.736] [DEBUG] app - register handler method: "registerPhone" on "/wxWeb/api/smsHandler/registerPhone"
[2018-12-13T18:27:27.737] [DEBUG] app - register handler method: "getSmsCode" on "/wxWeb/api/smsHandler/getSmsCode"
[2018-12-13T18:27:27.737] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/taskHandler.js"  ...
[2018-12-13T18:27:27.738] [DEBUG] app - register handler method: "queryTaskList" on "/wxWeb/api/taskHandler/queryTaskList"
[2018-12-13T18:27:27.738] [DEBUG] app - register handler method: "rewardTask" on "/wxWeb/api/taskHandler/rewardTask"
[2018-12-13T18:27:27.738] [DEBUG] app - register handler method: "queryTaskInfo" on "/wxWeb/api/taskHandler/queryTaskInfo"
[2018-12-13T18:27:27.738] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/userHandler.js"  ...
[2018-12-13T18:27:27.740] [DEBUG] app - register handler method: "queryUserInfo" on "/wxWeb/api/userHandler/queryUserInfo"
[2018-12-13T18:27:27.740] [DEBUG] app - register handler method: "updateUserInfo" on "/wxWeb/api/userHandler/updateUserInfo"
[2018-12-13T18:27:27.740] [DEBUG] app - register handler method: "isAddressComplete" on "/wxWeb/api/userHandler/isAddressComplete"
[2018-12-13T18:27:27.740] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/scanActivity.js"  ...
[2018-12-13T18:27:27.741] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/scanActivity.js" to "/wxWeb/scanActivity"
[2018-12-13T18:27:27.742] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/wxAccess.js"  ...
[2018-12-13T18:27:27.743] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/wxAccess.js" to "/wxWeb/wxAccess"
[2018-12-13T18:27:27.743] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/wxLogin.js"  ...
[2018-12-13T18:27:27.744] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/wxLogin.js" to "/wxWeb/wxLogin"
[2018-12-13T18:27:27.745] [DEBUG] app - load dbJsonImpl "D:\\workspace\\koa2/dbJson/scanActivity.json" ...
[2018-12-13T18:27:27.749] [DEBUG] app - load dbJsonImpl "D:\\workspace\\koa2/dbJson/taskInfo.json" ...
[2018-12-13T18:27:27.751] [DEBUG] app - DummyService.start
[2018-12-13T18:27:27.753] [DEBUG] app - start scan activity
[2018-12-13T18:27:27.826] [DEBUG] app - register event: "LOGIN"
[2018-12-13T18:27:27.826] [DEBUG] app - register event: "COMPLETE_PERSON_INFO"
[2018-12-13T18:27:27.827] [DEBUG] app - register event: "SHARE"
[2018-12-13T18:27:27.827] [DEBUG] app - register event: "ACQUIRE_POINTS"
[2018-12-13T18:27:27.827] [DEBUG] app - register event: "READ"
[2018-12-13T18:27:27.833] [DEBUG] app - UserService.start
[2018-12-13T18:27:27.834] [DEBUG] app - WechatService.start
[2018-12-13T18:27:27.835] [DEBUG] app - DummyService.afterStart
[2018-12-13T18:27:27.835] [DEBUG] app - UserService.afterStart
[2018-12-13T18:27:27.835] [DEBUG] app - WechatService.afterStart
[2018-12-13T18:27:27.836] [INFO] app - app start from dir: "D:\\workspace\\koa2"
[2018-12-13T18:27:27.855] [INFO] app - redis "redis_cache" ready.
[2018-12-13T18:27:27.873] [INFO] app - mongoose connect successfully.
[2018-12-13T18:27:27.901] [DEBUG] app - assignTask:{"n":1,"nModified":0,"opTime":{"ts":"6634422414329511937","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634422414329511937","$clusterTime":{"clusterTime":"6634422414329511937","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-13T18:27:27.905] [DEBUG] app - query task for undefined, ret:{"progress":8,"_id":"5c1202b9961e8945fce75a30","goal":10}
[2018-12-13T18:27:27.906] [DEBUG] app - queryTaskList: {"code":0,"taskList":[{"taskId":1,"desc":"【任务描述】每日完成3次登录. taskGoal [taskType,param] , 指定任务类型及目标。任务有顺序，每次只有一个当前任务，完成了当前任务才能开启后续任务","goalSort":1,"goal":3,"resetDaily":true,"award":[1000,100,1200,100]},{"taskId":2,"desc":"【任务描述】 完成个人信息填写","goalSort":2,"goal":1,"resetDaily":false,"award":[1000,1000,1200,100]},{"taskId":3,"desc":"【任务描述】每日分享一次","goalSort":3,"goal":1,"resetDaily":true,"award":[1001,2,1200,100]},{"taskId":4,"desc":"【任务描述】获得积分超过600","goalSort":4,"goal":600,"resetDaily":true,"award":[1001,2,1200,100]},{"taskId":5,"desc":"【任务描述】获得积分超过1000","goalSort":4,"goal":1000,"resetDaily":true,"taskAward":[1001,2,1200,100]}],"currentTask":{"progress":8,"_id":"5c1202b9961e8945fce75a30","goal":10}}
[2018-12-13T18:27:27.913] [DEBUG] app - before process "POST" on "/wxWeb/taskHandler/queryTaskList"  req:{"method":"POST","url":"/wxWeb/taskHandler/queryTaskList","header":{"host":"127.0.0.1:9900","accept-encoding":"gzip, deflate","user-agent":"node-superagent/3.8.3","connection":"close","content-length":"0"}}
[2018-12-13T18:27:27.914] [DEBUG] app - before check privillege
[2018-12-13T18:27:27.914] [DEBUG] app - uid is:""
[2018-12-13T18:27:27.915] [ERROR] app - user not login
[2018-12-13T18:27:27.915] [INFO] app - not login redirect to "/wxWeb/wxLogin?targetUrl=/wxWeb/taskHandler/queryTaskList"
[2018-12-13T18:27:27.917] [DEBUG] app - after process "POST" on "/wxWeb/taskHandler/queryTaskList" res:{"status":302,"message":"Found","header":{"location":"/wxWeb/wxLogin?targetUrl=/wxWeb/taskHandler/queryTaskList","content-type":"text/html; charset=utf-8","content-length":"145"}}


[2018-12-13T18:27:27.918] [DEBUG] app - redis session set "1544696847912-k3ptsb-zHrP8efz7KuhWu0EOpN1wcDQG",{"uid":"","_expire":1544783247918,"_maxAge":86400000},86410000,{"changed":true}
[2018-12-13T18:27:28.630] [DEBUG] app - createMenu:{"errcode":0,"errmsg":"ok"}
[2018-12-13T19:35:33.944] [DEBUG] app - starting "koa2" ...
[2018-12-13T19:35:33.954] [INFO] app - init mongoose "127.0.0.1":27017/"usercenter" ...
[2018-12-13T19:35:33.954] [DEBUG] app - mongodb connStr:"mongodb://127.0.0.1:27017/usercenter"
[2018-12-13T19:35:33.964] [DEBUG] app - create redis instance for "redis_cache"
[2018-12-13T19:35:33.967] [DEBUG] app - initRedisSession
[2018-12-13T19:35:33.968] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/manage/cdkeyHandler.js"  ...
[2018-12-13T19:35:33.979] [DEBUG] app - register handler method: "importCdkey" on "/manage/cdkeyHandler/importCdkey"
[2018-12-13T19:35:33.980] [DEBUG] app - register handler method: "genQrCode" on "/manage/cdkeyHandler/genQrCode"
[2018-12-13T19:35:33.980] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/manage/login.js"  ...
[2018-12-13T19:35:33.981] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/manage/login.js" to "/manage/login"
[2018-12-13T19:35:33.981] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/post.js"  ...
[2018-12-13T19:35:33.982] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/post.js" to "/post"
[2018-12-13T19:35:33.982] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/qrcode.js"  ...
[2018-12-13T19:35:33.983] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/qrcode.js" to "/qrcode"
[2018-12-13T19:35:33.983] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/redis.js"  ...
[2018-12-13T19:35:33.984] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/redis.js" to "/redis"
[2018-12-13T19:35:33.984] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/root.js"  ...
[2018-12-13T19:35:33.985] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/root.js" to "/"
[2018-12-13T19:35:33.985] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/drawAward.js"  ...
[2018-12-13T19:35:33.986] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/drawAward.js" to "/wxWeb/api/drawAward"
[2018-12-13T19:35:33.986] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/exchangeShopHandler.js"  ...
[2018-12-13T19:35:33.987] [DEBUG] app - register handler method: "queryOnSaleItemCount" on "/wxWeb/api/exchangeShopHandler/queryOnSaleItemCount"
[2018-12-13T19:35:33.987] [DEBUG] app - register handler method: "queryOnSaleItems" on "/wxWeb/api/exchangeShopHandler/queryOnSaleItems"
[2018-12-13T19:35:33.988] [DEBUG] app - register handler method: "exchangeItem" on "/wxWeb/api/exchangeShopHandler/exchangeItem"
[2018-12-13T19:35:33.988] [DEBUG] app - register handler method: "sendMessage" on "/wxWeb/api/exchangeShopHandler/sendMessage"
[2018-12-13T19:35:33.988] [DEBUG] app - register handler method: "markMessageRead" on "/wxWeb/api/exchangeShopHandler/markMessageRead"
[2018-12-13T19:35:33.989] [DEBUG] app - register handler method: "deleteMessage" on "/wxWeb/api/exchangeShopHandler/deleteMessage"
[2018-12-13T19:35:33.989] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/messageHandler.js"  ...
[2018-12-13T19:35:33.990] [DEBUG] app - register handler method: "getMessagePageCount" on "/wxWeb/api/messageHandler/getMessagePageCount"
[2018-12-13T19:35:33.991] [DEBUG] app - register handler method: "getMessagePage" on "/wxWeb/api/messageHandler/getMessagePage"
[2018-12-13T19:35:33.991] [DEBUG] app - register handler method: "sendMessage" on "/wxWeb/api/messageHandler/sendMessage"
[2018-12-13T19:35:33.991] [DEBUG] app - register handler method: "markMessageRead" on "/wxWeb/api/messageHandler/markMessageRead"
[2018-12-13T19:35:33.991] [DEBUG] app - register handler method: "deleteMessage" on "/wxWeb/api/messageHandler/deleteMessage"
[2018-12-13T19:35:33.992] [DEBUG] app - register handler method: "hasUnreadMessage" on "/wxWeb/api/messageHandler/hasUnreadMessage"
[2018-12-13T19:35:33.992] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/queryCdkeyUsage.js"  ...
[2018-12-13T19:35:33.993] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/queryCdkeyUsage.js" to "/wxWeb/api/queryCdkeyUsage"
[2018-12-13T19:35:33.993] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/queryUserStatus.js"  ...
[2018-12-13T19:35:33.997] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/queryUserStatus.js" to "/wxWeb/api/queryUserStatus"
[2018-12-13T19:35:33.997] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/smsHandler.js"  ...
[2018-12-13T19:35:33.998] [DEBUG] app - register handler method: "registerPhone" on "/wxWeb/api/smsHandler/registerPhone"
[2018-12-13T19:35:33.998] [DEBUG] app - register handler method: "getSmsCode" on "/wxWeb/api/smsHandler/getSmsCode"
[2018-12-13T19:35:33.998] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/taskHandler.js"  ...
[2018-12-13T19:35:33.999] [DEBUG] app - register handler method: "queryTaskList" on "/wxWeb/api/taskHandler/queryTaskList"
[2018-12-13T19:35:33.999] [DEBUG] app - register handler method: "rewardTask" on "/wxWeb/api/taskHandler/rewardTask"
[2018-12-13T19:35:34.000] [DEBUG] app - register handler method: "queryTaskInfo" on "/wxWeb/api/taskHandler/queryTaskInfo"
[2018-12-13T19:35:34.000] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/userHandler.js"  ...
[2018-12-13T19:35:34.001] [DEBUG] app - register handler method: "queryUserInfo" on "/wxWeb/api/userHandler/queryUserInfo"
[2018-12-13T19:35:34.001] [DEBUG] app - register handler method: "updateUserInfo" on "/wxWeb/api/userHandler/updateUserInfo"
[2018-12-13T19:35:34.001] [DEBUG] app - register handler method: "isAddressComplete" on "/wxWeb/api/userHandler/isAddressComplete"
[2018-12-13T19:35:34.002] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/scanActivity.js"  ...
[2018-12-13T19:35:34.004] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/scanActivity.js" to "/wxWeb/scanActivity"
[2018-12-13T19:35:34.004] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/wxAccess.js"  ...
[2018-12-13T19:35:34.006] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/wxAccess.js" to "/wxWeb/wxAccess"
[2018-12-13T19:35:34.006] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/wxLogin.js"  ...
[2018-12-13T19:35:34.008] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/wxLogin.js" to "/wxWeb/wxLogin"
[2018-12-13T19:35:34.009] [DEBUG] app - load dbJsonImpl "D:\\workspace\\koa2/dbJson/scanActivity.json" ...
[2018-12-13T19:35:34.010] [DEBUG] app - load dbJsonImpl "D:\\workspace\\koa2/dbJson/taskInfo.json" ...
[2018-12-13T19:35:34.011] [DEBUG] app - DummyService.start
[2018-12-13T19:35:34.014] [DEBUG] app - start scan activity
[2018-12-13T19:35:34.088] [DEBUG] app - register event: "LOGIN"
[2018-12-13T19:35:34.088] [DEBUG] app - register event: "COMPLETE_PERSON_INFO"
[2018-12-13T19:35:34.089] [DEBUG] app - register event: "SHARE"
[2018-12-13T19:35:34.089] [DEBUG] app - register event: "ACQUIRE_POINTS"
[2018-12-13T19:35:34.089] [DEBUG] app - register event: "READ"
[2018-12-13T19:35:34.095] [DEBUG] app - UserService.start
[2018-12-13T19:35:34.096] [DEBUG] app - WechatService.start
[2018-12-13T19:35:34.097] [DEBUG] app - DummyService.afterStart
[2018-12-13T19:35:34.097] [DEBUG] app - UserService.afterStart
[2018-12-13T19:35:34.097] [DEBUG] app - WechatService.afterStart
[2018-12-13T19:35:34.098] [INFO] app - app start from dir: "D:\\workspace\\koa2"
[2018-12-13T19:35:34.119] [INFO] app - redis "redis_cache" ready.
[2018-12-13T19:35:34.141] [INFO] app - mongoose connect successfully.
[2018-12-13T19:35:34.171] [DEBUG] app - assignTask:{"n":1,"nModified":0,"opTime":{"ts":"6634439989335687169","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634439989335687169","$clusterTime":{"clusterTime":"6634439989335687169","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-13T19:35:34.178] [DEBUG] app - query task for "abcdef", ret:{"progress":0,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}
[2018-12-13T19:35:34.178] [DEBUG] app - queryTaskList: {"code":0,"taskList":[{"taskId":1,"desc":"【任务描述】每日完成3次登录. taskGoal [taskType,param] , 指定任务类型及目标。任务有顺序，每次只有一个当前任务，完成了当前任务才能开启后续任务","goalSort":1,"goal":3,"resetDaily":true,"award":[1000,100,1200,100]},{"taskId":2,"desc":"【任务描述】 完成个人信息填写","goalSort":2,"goal":1,"resetDaily":false,"award":[1000,1000,1200,100]},{"taskId":3,"desc":"【任务描述】每日分享一次","goalSort":3,"goal":1,"resetDaily":true,"award":[1001,2,1200,100]},{"taskId":4,"desc":"【任务描述】获得积分超过600","goalSort":4,"goal":600,"resetDaily":true,"award":[1001,2,1200,100]},{"taskId":5,"desc":"【任务描述】获得积分超过1000","goalSort":4,"goal":1000,"resetDaily":true,"taskAward":[1001,2,1200,100]}],"currentTask":{"progress":0,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}}
[2018-12-13T19:35:34.183] [DEBUG] app - query task for "abcdef", ret:{"progress":0,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}
[2018-12-13T19:35:34.187] [DEBUG] app - before process "POST" on "/wxWeb/taskHandler/queryTaskList"  req:{"method":"POST","url":"/wxWeb/taskHandler/queryTaskList","header":{"host":"127.0.0.1:9900","accept-encoding":"gzip, deflate","user-agent":"node-superagent/3.8.3","connection":"close","content-length":"0"}}
[2018-12-13T19:35:34.188] [DEBUG] app - before check privillege
[2018-12-13T19:35:34.188] [DEBUG] app - uid is:""
[2018-12-13T19:35:34.189] [ERROR] app - user not login
[2018-12-13T19:35:34.189] [INFO] app - not login redirect to "/wxWeb/wxLogin?targetUrl=/wxWeb/taskHandler/queryTaskList"
[2018-12-13T19:35:34.190] [DEBUG] app - after process "POST" on "/wxWeb/taskHandler/queryTaskList" res:{"status":302,"message":"Found","header":{"location":"/wxWeb/wxLogin?targetUrl=/wxWeb/taskHandler/queryTaskList","content-type":"text/html; charset=utf-8","content-length":"145"}}


[2018-12-13T19:35:34.191] [DEBUG] app - redis session set "1544700934186-MAPzc5jrtydDn1hOIsnxzgVOQsuOYFQ_",{"uid":"","_expire":1544787334191,"_maxAge":86400000},86410000,{"changed":true}
[2018-12-13T19:35:34.894] [DEBUG] app - createMenu:{"errcode":0,"errmsg":"ok"}
[2018-12-13T19:40:52.266] [DEBUG] app - starting "koa2" ...
[2018-12-13T19:40:52.276] [INFO] app - init mongoose "127.0.0.1":27017/"usercenter" ...
[2018-12-13T19:40:52.277] [DEBUG] app - mongodb connStr:"mongodb://127.0.0.1:27017/usercenter"
[2018-12-13T19:40:52.286] [DEBUG] app - create redis instance for "redis_cache"
[2018-12-13T19:40:52.289] [DEBUG] app - initRedisSession
[2018-12-13T19:40:52.290] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/manage/cdkeyHandler.js"  ...
[2018-12-13T19:40:52.299] [DEBUG] app - register handler method: "importCdkey" on "/manage/cdkeyHandler/importCdkey"
[2018-12-13T19:40:52.300] [DEBUG] app - register handler method: "genQrCode" on "/manage/cdkeyHandler/genQrCode"
[2018-12-13T19:40:52.301] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/manage/login.js"  ...
[2018-12-13T19:40:52.301] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/manage/login.js" to "/manage/login"
[2018-12-13T19:40:52.302] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/post.js"  ...
[2018-12-13T19:40:52.302] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/post.js" to "/post"
[2018-12-13T19:40:52.304] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/qrcode.js"  ...
[2018-12-13T19:40:52.305] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/qrcode.js" to "/qrcode"
[2018-12-13T19:40:52.305] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/redis.js"  ...
[2018-12-13T19:40:52.306] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/redis.js" to "/redis"
[2018-12-13T19:40:52.306] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/root.js"  ...
[2018-12-13T19:40:52.307] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/root.js" to "/"
[2018-12-13T19:40:52.307] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/drawAward.js"  ...
[2018-12-13T19:40:52.312] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/drawAward.js" to "/wxWeb/api/drawAward"
[2018-12-13T19:40:52.312] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/exchangeShopHandler.js"  ...
[2018-12-13T19:40:52.313] [DEBUG] app - register handler method: "queryOnSaleItemCount" on "/wxWeb/api/exchangeShopHandler/queryOnSaleItemCount"
[2018-12-13T19:40:52.313] [DEBUG] app - register handler method: "queryOnSaleItems" on "/wxWeb/api/exchangeShopHandler/queryOnSaleItems"
[2018-12-13T19:40:52.314] [DEBUG] app - register handler method: "exchangeItem" on "/wxWeb/api/exchangeShopHandler/exchangeItem"
[2018-12-13T19:40:52.314] [DEBUG] app - register handler method: "sendMessage" on "/wxWeb/api/exchangeShopHandler/sendMessage"
[2018-12-13T19:40:52.314] [DEBUG] app - register handler method: "markMessageRead" on "/wxWeb/api/exchangeShopHandler/markMessageRead"
[2018-12-13T19:40:52.315] [DEBUG] app - register handler method: "deleteMessage" on "/wxWeb/api/exchangeShopHandler/deleteMessage"
[2018-12-13T19:40:52.315] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/messageHandler.js"  ...
[2018-12-13T19:40:52.315] [DEBUG] app - register handler method: "getMessagePageCount" on "/wxWeb/api/messageHandler/getMessagePageCount"
[2018-12-13T19:40:52.316] [DEBUG] app - register handler method: "getMessagePage" on "/wxWeb/api/messageHandler/getMessagePage"
[2018-12-13T19:40:52.316] [DEBUG] app - register handler method: "sendMessage" on "/wxWeb/api/messageHandler/sendMessage"
[2018-12-13T19:40:52.316] [DEBUG] app - register handler method: "markMessageRead" on "/wxWeb/api/messageHandler/markMessageRead"
[2018-12-13T19:40:52.316] [DEBUG] app - register handler method: "deleteMessage" on "/wxWeb/api/messageHandler/deleteMessage"
[2018-12-13T19:40:52.317] [DEBUG] app - register handler method: "hasUnreadMessage" on "/wxWeb/api/messageHandler/hasUnreadMessage"
[2018-12-13T19:40:52.317] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/queryCdkeyUsage.js"  ...
[2018-12-13T19:40:52.318] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/queryCdkeyUsage.js" to "/wxWeb/api/queryCdkeyUsage"
[2018-12-13T19:40:52.318] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/queryUserStatus.js"  ...
[2018-12-13T19:40:52.322] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/queryUserStatus.js" to "/wxWeb/api/queryUserStatus"
[2018-12-13T19:40:52.322] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/smsHandler.js"  ...
[2018-12-13T19:40:52.323] [DEBUG] app - register handler method: "registerPhone" on "/wxWeb/api/smsHandler/registerPhone"
[2018-12-13T19:40:52.323] [DEBUG] app - register handler method: "getSmsCode" on "/wxWeb/api/smsHandler/getSmsCode"
[2018-12-13T19:40:52.324] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/taskHandler.js"  ...
[2018-12-13T19:40:52.324] [DEBUG] app - register handler method: "queryTaskList" on "/wxWeb/api/taskHandler/queryTaskList"
[2018-12-13T19:40:52.324] [DEBUG] app - register handler method: "rewardTask" on "/wxWeb/api/taskHandler/rewardTask"
[2018-12-13T19:40:52.325] [DEBUG] app - register handler method: "queryTaskInfo" on "/wxWeb/api/taskHandler/queryTaskInfo"
[2018-12-13T19:40:52.325] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/userHandler.js"  ...
[2018-12-13T19:40:52.326] [DEBUG] app - register handler method: "queryUserInfo" on "/wxWeb/api/userHandler/queryUserInfo"
[2018-12-13T19:40:52.327] [DEBUG] app - register handler method: "updateUserInfo" on "/wxWeb/api/userHandler/updateUserInfo"
[2018-12-13T19:40:52.327] [DEBUG] app - register handler method: "isAddressComplete" on "/wxWeb/api/userHandler/isAddressComplete"
[2018-12-13T19:40:52.327] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/scanActivity.js"  ...
[2018-12-13T19:40:52.329] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/scanActivity.js" to "/wxWeb/scanActivity"
[2018-12-13T19:40:52.329] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/wxAccess.js"  ...
[2018-12-13T19:40:52.330] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/wxAccess.js" to "/wxWeb/wxAccess"
[2018-12-13T19:40:52.330] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/wxLogin.js"  ...
[2018-12-13T19:40:52.331] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/wxLogin.js" to "/wxWeb/wxLogin"
[2018-12-13T19:40:52.332] [DEBUG] app - load dbJsonImpl "D:\\workspace\\koa2/dbJson/scanActivity.json" ...
[2018-12-13T19:40:52.333] [DEBUG] app - load dbJsonImpl "D:\\workspace\\koa2/dbJson/taskInfo.json" ...
[2018-12-13T19:40:52.335] [DEBUG] app - DummyService.start
[2018-12-13T19:40:52.338] [DEBUG] app - start scan activity
[2018-12-13T19:40:52.410] [DEBUG] app - register event: "LOGIN"
[2018-12-13T19:40:52.410] [DEBUG] app - register event: "COMPLETE_PERSON_INFO"
[2018-12-13T19:40:52.411] [DEBUG] app - register event: "SHARE"
[2018-12-13T19:40:52.411] [DEBUG] app - register event: "ACQUIRE_POINTS"
[2018-12-13T19:40:52.411] [DEBUG] app - register event: "READ"
[2018-12-13T19:40:52.418] [DEBUG] app - UserService.start
[2018-12-13T19:40:52.419] [DEBUG] app - WechatService.start
[2018-12-13T19:40:52.419] [DEBUG] app - DummyService.afterStart
[2018-12-13T19:40:52.419] [DEBUG] app - UserService.afterStart
[2018-12-13T19:40:52.420] [DEBUG] app - WechatService.afterStart
[2018-12-13T19:40:52.420] [INFO] app - app start from dir: "D:\\workspace\\koa2"
[2018-12-13T19:40:52.455] [INFO] app - redis "redis_cache" ready.
[2018-12-13T19:40:52.455] [INFO] app - mongoose connect successfully.
[2018-12-13T19:40:52.483] [DEBUG] app - assignTask:{"n":1,"nModified":0,"opTime":{"ts":"6634441359430254593","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634441359430254593","$clusterTime":{"clusterTime":"6634441359430254593","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-13T19:40:52.486] [DEBUG] app - query task for "abcdef", ret:{"progress":0,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}
[2018-12-13T19:40:52.488] [DEBUG] app - queryTaskList: {"code":0,"taskList":[{"taskId":1,"desc":"【任务描述】每日完成3次登录. taskGoal [taskType,param] , 指定任务类型及目标。任务有顺序，每次只有一个当前任务，完成了当前任务才能开启后续任务","goalSort":1,"goal":3,"resetDaily":true,"award":[1000,100,1200,100]},{"taskId":2,"desc":"【任务描述】 完成个人信息填写","goalSort":2,"goal":1,"resetDaily":false,"award":[1000,1000,1200,100]},{"taskId":3,"desc":"【任务描述】每日分享一次","goalSort":3,"goal":1,"resetDaily":true,"award":[1001,2,1200,100]},{"taskId":4,"desc":"【任务描述】获得积分超过600","goalSort":4,"goal":600,"resetDaily":true,"award":[1001,2,1200,100]},{"taskId":5,"desc":"【任务描述】获得积分超过1000","goalSort":4,"goal":1000,"resetDaily":true,"taskAward":[1001,2,1200,100]}],"currentTask":{"progress":0,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}}
[2018-12-13T19:40:52.492] [DEBUG] app - query task for "abcdef", ret:{"progress":0,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}
[2018-12-13T19:40:52.499] [DEBUG] app - before process "POST" on "/wxWeb/taskHandler/queryTaskList"  req:{"method":"POST","url":"/wxWeb/taskHandler/queryTaskList","header":{"host":"127.0.0.1:9900","accept-encoding":"gzip, deflate","user-agent":"node-superagent/3.8.3","connection":"close","content-length":"0"}}
[2018-12-13T19:40:52.500] [DEBUG] app - before check privillege
[2018-12-13T19:40:52.500] [DEBUG] app - uid is:""
[2018-12-13T19:40:52.500] [ERROR] app - user not login
[2018-12-13T19:40:52.501] [INFO] app - not login redirect to "/wxWeb/wxLogin?targetUrl=/wxWeb/taskHandler/queryTaskList"
[2018-12-13T19:40:52.502] [DEBUG] app - after process "POST" on "/wxWeb/taskHandler/queryTaskList" res:{"status":302,"message":"Found","header":{"location":"/wxWeb/wxLogin?targetUrl=/wxWeb/taskHandler/queryTaskList","content-type":"text/html; charset=utf-8","content-length":"145"}}


[2018-12-13T19:40:52.503] [DEBUG] app - redis session set "1544701252498-vE8JDjIfKYOxr2QPsKLmfUxZP5v2Idq8",{"uid":"","_expire":1544787652503,"_maxAge":86400000},86410000,{"changed":true}
[2018-12-13T19:40:53.156] [DEBUG] app - createMenu:{"errcode":0,"errmsg":"ok"}
[2018-12-13T19:46:24.291] [DEBUG] app - starting "koa2" ...
[2018-12-13T19:46:24.302] [INFO] app - init mongoose "127.0.0.1":27017/"usercenter" ...
[2018-12-13T19:46:24.302] [DEBUG] app - mongodb connStr:"mongodb://127.0.0.1:27017/usercenter"
[2018-12-13T19:46:24.311] [DEBUG] app - create redis instance for "redis_cache"
[2018-12-13T19:46:24.313] [DEBUG] app - initRedisSession
[2018-12-13T19:46:24.314] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/manage/cdkeyHandler.js"  ...
[2018-12-13T19:46:24.324] [DEBUG] app - register handler method: "importCdkey" on "/manage/cdkeyHandler/importCdkey"
[2018-12-13T19:46:24.325] [DEBUG] app - register handler method: "genQrCode" on "/manage/cdkeyHandler/genQrCode"
[2018-12-13T19:46:24.326] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/manage/login.js"  ...
[2018-12-13T19:46:24.326] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/manage/login.js" to "/manage/login"
[2018-12-13T19:46:24.327] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/post.js"  ...
[2018-12-13T19:46:24.327] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/post.js" to "/post"
[2018-12-13T19:46:24.328] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/qrcode.js"  ...
[2018-12-13T19:46:24.329] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/qrcode.js" to "/qrcode"
[2018-12-13T19:46:24.329] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/redis.js"  ...
[2018-12-13T19:46:24.330] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/redis.js" to "/redis"
[2018-12-13T19:46:24.331] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/root.js"  ...
[2018-12-13T19:46:24.331] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/root.js" to "/"
[2018-12-13T19:46:24.332] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/drawAward.js"  ...
[2018-12-13T19:46:24.332] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/drawAward.js" to "/wxWeb/api/drawAward"
[2018-12-13T19:46:24.333] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/exchangeShopHandler.js"  ...
[2018-12-13T19:46:24.333] [DEBUG] app - register handler method: "queryOnSaleItemCount" on "/wxWeb/api/exchangeShopHandler/queryOnSaleItemCount"
[2018-12-13T19:46:24.334] [DEBUG] app - register handler method: "queryOnSaleItems" on "/wxWeb/api/exchangeShopHandler/queryOnSaleItems"
[2018-12-13T19:46:24.334] [DEBUG] app - register handler method: "exchangeItem" on "/wxWeb/api/exchangeShopHandler/exchangeItem"
[2018-12-13T19:46:24.334] [DEBUG] app - register handler method: "sendMessage" on "/wxWeb/api/exchangeShopHandler/sendMessage"
[2018-12-13T19:46:24.335] [DEBUG] app - register handler method: "markMessageRead" on "/wxWeb/api/exchangeShopHandler/markMessageRead"
[2018-12-13T19:46:24.340] [DEBUG] app - register handler method: "deleteMessage" on "/wxWeb/api/exchangeShopHandler/deleteMessage"
[2018-12-13T19:46:24.340] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/messageHandler.js"  ...
[2018-12-13T19:46:24.341] [DEBUG] app - register handler method: "getMessagePageCount" on "/wxWeb/api/messageHandler/getMessagePageCount"
[2018-12-13T19:46:24.341] [DEBUG] app - register handler method: "getMessagePage" on "/wxWeb/api/messageHandler/getMessagePage"
[2018-12-13T19:46:24.342] [DEBUG] app - register handler method: "sendMessage" on "/wxWeb/api/messageHandler/sendMessage"
[2018-12-13T19:46:24.342] [DEBUG] app - register handler method: "markMessageRead" on "/wxWeb/api/messageHandler/markMessageRead"
[2018-12-13T19:46:24.342] [DEBUG] app - register handler method: "deleteMessage" on "/wxWeb/api/messageHandler/deleteMessage"
[2018-12-13T19:46:24.343] [DEBUG] app - register handler method: "hasUnreadMessage" on "/wxWeb/api/messageHandler/hasUnreadMessage"
[2018-12-13T19:46:24.343] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/queryCdkeyUsage.js"  ...
[2018-12-13T19:46:24.344] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/queryCdkeyUsage.js" to "/wxWeb/api/queryCdkeyUsage"
[2018-12-13T19:46:24.344] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/queryUserStatus.js"  ...
[2018-12-13T19:46:24.348] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/queryUserStatus.js" to "/wxWeb/api/queryUserStatus"
[2018-12-13T19:46:24.348] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/smsHandler.js"  ...
[2018-12-13T19:46:24.349] [DEBUG] app - register handler method: "registerPhone" on "/wxWeb/api/smsHandler/registerPhone"
[2018-12-13T19:46:24.349] [DEBUG] app - register handler method: "getSmsCode" on "/wxWeb/api/smsHandler/getSmsCode"
[2018-12-13T19:46:24.349] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/taskHandler.js"  ...
[2018-12-13T19:46:24.350] [DEBUG] app - register handler method: "queryTaskList" on "/wxWeb/api/taskHandler/queryTaskList"
[2018-12-13T19:46:24.350] [DEBUG] app - register handler method: "rewardTask" on "/wxWeb/api/taskHandler/rewardTask"
[2018-12-13T19:46:24.351] [DEBUG] app - register handler method: "queryTaskInfo" on "/wxWeb/api/taskHandler/queryTaskInfo"
[2018-12-13T19:46:24.351] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/userHandler.js"  ...
[2018-12-13T19:46:24.352] [DEBUG] app - register handler method: "queryUserInfo" on "/wxWeb/api/userHandler/queryUserInfo"
[2018-12-13T19:46:24.352] [DEBUG] app - register handler method: "updateUserInfo" on "/wxWeb/api/userHandler/updateUserInfo"
[2018-12-13T19:46:24.352] [DEBUG] app - register handler method: "isAddressComplete" on "/wxWeb/api/userHandler/isAddressComplete"
[2018-12-13T19:46:24.353] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/scanActivity.js"  ...
[2018-12-13T19:46:24.354] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/scanActivity.js" to "/wxWeb/scanActivity"
[2018-12-13T19:46:24.354] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/wxAccess.js"  ...
[2018-12-13T19:46:24.355] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/wxAccess.js" to "/wxWeb/wxAccess"
[2018-12-13T19:46:24.355] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/wxLogin.js"  ...
[2018-12-13T19:46:24.356] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/wxLogin.js" to "/wxWeb/wxLogin"
[2018-12-13T19:46:24.357] [DEBUG] app - load dbJsonImpl "D:\\workspace\\koa2/dbJson/scanActivity.json" ...
[2018-12-13T19:46:24.358] [DEBUG] app - load dbJsonImpl "D:\\workspace\\koa2/dbJson/taskInfo.json" ...
[2018-12-13T19:46:24.360] [DEBUG] app - DummyService.start
[2018-12-13T19:46:24.364] [DEBUG] app - start scan activity
[2018-12-13T19:46:24.437] [DEBUG] app - register event: "login"
[2018-12-13T19:46:24.438] [DEBUG] app - register event: "completePersonInfo"
[2018-12-13T19:46:24.438] [DEBUG] app - register event: "share"
[2018-12-13T19:46:24.438] [DEBUG] app - register event: "acquirePoints"
[2018-12-13T19:46:24.438] [DEBUG] app - register event: "read"
[2018-12-13T19:46:24.444] [DEBUG] app - UserService.start
[2018-12-13T19:46:24.446] [DEBUG] app - WechatService.start
[2018-12-13T19:46:24.446] [DEBUG] app - DummyService.afterStart
[2018-12-13T19:46:24.446] [DEBUG] app - UserService.afterStart
[2018-12-13T19:46:24.446] [DEBUG] app - WechatService.afterStart
[2018-12-13T19:46:24.447] [INFO] app - app start from dir: "D:\\workspace\\koa2"
[2018-12-13T19:46:24.479] [INFO] app - redis "redis_cache" ready.
[2018-12-13T19:46:24.480] [INFO] app - mongoose connect successfully.
[2018-12-13T19:46:24.508] [DEBUG] app - assignTask:{"n":1,"nModified":0,"opTime":{"ts":"6634442776769462273","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634442776769462273","$clusterTime":{"clusterTime":"6634442776769462273","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-13T19:46:24.513] [DEBUG] app - query task for "abcdef", ret:{"progress":0,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}
[2018-12-13T19:46:24.514] [DEBUG] app - queryTaskList: {"code":0,"taskList":[{"taskId":1,"desc":"【任务描述】每日完成3次登录. taskGoal [taskType,param] , 指定任务类型及目标。任务有顺序，每次只有一个当前任务，完成了当前任务才能开启后续任务","goalSort":1,"goal":3,"resetDaily":true,"award":[1000,100,1200,100]},{"taskId":2,"desc":"【任务描述】 完成个人信息填写","goalSort":2,"goal":1,"resetDaily":false,"award":[1000,1000,1200,100]},{"taskId":3,"desc":"【任务描述】每日分享一次","goalSort":3,"goal":1,"resetDaily":true,"award":[1001,2,1200,100]},{"taskId":4,"desc":"【任务描述】获得积分超过600","goalSort":4,"goal":600,"resetDaily":true,"award":[1001,2,1200,100]},{"taskId":5,"desc":"【任务描述】获得积分超过1000","goalSort":4,"goal":1000,"resetDaily":true,"taskAward":[1001,2,1200,100]}],"currentTask":{"progress":0,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}}
[2018-12-13T19:46:24.516] [DEBUG] app - user "abcdef" event "login" fired
[2018-12-13T19:46:24.518] [DEBUG] app - query task for "abcdef", ret:{"progress":0,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}
[2018-12-13T19:46:24.522] [DEBUG] app - query task for "abcdef", ret:{"progress":0,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}
[2018-12-13T19:46:24.522] [INFO] app - complete task {"progress":0,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1} with event "login"
[2018-12-13T19:46:24.528] [DEBUG] app - before process "POST" on "/wxWeb/taskHandler/queryTaskList"  req:{"method":"POST","url":"/wxWeb/taskHandler/queryTaskList","header":{"host":"127.0.0.1:9900","accept-encoding":"gzip, deflate","user-agent":"node-superagent/3.8.3","connection":"close","content-length":"0"}}
[2018-12-13T19:46:24.529] [DEBUG] app - before check privillege
[2018-12-13T19:46:24.529] [DEBUG] app - uid is:""
[2018-12-13T19:46:24.529] [ERROR] app - user not login
[2018-12-13T19:46:24.530] [INFO] app - not login redirect to "/wxWeb/wxLogin?targetUrl=/wxWeb/taskHandler/queryTaskList"
[2018-12-13T19:46:24.531] [DEBUG] app - after process "POST" on "/wxWeb/taskHandler/queryTaskList" res:{"status":302,"message":"Found","header":{"location":"/wxWeb/wxLogin?targetUrl=/wxWeb/taskHandler/queryTaskList","content-type":"text/html; charset=utf-8","content-length":"145"}}


[2018-12-13T19:46:24.536] [DEBUG] app - redis session set "1544701584527-ep5NMnBIaA8jiU5UXuGBMLKjdse3f5J0",{"uid":"","_expire":1544787984536,"_maxAge":86400000},86410000,{"changed":true}
[2018-12-13T19:46:24.537] [DEBUG] app - completeTask: {"n":1,"nModified":1,"opTime":{"ts":"6634442785359396865","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634442785359396865","$clusterTime":{"clusterTime":"6634442785359396865","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-13T19:46:24.539] [FATAL] app - unhandledRejection: "ReferenceError: goal is not defined\n    at TaskManager.completeCurrentTask (D:\\workspace\\koa2\\domain\\task\\taskManager.js:108:72)"
[2018-12-13T19:46:25.264] [DEBUG] app - createMenu:{"errcode":0,"errmsg":"ok"}
[2018-12-13T19:51:03.331] [DEBUG] app - starting "koa2" ...
[2018-12-13T19:51:03.346] [INFO] app - init mongoose "127.0.0.1":27017/"usercenter" ...
[2018-12-13T19:51:03.346] [DEBUG] app - mongodb connStr:"mongodb://127.0.0.1:27017/usercenter"
[2018-12-13T19:51:03.356] [DEBUG] app - create redis instance for "redis_cache"
[2018-12-13T19:51:03.357] [DEBUG] app - initRedisSession
[2018-12-13T19:51:03.359] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/manage/cdkeyHandler.js"  ...
[2018-12-13T19:51:03.369] [DEBUG] app - register handler method: "importCdkey" on "/manage/cdkeyHandler/importCdkey"
[2018-12-13T19:51:03.370] [DEBUG] app - register handler method: "genQrCode" on "/manage/cdkeyHandler/genQrCode"
[2018-12-13T19:51:03.370] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/manage/login.js"  ...
[2018-12-13T19:51:03.371] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/manage/login.js" to "/manage/login"
[2018-12-13T19:51:03.371] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/post.js"  ...
[2018-12-13T19:51:03.371] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/post.js" to "/post"
[2018-12-13T19:51:03.372] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/qrcode.js"  ...
[2018-12-13T19:51:03.372] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/qrcode.js" to "/qrcode"
[2018-12-13T19:51:03.372] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/redis.js"  ...
[2018-12-13T19:51:03.373] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/redis.js" to "/redis"
[2018-12-13T19:51:03.373] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/root.js"  ...
[2018-12-13T19:51:03.374] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/root.js" to "/"
[2018-12-13T19:51:03.374] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/drawAward.js"  ...
[2018-12-13T19:51:03.375] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/drawAward.js" to "/wxWeb/api/drawAward"
[2018-12-13T19:51:03.375] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/exchangeShopHandler.js"  ...
[2018-12-13T19:51:03.376] [DEBUG] app - register handler method: "queryOnSaleItemCount" on "/wxWeb/api/exchangeShopHandler/queryOnSaleItemCount"
[2018-12-13T19:51:03.377] [DEBUG] app - register handler method: "queryOnSaleItems" on "/wxWeb/api/exchangeShopHandler/queryOnSaleItems"
[2018-12-13T19:51:03.377] [DEBUG] app - register handler method: "exchangeItem" on "/wxWeb/api/exchangeShopHandler/exchangeItem"
[2018-12-13T19:51:03.378] [DEBUG] app - register handler method: "sendMessage" on "/wxWeb/api/exchangeShopHandler/sendMessage"
[2018-12-13T19:51:03.378] [DEBUG] app - register handler method: "markMessageRead" on "/wxWeb/api/exchangeShopHandler/markMessageRead"
[2018-12-13T19:51:03.378] [DEBUG] app - register handler method: "deleteMessage" on "/wxWeb/api/exchangeShopHandler/deleteMessage"
[2018-12-13T19:51:03.379] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/messageHandler.js"  ...
[2018-12-13T19:51:03.379] [DEBUG] app - register handler method: "getMessagePageCount" on "/wxWeb/api/messageHandler/getMessagePageCount"
[2018-12-13T19:51:03.380] [DEBUG] app - register handler method: "getMessagePage" on "/wxWeb/api/messageHandler/getMessagePage"
[2018-12-13T19:51:03.380] [DEBUG] app - register handler method: "sendMessage" on "/wxWeb/api/messageHandler/sendMessage"
[2018-12-13T19:51:03.380] [DEBUG] app - register handler method: "markMessageRead" on "/wxWeb/api/messageHandler/markMessageRead"
[2018-12-13T19:51:03.381] [DEBUG] app - register handler method: "deleteMessage" on "/wxWeb/api/messageHandler/deleteMessage"
[2018-12-13T19:51:03.381] [DEBUG] app - register handler method: "hasUnreadMessage" on "/wxWeb/api/messageHandler/hasUnreadMessage"
[2018-12-13T19:51:03.382] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/queryCdkeyUsage.js"  ...
[2018-12-13T19:51:03.382] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/queryCdkeyUsage.js" to "/wxWeb/api/queryCdkeyUsage"
[2018-12-13T19:51:03.383] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/queryUserStatus.js"  ...
[2018-12-13T19:51:03.387] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/queryUserStatus.js" to "/wxWeb/api/queryUserStatus"
[2018-12-13T19:51:03.387] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/smsHandler.js"  ...
[2018-12-13T19:51:03.388] [DEBUG] app - register handler method: "registerPhone" on "/wxWeb/api/smsHandler/registerPhone"
[2018-12-13T19:51:03.388] [DEBUG] app - register handler method: "getSmsCode" on "/wxWeb/api/smsHandler/getSmsCode"
[2018-12-13T19:51:03.388] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/taskHandler.js"  ...
[2018-12-13T19:51:03.389] [DEBUG] app - register handler method: "queryTaskList" on "/wxWeb/api/taskHandler/queryTaskList"
[2018-12-13T19:51:03.389] [DEBUG] app - register handler method: "rewardTask" on "/wxWeb/api/taskHandler/rewardTask"
[2018-12-13T19:51:03.390] [DEBUG] app - register handler method: "queryTaskInfo" on "/wxWeb/api/taskHandler/queryTaskInfo"
[2018-12-13T19:51:03.390] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/userHandler.js"  ...
[2018-12-13T19:51:03.391] [DEBUG] app - register handler method: "queryUserInfo" on "/wxWeb/api/userHandler/queryUserInfo"
[2018-12-13T19:51:03.391] [DEBUG] app - register handler method: "updateUserInfo" on "/wxWeb/api/userHandler/updateUserInfo"
[2018-12-13T19:51:03.391] [DEBUG] app - register handler method: "isAddressComplete" on "/wxWeb/api/userHandler/isAddressComplete"
[2018-12-13T19:51:03.392] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/scanActivity.js"  ...
[2018-12-13T19:51:03.393] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/scanActivity.js" to "/wxWeb/scanActivity"
[2018-12-13T19:51:03.393] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/wxAccess.js"  ...
[2018-12-13T19:51:03.394] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/wxAccess.js" to "/wxWeb/wxAccess"
[2018-12-13T19:51:03.394] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/wxLogin.js"  ...
[2018-12-13T19:51:03.395] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/wxLogin.js" to "/wxWeb/wxLogin"
[2018-12-13T19:51:03.397] [DEBUG] app - load dbJsonImpl "D:\\workspace\\koa2/dbJson/scanActivity.json" ...
[2018-12-13T19:51:03.398] [DEBUG] app - load dbJsonImpl "D:\\workspace\\koa2/dbJson/taskInfo.json" ...
[2018-12-13T19:51:03.399] [DEBUG] app - DummyService.start
[2018-12-13T19:51:03.401] [DEBUG] app - start scan activity
[2018-12-13T19:51:03.480] [DEBUG] app - register event: "login"
[2018-12-13T19:51:03.480] [DEBUG] app - register event: "completePersonInfo"
[2018-12-13T19:51:03.481] [DEBUG] app - register event: "share"
[2018-12-13T19:51:03.481] [DEBUG] app - register event: "acquirePoints"
[2018-12-13T19:51:03.482] [DEBUG] app - register event: "read"
[2018-12-13T19:51:03.487] [DEBUG] app - UserService.start
[2018-12-13T19:51:03.488] [DEBUG] app - WechatService.start
[2018-12-13T19:51:03.489] [DEBUG] app - DummyService.afterStart
[2018-12-13T19:51:03.489] [DEBUG] app - UserService.afterStart
[2018-12-13T19:51:03.490] [DEBUG] app - WechatService.afterStart
[2018-12-13T19:51:03.490] [INFO] app - app start from dir: "D:\\workspace\\koa2"
[2018-12-13T19:51:03.505] [INFO] app - redis "redis_cache" ready.
[2018-12-13T19:51:03.528] [INFO] app - mongoose connect successfully.
[2018-12-13T19:51:03.557] [DEBUG] app - assignTask:{"n":1,"nModified":0,"opTime":{"ts":"6634443979360305153","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634443979360305153","$clusterTime":{"clusterTime":"6634443979360305153","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-13T19:51:03.561] [DEBUG] app - query task for "abcdef", ret:{"progress":0,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}
[2018-12-13T19:51:03.562] [DEBUG] app - queryTaskList: {"code":0,"taskList":[{"taskId":1,"desc":"【任务描述】每日完成3次登录. taskGoal [taskType,param] , 指定任务类型及目标。任务有顺序，每次只有一个当前任务，完成了当前任务才能开启后续任务","goalSort":1,"goal":3,"resetDaily":true,"award":[1000,100,1200,100]},{"taskId":2,"desc":"【任务描述】 完成个人信息填写","goalSort":2,"goal":1,"resetDaily":false,"award":[1000,1000,1200,100]},{"taskId":3,"desc":"【任务描述】每日分享一次","goalSort":3,"goal":1,"resetDaily":true,"award":[1001,2,1200,100]},{"taskId":4,"desc":"【任务描述】获得积分超过600","goalSort":4,"goal":600,"resetDaily":true,"award":[1001,2,1200,100]},{"taskId":5,"desc":"【任务描述】获得积分超过1000","goalSort":4,"goal":1000,"resetDaily":true,"taskAward":[1001,2,1200,100]}],"currentTask":{"progress":0,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}}
[2018-12-13T19:51:03.564] [DEBUG] app - user "abcdef" event "login" fired
[2018-12-13T19:51:03.566] [DEBUG] app - query task for "abcdef", ret:{"progress":0,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}
[2018-12-13T19:51:03.571] [DEBUG] app - query task for "abcdef", ret:{"progress":0,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}
[2018-12-13T19:51:03.572] [INFO] app - complete task {"progress":0,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1} with event "login"
[2018-12-13T19:51:03.577] [DEBUG] app - before process "POST" on "/wxWeb/taskHandler/queryTaskList"  req:{"method":"POST","url":"/wxWeb/taskHandler/queryTaskList","header":{"host":"127.0.0.1:9900","accept-encoding":"gzip, deflate","user-agent":"node-superagent/3.8.3","connection":"close","content-length":"0"}}
[2018-12-13T19:51:03.578] [DEBUG] app - before check privillege
[2018-12-13T19:51:03.578] [DEBUG] app - uid is:""
[2018-12-13T19:51:03.578] [ERROR] app - user not login
[2018-12-13T19:51:03.579] [INFO] app - not login redirect to "/wxWeb/wxLogin?targetUrl=/wxWeb/taskHandler/queryTaskList"
[2018-12-13T19:51:03.580] [DEBUG] app - after process "POST" on "/wxWeb/taskHandler/queryTaskList" res:{"status":302,"message":"Found","header":{"location":"/wxWeb/wxLogin?targetUrl=/wxWeb/taskHandler/queryTaskList","content-type":"text/html; charset=utf-8","content-length":"145"}}


[2018-12-13T19:51:03.581] [DEBUG] app - redis session set "1544701863576-0T1kvU9VjSd1JDhTlI7o4wGjxFzuB3re",{"uid":"","_expire":1544788263581,"_maxAge":86400000},86410000,{"changed":true}
[2018-12-13T19:51:03.582] [DEBUG] app - completeTask: {"n":1,"nModified":1,"opTime":{"ts":"6634443983655272449","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634443983655272449","$clusterTime":{"clusterTime":"6634443983655272449","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-13T19:51:03.591] [DEBUG] app - try complete full task. {"n":0,"nModified":0,"opTime":{"ts":"6634443983655272449","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634443983655272449","$clusterTime":{"clusterTime":"6634443983655272449","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-13T19:51:04.323] [DEBUG] app - createMenu:{"errcode":0,"errmsg":"ok"}
[2018-12-13T19:53:23.911] [DEBUG] app - starting "koa2" ...
[2018-12-13T19:53:23.921] [INFO] app - init mongoose "127.0.0.1":27017/"usercenter" ...
[2018-12-13T19:53:23.921] [DEBUG] app - mongodb connStr:"mongodb://127.0.0.1:27017/usercenter"
[2018-12-13T19:53:23.931] [DEBUG] app - create redis instance for "redis_cache"
[2018-12-13T19:53:23.933] [DEBUG] app - initRedisSession
[2018-12-13T19:53:23.935] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/manage/cdkeyHandler.js"  ...
[2018-12-13T19:53:23.945] [DEBUG] app - register handler method: "importCdkey" on "/manage/cdkeyHandler/importCdkey"
[2018-12-13T19:53:23.946] [DEBUG] app - register handler method: "genQrCode" on "/manage/cdkeyHandler/genQrCode"
[2018-12-13T19:53:23.947] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/manage/login.js"  ...
[2018-12-13T19:53:23.947] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/manage/login.js" to "/manage/login"
[2018-12-13T19:53:23.948] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/post.js"  ...
[2018-12-13T19:53:23.948] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/post.js" to "/post"
[2018-12-13T19:53:23.949] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/qrcode.js"  ...
[2018-12-13T19:53:23.949] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/qrcode.js" to "/qrcode"
[2018-12-13T19:53:23.949] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/redis.js"  ...
[2018-12-13T19:53:23.950] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/redis.js" to "/redis"
[2018-12-13T19:53:23.951] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/root.js"  ...
[2018-12-13T19:53:23.951] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/root.js" to "/"
[2018-12-13T19:53:23.952] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/drawAward.js"  ...
[2018-12-13T19:53:23.952] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/drawAward.js" to "/wxWeb/api/drawAward"
[2018-12-13T19:53:23.953] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/exchangeShopHandler.js"  ...
[2018-12-13T19:53:23.954] [DEBUG] app - register handler method: "queryOnSaleItemCount" on "/wxWeb/api/exchangeShopHandler/queryOnSaleItemCount"
[2018-12-13T19:53:23.954] [DEBUG] app - register handler method: "queryOnSaleItems" on "/wxWeb/api/exchangeShopHandler/queryOnSaleItems"
[2018-12-13T19:53:23.954] [DEBUG] app - register handler method: "exchangeItem" on "/wxWeb/api/exchangeShopHandler/exchangeItem"
[2018-12-13T19:53:23.955] [DEBUG] app - register handler method: "sendMessage" on "/wxWeb/api/exchangeShopHandler/sendMessage"
[2018-12-13T19:53:23.955] [DEBUG] app - register handler method: "markMessageRead" on "/wxWeb/api/exchangeShopHandler/markMessageRead"
[2018-12-13T19:53:23.955] [DEBUG] app - register handler method: "deleteMessage" on "/wxWeb/api/exchangeShopHandler/deleteMessage"
[2018-12-13T19:53:23.956] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/messageHandler.js"  ...
[2018-12-13T19:53:23.957] [DEBUG] app - register handler method: "getMessagePageCount" on "/wxWeb/api/messageHandler/getMessagePageCount"
[2018-12-13T19:53:23.957] [DEBUG] app - register handler method: "getMessagePage" on "/wxWeb/api/messageHandler/getMessagePage"
[2018-12-13T19:53:23.958] [DEBUG] app - register handler method: "sendMessage" on "/wxWeb/api/messageHandler/sendMessage"
[2018-12-13T19:53:23.959] [DEBUG] app - register handler method: "markMessageRead" on "/wxWeb/api/messageHandler/markMessageRead"
[2018-12-13T19:53:23.959] [DEBUG] app - register handler method: "deleteMessage" on "/wxWeb/api/messageHandler/deleteMessage"
[2018-12-13T19:53:23.959] [DEBUG] app - register handler method: "hasUnreadMessage" on "/wxWeb/api/messageHandler/hasUnreadMessage"
[2018-12-13T19:53:23.959] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/queryCdkeyUsage.js"  ...
[2018-12-13T19:53:23.960] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/queryCdkeyUsage.js" to "/wxWeb/api/queryCdkeyUsage"
[2018-12-13T19:53:23.960] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/queryUserStatus.js"  ...
[2018-12-13T19:53:23.964] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/queryUserStatus.js" to "/wxWeb/api/queryUserStatus"
[2018-12-13T19:53:23.964] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/smsHandler.js"  ...
[2018-12-13T19:53:23.965] [DEBUG] app - register handler method: "registerPhone" on "/wxWeb/api/smsHandler/registerPhone"
[2018-12-13T19:53:23.965] [DEBUG] app - register handler method: "getSmsCode" on "/wxWeb/api/smsHandler/getSmsCode"
[2018-12-13T19:53:23.966] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/taskHandler.js"  ...
[2018-12-13T19:53:23.967] [DEBUG] app - register handler method: "queryTaskList" on "/wxWeb/api/taskHandler/queryTaskList"
[2018-12-13T19:53:23.967] [DEBUG] app - register handler method: "rewardTask" on "/wxWeb/api/taskHandler/rewardTask"
[2018-12-13T19:53:23.967] [DEBUG] app - register handler method: "queryTaskInfo" on "/wxWeb/api/taskHandler/queryTaskInfo"
[2018-12-13T19:53:23.968] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/userHandler.js"  ...
[2018-12-13T19:53:23.968] [DEBUG] app - register handler method: "queryUserInfo" on "/wxWeb/api/userHandler/queryUserInfo"
[2018-12-13T19:53:23.969] [DEBUG] app - register handler method: "updateUserInfo" on "/wxWeb/api/userHandler/updateUserInfo"
[2018-12-13T19:53:23.969] [DEBUG] app - register handler method: "isAddressComplete" on "/wxWeb/api/userHandler/isAddressComplete"
[2018-12-13T19:53:23.969] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/scanActivity.js"  ...
[2018-12-13T19:53:23.971] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/scanActivity.js" to "/wxWeb/scanActivity"
[2018-12-13T19:53:23.971] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/wxAccess.js"  ...
[2018-12-13T19:53:23.973] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/wxAccess.js" to "/wxWeb/wxAccess"
[2018-12-13T19:53:23.973] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/wxLogin.js"  ...
[2018-12-13T19:53:23.973] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/wxLogin.js" to "/wxWeb/wxLogin"
[2018-12-13T19:53:23.975] [DEBUG] app - load dbJsonImpl "D:\\workspace\\koa2/dbJson/scanActivity.json" ...
[2018-12-13T19:53:23.976] [DEBUG] app - load dbJsonImpl "D:\\workspace\\koa2/dbJson/taskInfo.json" ...
[2018-12-13T19:53:23.977] [DEBUG] app - DummyService.start
[2018-12-13T19:53:23.979] [DEBUG] app - start scan activity
[2018-12-13T19:53:24.051] [DEBUG] app - register event: "login"
[2018-12-13T19:53:24.052] [DEBUG] app - register event: "completePersonInfo"
[2018-12-13T19:53:24.053] [DEBUG] app - register event: "share"
[2018-12-13T19:53:24.054] [DEBUG] app - register event: "acquirePoints"
[2018-12-13T19:53:24.054] [DEBUG] app - register event: "read"
[2018-12-13T19:53:24.060] [DEBUG] app - UserService.start
[2018-12-13T19:53:24.061] [DEBUG] app - WechatService.start
[2018-12-13T19:53:24.062] [DEBUG] app - DummyService.afterStart
[2018-12-13T19:53:24.062] [DEBUG] app - UserService.afterStart
[2018-12-13T19:53:24.063] [DEBUG] app - WechatService.afterStart
[2018-12-13T19:53:24.064] [INFO] app - app start from dir: "D:\\workspace\\koa2"
[2018-12-13T19:53:24.081] [INFO] app - redis "redis_cache" ready.
[2018-12-13T19:53:24.100] [INFO] app - mongoose connect successfully.
[2018-12-13T19:53:24.128] [DEBUG] app - assignTask:{"n":1,"nModified":0,"opTime":{"ts":"6634444580655726593","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634444580655726593","$clusterTime":{"clusterTime":"6634444580655726593","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-13T19:53:24.134] [DEBUG] app - query task for "abcdef", ret:{"progress":0,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}
[2018-12-13T19:53:24.135] [DEBUG] app - queryTaskList: {"code":0,"taskList":[{"taskId":1,"desc":"【任务描述】每日完成3次登录. taskGoal [taskType,param] , 指定任务类型及目标。任务有顺序，每次只有一个当前任务，完成了当前任务才能开启后续任务","goalSort":1,"goal":3,"resetDaily":true,"award":[1000,100,1200,100]},{"taskId":2,"desc":"【任务描述】 完成个人信息填写","goalSort":2,"goal":1,"resetDaily":false,"award":[1000,1000,1200,100]},{"taskId":3,"desc":"【任务描述】每日分享一次","goalSort":3,"goal":1,"resetDaily":true,"award":[1001,2,1200,100]},{"taskId":4,"desc":"【任务描述】获得积分超过600","goalSort":4,"goal":600,"resetDaily":true,"award":[1001,2,1200,100]},{"taskId":5,"desc":"【任务描述】获得积分超过1000","goalSort":4,"goal":1000,"resetDaily":true,"taskAward":[1001,2,1200,100]}],"currentTask":{"progress":0,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}}
[2018-12-13T19:53:24.135] [DEBUG] app - user "abcdef" event "login" fired
[2018-12-13T19:53:24.137] [DEBUG] app - query task for "abcdef", ret:{"progress":0,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}
[2018-12-13T19:53:24.139] [DEBUG] app - user "abcdef" event "login" fired
[2018-12-13T19:53:24.140] [DEBUG] app - query task for "abcdef", ret:{"progress":0,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}
[2018-12-13T19:53:24.141] [INFO] app - complete task {"progress":0,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1} with event "login"
[2018-12-13T19:53:24.144] [DEBUG] app - completeTask: {"n":1,"nModified":1,"opTime":{"ts":"6634444589245661185","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634444589245661185","$clusterTime":{"clusterTime":"6634444589245661185","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-13T19:53:24.147] [DEBUG] app - user "abcdef" event "login" fired
[2018-12-13T19:53:24.148] [DEBUG] app - query task for "abcdef", ret:{"progress":0,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}
[2018-12-13T19:53:24.149] [INFO] app - complete task {"progress":0,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1} with event "login"
[2018-12-13T19:53:24.151] [DEBUG] app - try complete full task. {"n":0,"nModified":0,"opTime":{"ts":"6634444589245661185","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634444589245661185","$clusterTime":{"clusterTime":"6634444589245661185","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-13T19:53:24.153] [DEBUG] app - completeTask: {"n":1,"nModified":1,"opTime":{"ts":"6634444589245661186","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634444589245661186","$clusterTime":{"clusterTime":"6634444589245661186","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-13T19:53:24.155] [DEBUG] app - user "abcdef" event "login" fired
[2018-12-13T19:53:24.156] [DEBUG] app - query task for "abcdef", ret:{"progress":1,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}
[2018-12-13T19:53:24.156] [INFO] app - complete task {"progress":1,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1} with event "login"
[2018-12-13T19:53:24.158] [DEBUG] app - try complete full task. {"n":0,"nModified":0,"opTime":{"ts":"6634444589245661186","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634444589245661186","$clusterTime":{"clusterTime":"6634444589245661186","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-13T19:53:24.160] [DEBUG] app - completeTask: {"n":1,"nModified":1,"opTime":{"ts":"6634444589245661187","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634444589245661187","$clusterTime":{"clusterTime":"6634444589245661187","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-13T19:53:24.164] [DEBUG] app - query task for "abcdef", ret:{"progress":2,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}
[2018-12-13T19:53:24.165] [INFO] app - complete task {"progress":2,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1} with event "login"
[2018-12-13T19:53:24.168] [DEBUG] app - try complete full task. {"n":1,"nModified":1,"opTime":{"ts":"6634444589245661188","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634444589245661188","$clusterTime":{"clusterTime":"6634444589245661188","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-13T19:53:24.169] [DEBUG] app - completeTask: {"n":0,"nModified":0,"opTime":{"ts":"6634444589245661188","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634444589245661188","$clusterTime":{"clusterTime":"6634444589245661188","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-13T19:53:24.179] [DEBUG] app - before process "POST" on "/wxWeb/taskHandler/queryTaskList"  req:{"method":"POST","url":"/wxWeb/taskHandler/queryTaskList","header":{"host":"127.0.0.1:9900","accept-encoding":"gzip, deflate","user-agent":"node-superagent/3.8.3","connection":"close","content-length":"0"}}
[2018-12-13T19:53:24.180] [DEBUG] app - before check privillege
[2018-12-13T19:53:24.180] [DEBUG] app - uid is:""
[2018-12-13T19:53:24.181] [ERROR] app - user not login
[2018-12-13T19:53:24.181] [INFO] app - not login redirect to "/wxWeb/wxLogin?targetUrl=/wxWeb/taskHandler/queryTaskList"
[2018-12-13T19:53:24.182] [DEBUG] app - after process "POST" on "/wxWeb/taskHandler/queryTaskList" res:{"status":302,"message":"Found","header":{"location":"/wxWeb/wxLogin?targetUrl=/wxWeb/taskHandler/queryTaskList","content-type":"text/html; charset=utf-8","content-length":"145"}}


[2018-12-13T19:53:24.183] [DEBUG] app - redis session set "1544702004178-UOzF-wUVXO9VjelxOFtjZCdXNk33wL6X",{"uid":"","_expire":1544788404183,"_maxAge":86400000},86410000,{"changed":true}
[2018-12-13T19:53:25.074] [DEBUG] app - createMenu:{"errcode":0,"errmsg":"ok"}
[2018-12-13T19:55:04.467] [DEBUG] app - starting "koa2" ...
[2018-12-13T19:55:04.477] [INFO] app - init mongoose "127.0.0.1":27017/"usercenter" ...
[2018-12-13T19:55:04.477] [DEBUG] app - mongodb connStr:"mongodb://127.0.0.1:27017/usercenter"
[2018-12-13T19:55:04.486] [DEBUG] app - create redis instance for "redis_cache"
[2018-12-13T19:55:04.488] [DEBUG] app - initRedisSession
[2018-12-13T19:55:04.489] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/manage/cdkeyHandler.js"  ...
[2018-12-13T19:55:04.501] [DEBUG] app - register handler method: "importCdkey" on "/manage/cdkeyHandler/importCdkey"
[2018-12-13T19:55:04.503] [DEBUG] app - register handler method: "genQrCode" on "/manage/cdkeyHandler/genQrCode"
[2018-12-13T19:55:04.503] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/manage/login.js"  ...
[2018-12-13T19:55:04.504] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/manage/login.js" to "/manage/login"
[2018-12-13T19:55:04.504] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/post.js"  ...
[2018-12-13T19:55:04.505] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/post.js" to "/post"
[2018-12-13T19:55:04.506] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/qrcode.js"  ...
[2018-12-13T19:55:04.506] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/qrcode.js" to "/qrcode"
[2018-12-13T19:55:04.507] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/redis.js"  ...
[2018-12-13T19:55:04.507] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/redis.js" to "/redis"
[2018-12-13T19:55:04.508] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/root.js"  ...
[2018-12-13T19:55:04.508] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/root.js" to "/"
[2018-12-13T19:55:04.508] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/drawAward.js"  ...
[2018-12-13T19:55:04.509] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/drawAward.js" to "/wxWeb/api/drawAward"
[2018-12-13T19:55:04.509] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/exchangeShopHandler.js"  ...
[2018-12-13T19:55:04.510] [DEBUG] app - register handler method: "queryOnSaleItemCount" on "/wxWeb/api/exchangeShopHandler/queryOnSaleItemCount"
[2018-12-13T19:55:04.510] [DEBUG] app - register handler method: "queryOnSaleItems" on "/wxWeb/api/exchangeShopHandler/queryOnSaleItems"
[2018-12-13T19:55:04.511] [DEBUG] app - register handler method: "exchangeItem" on "/wxWeb/api/exchangeShopHandler/exchangeItem"
[2018-12-13T19:55:04.511] [DEBUG] app - register handler method: "sendMessage" on "/wxWeb/api/exchangeShopHandler/sendMessage"
[2018-12-13T19:55:04.517] [DEBUG] app - register handler method: "markMessageRead" on "/wxWeb/api/exchangeShopHandler/markMessageRead"
[2018-12-13T19:55:04.517] [DEBUG] app - register handler method: "deleteMessage" on "/wxWeb/api/exchangeShopHandler/deleteMessage"
[2018-12-13T19:55:04.518] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/messageHandler.js"  ...
[2018-12-13T19:55:04.519] [DEBUG] app - register handler method: "getMessagePageCount" on "/wxWeb/api/messageHandler/getMessagePageCount"
[2018-12-13T19:55:04.519] [DEBUG] app - register handler method: "getMessagePage" on "/wxWeb/api/messageHandler/getMessagePage"
[2018-12-13T19:55:04.519] [DEBUG] app - register handler method: "sendMessage" on "/wxWeb/api/messageHandler/sendMessage"
[2018-12-13T19:55:04.520] [DEBUG] app - register handler method: "markMessageRead" on "/wxWeb/api/messageHandler/markMessageRead"
[2018-12-13T19:55:04.520] [DEBUG] app - register handler method: "deleteMessage" on "/wxWeb/api/messageHandler/deleteMessage"
[2018-12-13T19:55:04.520] [DEBUG] app - register handler method: "hasUnreadMessage" on "/wxWeb/api/messageHandler/hasUnreadMessage"
[2018-12-13T19:55:04.520] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/queryCdkeyUsage.js"  ...
[2018-12-13T19:55:04.521] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/queryCdkeyUsage.js" to "/wxWeb/api/queryCdkeyUsage"
[2018-12-13T19:55:04.521] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/queryUserStatus.js"  ...
[2018-12-13T19:55:04.525] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/queryUserStatus.js" to "/wxWeb/api/queryUserStatus"
[2018-12-13T19:55:04.525] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/smsHandler.js"  ...
[2018-12-13T19:55:04.526] [DEBUG] app - register handler method: "registerPhone" on "/wxWeb/api/smsHandler/registerPhone"
[2018-12-13T19:55:04.527] [DEBUG] app - register handler method: "getSmsCode" on "/wxWeb/api/smsHandler/getSmsCode"
[2018-12-13T19:55:04.527] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/taskHandler.js"  ...
[2018-12-13T19:55:04.527] [DEBUG] app - register handler method: "queryTaskList" on "/wxWeb/api/taskHandler/queryTaskList"
[2018-12-13T19:55:04.528] [DEBUG] app - register handler method: "rewardTask" on "/wxWeb/api/taskHandler/rewardTask"
[2018-12-13T19:55:04.528] [DEBUG] app - register handler method: "queryTaskInfo" on "/wxWeb/api/taskHandler/queryTaskInfo"
[2018-12-13T19:55:04.528] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/userHandler.js"  ...
[2018-12-13T19:55:04.529] [DEBUG] app - register handler method: "queryUserInfo" on "/wxWeb/api/userHandler/queryUserInfo"
[2018-12-13T19:55:04.529] [DEBUG] app - register handler method: "updateUserInfo" on "/wxWeb/api/userHandler/updateUserInfo"
[2018-12-13T19:55:04.529] [DEBUG] app - register handler method: "isAddressComplete" on "/wxWeb/api/userHandler/isAddressComplete"
[2018-12-13T19:55:04.529] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/scanActivity.js"  ...
[2018-12-13T19:55:04.530] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/scanActivity.js" to "/wxWeb/scanActivity"
[2018-12-13T19:55:04.531] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/wxAccess.js"  ...
[2018-12-13T19:55:04.532] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/wxAccess.js" to "/wxWeb/wxAccess"
[2018-12-13T19:55:04.532] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/wxLogin.js"  ...
[2018-12-13T19:55:04.532] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/wxLogin.js" to "/wxWeb/wxLogin"
[2018-12-13T19:55:04.534] [DEBUG] app - load dbJsonImpl "D:\\workspace\\koa2/dbJson/scanActivity.json" ...
[2018-12-13T19:55:04.535] [DEBUG] app - load dbJsonImpl "D:\\workspace\\koa2/dbJson/taskInfo.json" ...
[2018-12-13T19:55:04.536] [DEBUG] app - DummyService.start
[2018-12-13T19:55:04.538] [DEBUG] app - start scan activity
[2018-12-13T19:55:04.611] [DEBUG] app - register event: "login"
[2018-12-13T19:55:04.611] [DEBUG] app - register event: "completePersonInfo"
[2018-12-13T19:55:04.611] [DEBUG] app - register event: "share"
[2018-12-13T19:55:04.612] [DEBUG] app - register event: "acquirePoints"
[2018-12-13T19:55:04.612] [DEBUG] app - register event: "read"
[2018-12-13T19:55:04.618] [DEBUG] app - UserService.start
[2018-12-13T19:55:04.619] [DEBUG] app - WechatService.start
[2018-12-13T19:55:04.619] [DEBUG] app - DummyService.afterStart
[2018-12-13T19:55:04.620] [DEBUG] app - UserService.afterStart
[2018-12-13T19:55:04.620] [DEBUG] app - WechatService.afterStart
[2018-12-13T19:55:04.620] [INFO] app - app start from dir: "D:\\workspace\\koa2"
[2018-12-13T19:55:04.638] [INFO] app - redis "redis_cache" ready.
[2018-12-13T19:55:04.657] [INFO] app - mongoose connect successfully.
[2018-12-13T19:55:04.690] [DEBUG] app - assignTask:{"n":1,"nModified":1,"opTime":{"ts":"6634445018742390785","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634445018742390785","$clusterTime":{"clusterTime":"6634445018742390785","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-13T19:55:04.704] [DEBUG] app - query task for "abcdef", ret:{"progress":0,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}
[2018-12-13T19:55:04.705] [DEBUG] app - queryTaskList: {"code":0,"taskList":[{"taskId":1,"desc":"【任务描述】每日完成3次登录. taskGoal [taskType,param] , 指定任务类型及目标。任务有顺序，每次只有一个当前任务，完成了当前任务才能开启后续任务","goalSort":1,"goal":3,"resetDaily":true,"award":[1000,100,1200,100]},{"taskId":2,"desc":"【任务描述】 完成个人信息填写","goalSort":2,"goal":1,"resetDaily":false,"award":[1000,1000,1200,100]},{"taskId":3,"desc":"【任务描述】每日分享一次","goalSort":3,"goal":1,"resetDaily":true,"award":[1001,2,1200,100]},{"taskId":4,"desc":"【任务描述】获得积分超过600","goalSort":4,"goal":600,"resetDaily":true,"award":[1001,2,1200,100]},{"taskId":5,"desc":"【任务描述】获得积分超过1000","goalSort":4,"goal":1000,"resetDaily":true,"taskAward":[1001,2,1200,100]}],"currentTask":{"progress":0,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}}
[2018-12-13T19:55:04.706] [DEBUG] app - user "abcdef" event "login" fired
[2018-12-13T19:55:04.710] [DEBUG] app - query task for "abcdef", ret:{"progress":0,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}
[2018-12-13T19:55:04.711] [DEBUG] app - query task for "abcdef", ret:{"progress":0,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}
[2018-12-13T19:55:04.711] [INFO] app - complete task {"progress":0,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1} with event "login"
[2018-12-13T19:55:04.713] [DEBUG] app - user "abcdef" event "login" fired
[2018-12-13T19:55:04.715] [DEBUG] app - completeTask: {"n":1,"nModified":1,"opTime":{"ts":"6634445018742390786","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634445018742390786","$clusterTime":{"clusterTime":"6634445018742390786","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-13T19:55:04.718] [DEBUG] app - user "abcdef" event "login" fired
[2018-12-13T19:55:04.719] [DEBUG] app - query task for "abcdef", ret:{"progress":1,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}
[2018-12-13T19:55:04.719] [INFO] app - complete task {"progress":1,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1} with event "login"
[2018-12-13T19:55:04.721] [DEBUG] app - try complete full task. {"n":0,"nModified":0,"opTime":{"ts":"6634445018742390786","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634445018742390786","$clusterTime":{"clusterTime":"6634445018742390786","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-13T19:55:04.722] [DEBUG] app - query task for "abcdef", ret:{"progress":1,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}
[2018-12-13T19:55:04.723] [DEBUG] app - completeTask: {"n":1,"nModified":1,"opTime":{"ts":"6634445018742390787","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634445018742390787","$clusterTime":{"clusterTime":"6634445018742390787","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-13T19:55:04.723] [INFO] app - complete task {"progress":1,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1} with event "login"
[2018-12-13T19:55:04.726] [DEBUG] app - user "abcdef" event "login" fired
[2018-12-13T19:55:04.728] [DEBUG] app - try complete full task. {"n":0,"nModified":0,"opTime":{"ts":"6634445018742390787","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634445018742390787","$clusterTime":{"clusterTime":"6634445018742390787","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-13T19:55:04.730] [DEBUG] app - completeTask: {"n":1,"nModified":1,"opTime":{"ts":"6634445018742390788","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634445018742390788","$clusterTime":{"clusterTime":"6634445018742390788","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-13T19:55:04.732] [DEBUG] app - query task for "abcdef", ret:{"progress":3,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}
[2018-12-13T19:55:04.733] [INFO] app - complete task {"progress":3,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1} with event "login"
[2018-12-13T19:55:04.735] [DEBUG] app - try complete full task. {"n":1,"nModified":1,"opTime":{"ts":"6634445018742390789","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634445018742390789","$clusterTime":{"clusterTime":"6634445018742390789","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-13T19:55:04.737] [DEBUG] app - completeTask: {"n":0,"nModified":0,"opTime":{"ts":"6634445018742390789","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634445018742390789","$clusterTime":{"clusterTime":"6634445018742390789","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-13T19:55:04.738] [DEBUG] app - query task for "abcdef", ret:{"progress":-2,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}
[2018-12-13T19:55:05.574] [DEBUG] app - createMenu:{"errcode":0,"errmsg":"ok"}
[2018-12-13T19:59:03.524] [DEBUG] app - starting "koa2" ...
[2018-12-13T19:59:03.533] [INFO] app - init mongoose "127.0.0.1":27017/"usercenter" ...
[2018-12-13T19:59:03.534] [DEBUG] app - mongodb connStr:"mongodb://127.0.0.1:27017/usercenter"
[2018-12-13T19:59:03.543] [DEBUG] app - create redis instance for "redis_cache"
[2018-12-13T19:59:03.545] [DEBUG] app - initRedisSession
[2018-12-13T19:59:03.546] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/manage/cdkeyHandler.js"  ...
[2018-12-13T19:59:03.558] [DEBUG] app - register handler method: "importCdkey" on "/manage/cdkeyHandler/importCdkey"
[2018-12-13T19:59:03.559] [DEBUG] app - register handler method: "genQrCode" on "/manage/cdkeyHandler/genQrCode"
[2018-12-13T19:59:03.559] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/manage/login.js"  ...
[2018-12-13T19:59:03.559] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/manage/login.js" to "/manage/login"
[2018-12-13T19:59:03.560] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/post.js"  ...
[2018-12-13T19:59:03.560] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/post.js" to "/post"
[2018-12-13T19:59:03.561] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/qrcode.js"  ...
[2018-12-13T19:59:03.561] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/qrcode.js" to "/qrcode"
[2018-12-13T19:59:03.561] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/redis.js"  ...
[2018-12-13T19:59:03.562] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/redis.js" to "/redis"
[2018-12-13T19:59:03.562] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/root.js"  ...
[2018-12-13T19:59:03.563] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/root.js" to "/"
[2018-12-13T19:59:03.563] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/drawAward.js"  ...
[2018-12-13T19:59:03.564] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/drawAward.js" to "/wxWeb/api/drawAward"
[2018-12-13T19:59:03.564] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/exchangeShopHandler.js"  ...
[2018-12-13T19:59:03.565] [DEBUG] app - register handler method: "queryOnSaleItemCount" on "/wxWeb/api/exchangeShopHandler/queryOnSaleItemCount"
[2018-12-13T19:59:03.565] [DEBUG] app - register handler method: "queryOnSaleItems" on "/wxWeb/api/exchangeShopHandler/queryOnSaleItems"
[2018-12-13T19:59:03.566] [DEBUG] app - register handler method: "exchangeItem" on "/wxWeb/api/exchangeShopHandler/exchangeItem"
[2018-12-13T19:59:03.566] [DEBUG] app - register handler method: "sendMessage" on "/wxWeb/api/exchangeShopHandler/sendMessage"
[2018-12-13T19:59:03.566] [DEBUG] app - register handler method: "markMessageRead" on "/wxWeb/api/exchangeShopHandler/markMessageRead"
[2018-12-13T19:59:03.566] [DEBUG] app - register handler method: "deleteMessage" on "/wxWeb/api/exchangeShopHandler/deleteMessage"
[2018-12-13T19:59:03.566] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/messageHandler.js"  ...
[2018-12-13T19:59:03.567] [DEBUG] app - register handler method: "getMessagePageCount" on "/wxWeb/api/messageHandler/getMessagePageCount"
[2018-12-13T19:59:03.567] [DEBUG] app - register handler method: "getMessagePage" on "/wxWeb/api/messageHandler/getMessagePage"
[2018-12-13T19:59:03.568] [DEBUG] app - register handler method: "sendMessage" on "/wxWeb/api/messageHandler/sendMessage"
[2018-12-13T19:59:03.568] [DEBUG] app - register handler method: "markMessageRead" on "/wxWeb/api/messageHandler/markMessageRead"
[2018-12-13T19:59:03.568] [DEBUG] app - register handler method: "deleteMessage" on "/wxWeb/api/messageHandler/deleteMessage"
[2018-12-13T19:59:03.568] [DEBUG] app - register handler method: "hasUnreadMessage" on "/wxWeb/api/messageHandler/hasUnreadMessage"
[2018-12-13T19:59:03.568] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/queryCdkeyUsage.js"  ...
[2018-12-13T19:59:03.570] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/queryCdkeyUsage.js" to "/wxWeb/api/queryCdkeyUsage"
[2018-12-13T19:59:03.570] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/queryUserStatus.js"  ...
[2018-12-13T19:59:03.574] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/queryUserStatus.js" to "/wxWeb/api/queryUserStatus"
[2018-12-13T19:59:03.574] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/smsHandler.js"  ...
[2018-12-13T19:59:03.575] [DEBUG] app - register handler method: "registerPhone" on "/wxWeb/api/smsHandler/registerPhone"
[2018-12-13T19:59:03.575] [DEBUG] app - register handler method: "getSmsCode" on "/wxWeb/api/smsHandler/getSmsCode"
[2018-12-13T19:59:03.576] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/taskHandler.js"  ...
[2018-12-13T19:59:03.576] [DEBUG] app - register handler method: "queryTaskList" on "/wxWeb/api/taskHandler/queryTaskList"
[2018-12-13T19:59:03.577] [DEBUG] app - register handler method: "rewardTask" on "/wxWeb/api/taskHandler/rewardTask"
[2018-12-13T19:59:03.577] [DEBUG] app - register handler method: "queryTaskInfo" on "/wxWeb/api/taskHandler/queryTaskInfo"
[2018-12-13T19:59:03.584] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/userHandler.js"  ...
[2018-12-13T19:59:03.584] [DEBUG] app - register handler method: "queryUserInfo" on "/wxWeb/api/userHandler/queryUserInfo"
[2018-12-13T19:59:03.585] [DEBUG] app - register handler method: "updateUserInfo" on "/wxWeb/api/userHandler/updateUserInfo"
[2018-12-13T19:59:03.586] [DEBUG] app - register handler method: "isAddressComplete" on "/wxWeb/api/userHandler/isAddressComplete"
[2018-12-13T19:59:03.586] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/scanActivity.js"  ...
[2018-12-13T19:59:03.587] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/scanActivity.js" to "/wxWeb/scanActivity"
[2018-12-13T19:59:03.587] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/wxAccess.js"  ...
[2018-12-13T19:59:03.588] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/wxAccess.js" to "/wxWeb/wxAccess"
[2018-12-13T19:59:03.589] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/wxLogin.js"  ...
[2018-12-13T19:59:03.589] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/wxLogin.js" to "/wxWeb/wxLogin"
[2018-12-13T19:59:03.591] [DEBUG] app - load dbJsonImpl "D:\\workspace\\koa2/dbJson/scanActivity.json" ...
[2018-12-13T19:59:03.592] [DEBUG] app - load dbJsonImpl "D:\\workspace\\koa2/dbJson/taskInfo.json" ...
[2018-12-13T19:59:03.593] [DEBUG] app - DummyService.start
[2018-12-13T19:59:03.595] [DEBUG] app - start scan activity
[2018-12-13T19:59:03.670] [DEBUG] app - register event: "login"
[2018-12-13T19:59:03.670] [DEBUG] app - register event: "completePersonInfo"
[2018-12-13T19:59:03.670] [DEBUG] app - register event: "share"
[2018-12-13T19:59:03.671] [DEBUG] app - register event: "acquirePoints"
[2018-12-13T19:59:03.671] [DEBUG] app - register event: "read"
[2018-12-13T19:59:03.677] [DEBUG] app - UserService.start
[2018-12-13T19:59:03.678] [DEBUG] app - WechatService.start
[2018-12-13T19:59:03.678] [DEBUG] app - DummyService.afterStart
[2018-12-13T19:59:03.678] [DEBUG] app - UserService.afterStart
[2018-12-13T19:59:03.679] [DEBUG] app - WechatService.afterStart
[2018-12-13T19:59:03.679] [INFO] app - app start from dir: "D:\\workspace\\koa2"
[2018-12-13T19:59:03.711] [INFO] app - redis "redis_cache" ready.
[2018-12-13T19:59:03.711] [INFO] app - mongoose connect successfully.
[2018-12-13T19:59:03.742] [DEBUG] app - assignTask:{"n":1,"nModified":1,"opTime":{"ts":"6634446045239574529","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634446045239574529","$clusterTime":{"clusterTime":"6634446045239574529","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-13T19:59:03.747] [DEBUG] app - query task for "abcdef", ret:{"progress":0,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}
[2018-12-13T19:59:03.748] [DEBUG] app - queryTaskList: {"code":0,"taskList":[{"taskId":1,"desc":"【任务描述】每日完成3次登录. taskGoal [taskType,param] , 指定任务类型及目标。任务有顺序，每次只有一个当前任务，完成了当前任务才能开启后续任务","goalSort":1,"goal":3,"resetDaily":true,"award":[1000,100,1200,100]},{"taskId":2,"desc":"【任务描述】 完成个人信息填写","goalSort":2,"goal":1,"resetDaily":false,"award":[1000,1000,1200,100]},{"taskId":3,"desc":"【任务描述】每日分享一次","goalSort":3,"goal":1,"resetDaily":true,"award":[1001,2,1200,100]},{"taskId":4,"desc":"【任务描述】获得积分超过600","goalSort":4,"goal":600,"resetDaily":true,"award":[1001,2,1200,100]},{"taskId":5,"desc":"【任务描述】获得积分超过1000","goalSort":4,"goal":1000,"resetDaily":true,"taskAward":[1001,2,1200,100]}],"currentTask":{"progress":0,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}}
[2018-12-13T19:59:03.750] [DEBUG] app - user "abcdef" event "login" fired
[2018-12-13T19:59:03.751] [DEBUG] app - query task for "abcdef", ret:{"progress":0,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}
[2018-12-13T19:59:03.754] [DEBUG] app - user "abcdef" event "login" fired
[2018-12-13T19:59:03.755] [DEBUG] app - query task for "abcdef", ret:{"progress":0,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}
[2018-12-13T19:59:03.755] [INFO] app - complete task {"progress":0,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1} with event "login"
[2018-12-13T19:59:03.766] [DEBUG] app - completeTask: {"n":1,"nModified":1,"opTime":{"ts":"6634446045239574530","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634446045239574530","$clusterTime":{"clusterTime":"6634446045239574530","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-13T19:59:03.768] [DEBUG] app - user "abcdef" event "login" fired
[2018-12-13T19:59:03.769] [DEBUG] app - query task for "abcdef", ret:{"progress":0,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}
[2018-12-13T19:59:03.769] [INFO] app - complete task {"progress":0,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1} with event "login"
[2018-12-13T19:59:03.771] [DEBUG] app - try complete full task. {"n":0,"nModified":0,"opTime":{"ts":"6634446045239574530","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634446045239574530","$clusterTime":{"clusterTime":"6634446045239574530","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-13T19:59:03.774] [DEBUG] app - completeTask: {"n":1,"nModified":1,"opTime":{"ts":"6634446045239574531","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634446045239574531","$clusterTime":{"clusterTime":"6634446045239574531","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-13T19:59:03.777] [DEBUG] app - user "abcdef" event "login" fired
[2018-12-13T19:59:03.777] [DEBUG] app - query task for "abcdef", ret:{"progress":1,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}
[2018-12-13T19:59:03.777] [INFO] app - complete task {"progress":1,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1} with event "login"
[2018-12-13T19:59:03.779] [DEBUG] app - try complete full task. {"n":0,"nModified":0,"opTime":{"ts":"6634446045239574531","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634446045239574531","$clusterTime":{"clusterTime":"6634446045239574531","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-13T19:59:03.780] [DEBUG] app - query task for "abcdef", ret:{"progress":2,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}
[2018-12-13T19:59:03.781] [DEBUG] app - completeTask: {"n":1,"nModified":1,"opTime":{"ts":"6634446045239574532","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634446045239574532","$clusterTime":{"clusterTime":"6634446045239574532","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-13T19:59:03.781] [INFO] app - complete task {"progress":2,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1} with event "login"
[2018-12-13T19:59:03.786] [DEBUG] app - completeTask: {"n":1,"nModified":1,"opTime":{"ts":"6634446045239574533","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634446045239574533","$clusterTime":{"clusterTime":"6634446045239574533","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-13T19:59:03.798] [DEBUG] app - query task for "abcdef", ret:{"progress":4,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}
[2018-12-13T19:59:03.798] [DEBUG] app - try complete full task. {"n":1,"nModified":1,"opTime":{"ts":"6634446045239574534","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634446045239574534","$clusterTime":{"clusterTime":"6634446045239574534","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-13T19:59:03.905] [DEBUG] app - try complete full task. {"n":0,"nModified":0,"opTime":{"ts":"6634446045239574534","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634446045239574534","$clusterTime":{"clusterTime":"6634446045239574534","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-13T19:59:04.681] [DEBUG] app - createMenu:{"errcode":0,"errmsg":"ok"}
[2018-12-13T20:01:28.497] [DEBUG] app - starting "koa2" ...
[2018-12-13T20:01:28.507] [INFO] app - init mongoose "127.0.0.1":27017/"usercenter" ...
[2018-12-13T20:01:28.507] [DEBUG] app - mongodb connStr:"mongodb://127.0.0.1:27017/usercenter"
[2018-12-13T20:01:28.516] [DEBUG] app - create redis instance for "redis_cache"
[2018-12-13T20:01:28.518] [DEBUG] app - initRedisSession
[2018-12-13T20:01:28.519] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/manage/cdkeyHandler.js"  ...
[2018-12-13T20:01:28.530] [DEBUG] app - register handler method: "importCdkey" on "/manage/cdkeyHandler/importCdkey"
[2018-12-13T20:01:28.531] [DEBUG] app - register handler method: "genQrCode" on "/manage/cdkeyHandler/genQrCode"
[2018-12-13T20:01:28.531] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/manage/login.js"  ...
[2018-12-13T20:01:28.532] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/manage/login.js" to "/manage/login"
[2018-12-13T20:01:28.532] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/post.js"  ...
[2018-12-13T20:01:28.532] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/post.js" to "/post"
[2018-12-13T20:01:28.533] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/qrcode.js"  ...
[2018-12-13T20:01:28.533] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/qrcode.js" to "/qrcode"
[2018-12-13T20:01:28.533] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/redis.js"  ...
[2018-12-13T20:01:28.534] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/redis.js" to "/redis"
[2018-12-13T20:01:28.534] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/root.js"  ...
[2018-12-13T20:01:28.535] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/root.js" to "/"
[2018-12-13T20:01:28.535] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/drawAward.js"  ...
[2018-12-13T20:01:28.536] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/drawAward.js" to "/wxWeb/api/drawAward"
[2018-12-13T20:01:28.536] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/exchangeShopHandler.js"  ...
[2018-12-13T20:01:28.537] [DEBUG] app - register handler method: "queryOnSaleItemCount" on "/wxWeb/api/exchangeShopHandler/queryOnSaleItemCount"
[2018-12-13T20:01:28.537] [DEBUG] app - register handler method: "queryOnSaleItems" on "/wxWeb/api/exchangeShopHandler/queryOnSaleItems"
[2018-12-13T20:01:28.537] [DEBUG] app - register handler method: "exchangeItem" on "/wxWeb/api/exchangeShopHandler/exchangeItem"
[2018-12-13T20:01:28.537] [DEBUG] app - register handler method: "sendMessage" on "/wxWeb/api/exchangeShopHandler/sendMessage"
[2018-12-13T20:01:28.537] [DEBUG] app - register handler method: "markMessageRead" on "/wxWeb/api/exchangeShopHandler/markMessageRead"
[2018-12-13T20:01:28.538] [DEBUG] app - register handler method: "deleteMessage" on "/wxWeb/api/exchangeShopHandler/deleteMessage"
[2018-12-13T20:01:28.538] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/messageHandler.js"  ...
[2018-12-13T20:01:28.538] [DEBUG] app - register handler method: "getMessagePageCount" on "/wxWeb/api/messageHandler/getMessagePageCount"
[2018-12-13T20:01:28.539] [DEBUG] app - register handler method: "getMessagePage" on "/wxWeb/api/messageHandler/getMessagePage"
[2018-12-13T20:01:28.539] [DEBUG] app - register handler method: "sendMessage" on "/wxWeb/api/messageHandler/sendMessage"
[2018-12-13T20:01:28.539] [DEBUG] app - register handler method: "markMessageRead" on "/wxWeb/api/messageHandler/markMessageRead"
[2018-12-13T20:01:28.539] [DEBUG] app - register handler method: "deleteMessage" on "/wxWeb/api/messageHandler/deleteMessage"
[2018-12-13T20:01:28.539] [DEBUG] app - register handler method: "hasUnreadMessage" on "/wxWeb/api/messageHandler/hasUnreadMessage"
[2018-12-13T20:01:28.539] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/queryCdkeyUsage.js"  ...
[2018-12-13T20:01:28.540] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/queryCdkeyUsage.js" to "/wxWeb/api/queryCdkeyUsage"
[2018-12-13T20:01:28.541] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/queryUserStatus.js"  ...
[2018-12-13T20:01:28.546] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/queryUserStatus.js" to "/wxWeb/api/queryUserStatus"
[2018-12-13T20:01:28.546] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/smsHandler.js"  ...
[2018-12-13T20:01:28.546] [DEBUG] app - register handler method: "registerPhone" on "/wxWeb/api/smsHandler/registerPhone"
[2018-12-13T20:01:28.546] [DEBUG] app - register handler method: "getSmsCode" on "/wxWeb/api/smsHandler/getSmsCode"
[2018-12-13T20:01:28.547] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/taskHandler.js"  ...
[2018-12-13T20:01:28.547] [DEBUG] app - register handler method: "queryTaskList" on "/wxWeb/api/taskHandler/queryTaskList"
[2018-12-13T20:01:28.547] [DEBUG] app - register handler method: "rewardTask" on "/wxWeb/api/taskHandler/rewardTask"
[2018-12-13T20:01:28.548] [DEBUG] app - register handler method: "queryTaskInfo" on "/wxWeb/api/taskHandler/queryTaskInfo"
[2018-12-13T20:01:28.548] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/userHandler.js"  ...
[2018-12-13T20:01:28.548] [DEBUG] app - register handler method: "queryUserInfo" on "/wxWeb/api/userHandler/queryUserInfo"
[2018-12-13T20:01:28.548] [DEBUG] app - register handler method: "updateUserInfo" on "/wxWeb/api/userHandler/updateUserInfo"
[2018-12-13T20:01:28.549] [DEBUG] app - register handler method: "isAddressComplete" on "/wxWeb/api/userHandler/isAddressComplete"
[2018-12-13T20:01:28.549] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/scanActivity.js"  ...
[2018-12-13T20:01:28.550] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/scanActivity.js" to "/wxWeb/scanActivity"
[2018-12-13T20:01:28.550] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/wxAccess.js"  ...
[2018-12-13T20:01:28.551] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/wxAccess.js" to "/wxWeb/wxAccess"
[2018-12-13T20:01:28.551] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/wxLogin.js"  ...
[2018-12-13T20:01:28.551] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/wxLogin.js" to "/wxWeb/wxLogin"
[2018-12-13T20:01:28.553] [DEBUG] app - load dbJsonImpl "D:\\workspace\\koa2/dbJson/scanActivity.json" ...
[2018-12-13T20:01:28.555] [DEBUG] app - load dbJsonImpl "D:\\workspace\\koa2/dbJson/taskInfo.json" ...
[2018-12-13T20:01:28.556] [DEBUG] app - DummyService.start
[2018-12-13T20:01:28.565] [DEBUG] app - start scan activity
[2018-12-13T20:01:28.642] [DEBUG] app - register event: "login"
[2018-12-13T20:01:28.642] [DEBUG] app - register event: "completePersonInfo"
[2018-12-13T20:01:28.642] [DEBUG] app - register event: "share"
[2018-12-13T20:01:28.643] [DEBUG] app - register event: "acquirePoints"
[2018-12-13T20:01:28.643] [DEBUG] app - register event: "read"
[2018-12-13T20:01:28.649] [DEBUG] app - UserService.start
[2018-12-13T20:01:28.650] [DEBUG] app - WechatService.start
[2018-12-13T20:01:28.650] [DEBUG] app - DummyService.afterStart
[2018-12-13T20:01:28.650] [DEBUG] app - UserService.afterStart
[2018-12-13T20:01:28.651] [DEBUG] app - WechatService.afterStart
[2018-12-13T20:01:28.651] [INFO] app - app start from dir: "D:\\workspace\\koa2"
[2018-12-13T20:01:28.666] [INFO] app - redis "redis_cache" ready.
[2018-12-13T20:01:28.691] [INFO] app - mongoose connect successfully.
[2018-12-13T20:01:28.718] [DEBUG] app - assignTask:{"n":1,"nModified":1,"opTime":{"ts":"6634446668009832449","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634446668009832449","$clusterTime":{"clusterTime":"6634446668009832449","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-13T20:01:28.722] [DEBUG] app - query task for "abcdef", ret:{"progress":0,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}
[2018-12-13T20:01:28.723] [DEBUG] app - queryTaskList: {"code":0,"taskList":[{"taskId":1,"desc":"【任务描述】每日完成3次登录. taskGoal [taskType,param] , 指定任务类型及目标。任务有顺序，每次只有一个当前任务，完成了当前任务才能开启后续任务","goalSort":1,"goal":3,"resetDaily":true,"award":[1000,100,1200,100]},{"taskId":2,"desc":"【任务描述】 完成个人信息填写","goalSort":2,"goal":1,"resetDaily":false,"award":[1000,1000,1200,100]},{"taskId":3,"desc":"【任务描述】每日分享一次","goalSort":3,"goal":1,"resetDaily":true,"award":[1001,2,1200,100]},{"taskId":4,"desc":"【任务描述】获得积分超过600","goalSort":4,"goal":600,"resetDaily":true,"award":[1001,2,1200,100]},{"taskId":5,"desc":"【任务描述】获得积分超过1000","goalSort":4,"goal":1000,"resetDaily":true,"taskAward":[1001,2,1200,100]}],"currentTask":{"progress":0,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}}
[2018-12-13T20:01:28.725] [DEBUG] app - user "abcdef" event "login" fired
[2018-12-13T20:01:28.728] [DEBUG] app - query task for "abcdef", ret:{"progress":0,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}
[2018-12-13T20:01:28.729] [DEBUG] app - user "abcdef" event "login" fired
[2018-12-13T20:01:28.730] [DEBUG] app - query task for "abcdef", ret:{"progress":0,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}
[2018-12-13T20:01:28.730] [INFO] app - complete task {"progress":0,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1} with event "login"
[2018-12-13T20:01:28.734] [DEBUG] app - completeTask: {"n":1,"nModified":1,"opTime":{"ts":"6634446668009832450","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634446668009832450","$clusterTime":{"clusterTime":"6634446668009832450","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-13T20:01:28.737] [DEBUG] app - user "abcdef" event "login" fired
[2018-12-13T20:01:28.738] [DEBUG] app - query task for "abcdef", ret:{"progress":0,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}
[2018-12-13T20:01:28.738] [INFO] app - complete task {"progress":0,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1} with event "login"
[2018-12-13T20:01:28.740] [DEBUG] app - try complete full task. {"n":0,"nModified":0,"opTime":{"ts":"6634446668009832450","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634446668009832450","$clusterTime":{"clusterTime":"6634446668009832450","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-13T20:01:28.741] [DEBUG] app - completeTask: {"n":1,"nModified":1,"opTime":{"ts":"6634446668009832451","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634446668009832451","$clusterTime":{"clusterTime":"6634446668009832451","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-13T20:01:28.743] [DEBUG] app - user "abcdef" event "login" fired
[2018-12-13T20:01:28.744] [DEBUG] app - query task for "abcdef", ret:{"progress":1,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}
[2018-12-13T20:01:28.744] [INFO] app - complete task {"progress":1,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1} with event "login"
[2018-12-13T20:01:28.746] [DEBUG] app - try complete full task. {"n":0,"nModified":0,"opTime":{"ts":"6634446668009832451","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634446668009832451","$clusterTime":{"clusterTime":"6634446668009832451","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-13T20:01:28.747] [DEBUG] app - completeTask: {"n":1,"nModified":1,"opTime":{"ts":"6634446668009832452","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634446668009832452","$clusterTime":{"clusterTime":"6634446668009832452","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-13T20:01:28.758] [DEBUG] app - query task for "abcdef", ret:{"progress":2,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}
[2018-12-13T20:01:28.758] [INFO] app - complete task {"progress":2,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1} with event "login"
[2018-12-13T20:01:28.760] [DEBUG] app - try complete full task. {"n":1,"nModified":1,"opTime":{"ts":"6634446668009832453","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634446668009832453","$clusterTime":{"clusterTime":"6634446668009832453","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-13T20:01:28.762] [DEBUG] app - completeTask: {"n":0,"nModified":0,"opTime":{"ts":"6634446668009832453","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634446668009832453","$clusterTime":{"clusterTime":"6634446668009832453","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-13T20:01:28.764] [DEBUG] app - query task for "abcdef", ret:{"progress":-2,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}
[2018-12-13T20:01:28.767] [DEBUG] app - awardItems:[{"itemId":"0","amount":1},{"itemId":"2","amount":3}]
[2018-12-13T20:01:28.823] [DEBUG] app - awardItems insert return:[{"amount":1,"acquireTime":1544702488767,"expireTime":9007199254740991,"_id":"5c124a18fbb09505b0241f4f","openId":"abcdef","itemId":"0","__v":0},{"amount":3,"acquireTime":1544702488767,"expireTime":9007199254740991,"_id":"5c124a18fbb09505b0241f50","openId":"abcdef","itemId":"2","__v":0}]
[2018-12-13T20:01:28.825] [DEBUG] app - assignTask:{"n":1,"nModified":1,"opTime":{"ts":"6634446668009832457","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634446668009832457","$clusterTime":{"clusterTime":"6634446668009832457","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-13T20:01:29.367] [DEBUG] app - createMenu:{"errcode":0,"errmsg":"ok"}
[2018-12-13T20:03:23.887] [DEBUG] app - starting "koa2" ...
[2018-12-13T20:03:23.898] [INFO] app - init mongoose "127.0.0.1":27017/"usercenter" ...
[2018-12-13T20:03:23.898] [DEBUG] app - mongodb connStr:"mongodb://127.0.0.1:27017/usercenter"
[2018-12-13T20:03:23.907] [DEBUG] app - create redis instance for "redis_cache"
[2018-12-13T20:03:23.909] [DEBUG] app - initRedisSession
[2018-12-13T20:03:23.910] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/manage/cdkeyHandler.js"  ...
[2018-12-13T20:03:23.920] [DEBUG] app - register handler method: "importCdkey" on "/manage/cdkeyHandler/importCdkey"
[2018-12-13T20:03:23.921] [DEBUG] app - register handler method: "genQrCode" on "/manage/cdkeyHandler/genQrCode"
[2018-12-13T20:03:23.921] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/manage/login.js"  ...
[2018-12-13T20:03:23.922] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/manage/login.js" to "/manage/login"
[2018-12-13T20:03:23.922] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/post.js"  ...
[2018-12-13T20:03:23.922] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/post.js" to "/post"
[2018-12-13T20:03:23.923] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/qrcode.js"  ...
[2018-12-13T20:03:23.923] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/qrcode.js" to "/qrcode"
[2018-12-13T20:03:23.923] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/redis.js"  ...
[2018-12-13T20:03:23.924] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/redis.js" to "/redis"
[2018-12-13T20:03:23.924] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/root.js"  ...
[2018-12-13T20:03:23.925] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/root.js" to "/"
[2018-12-13T20:03:23.925] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/drawAward.js"  ...
[2018-12-13T20:03:23.926] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/drawAward.js" to "/wxWeb/api/drawAward"
[2018-12-13T20:03:23.926] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/exchangeShopHandler.js"  ...
[2018-12-13T20:03:23.927] [DEBUG] app - register handler method: "queryOnSaleItemCount" on "/wxWeb/api/exchangeShopHandler/queryOnSaleItemCount"
[2018-12-13T20:03:23.927] [DEBUG] app - register handler method: "queryOnSaleItems" on "/wxWeb/api/exchangeShopHandler/queryOnSaleItems"
[2018-12-13T20:03:23.927] [DEBUG] app - register handler method: "exchangeItem" on "/wxWeb/api/exchangeShopHandler/exchangeItem"
[2018-12-13T20:03:23.927] [DEBUG] app - register handler method: "sendMessage" on "/wxWeb/api/exchangeShopHandler/sendMessage"
[2018-12-13T20:03:23.927] [DEBUG] app - register handler method: "markMessageRead" on "/wxWeb/api/exchangeShopHandler/markMessageRead"
[2018-12-13T20:03:23.927] [DEBUG] app - register handler method: "deleteMessage" on "/wxWeb/api/exchangeShopHandler/deleteMessage"
[2018-12-13T20:03:23.928] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/messageHandler.js"  ...
[2018-12-13T20:03:23.928] [DEBUG] app - register handler method: "getMessagePageCount" on "/wxWeb/api/messageHandler/getMessagePageCount"
[2018-12-13T20:03:23.928] [DEBUG] app - register handler method: "getMessagePage" on "/wxWeb/api/messageHandler/getMessagePage"
[2018-12-13T20:03:23.929] [DEBUG] app - register handler method: "sendMessage" on "/wxWeb/api/messageHandler/sendMessage"
[2018-12-13T20:03:23.929] [DEBUG] app - register handler method: "markMessageRead" on "/wxWeb/api/messageHandler/markMessageRead"
[2018-12-13T20:03:23.929] [DEBUG] app - register handler method: "deleteMessage" on "/wxWeb/api/messageHandler/deleteMessage"
[2018-12-13T20:03:23.929] [DEBUG] app - register handler method: "hasUnreadMessage" on "/wxWeb/api/messageHandler/hasUnreadMessage"
[2018-12-13T20:03:23.929] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/queryCdkeyUsage.js"  ...
[2018-12-13T20:03:23.930] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/queryCdkeyUsage.js" to "/wxWeb/api/queryCdkeyUsage"
[2018-12-13T20:03:23.938] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/queryUserStatus.js"  ...
[2018-12-13T20:03:23.943] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/queryUserStatus.js" to "/wxWeb/api/queryUserStatus"
[2018-12-13T20:03:23.944] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/smsHandler.js"  ...
[2018-12-13T20:03:23.944] [DEBUG] app - register handler method: "registerPhone" on "/wxWeb/api/smsHandler/registerPhone"
[2018-12-13T20:03:23.944] [DEBUG] app - register handler method: "getSmsCode" on "/wxWeb/api/smsHandler/getSmsCode"
[2018-12-13T20:03:23.945] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/taskHandler.js"  ...
[2018-12-13T20:03:23.945] [DEBUG] app - register handler method: "queryTaskList" on "/wxWeb/api/taskHandler/queryTaskList"
[2018-12-13T20:03:23.945] [DEBUG] app - register handler method: "rewardTask" on "/wxWeb/api/taskHandler/rewardTask"
[2018-12-13T20:03:23.946] [DEBUG] app - register handler method: "queryTaskInfo" on "/wxWeb/api/taskHandler/queryTaskInfo"
[2018-12-13T20:03:23.946] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/userHandler.js"  ...
[2018-12-13T20:03:23.946] [DEBUG] app - register handler method: "queryUserInfo" on "/wxWeb/api/userHandler/queryUserInfo"
[2018-12-13T20:03:23.947] [DEBUG] app - register handler method: "updateUserInfo" on "/wxWeb/api/userHandler/updateUserInfo"
[2018-12-13T20:03:23.947] [DEBUG] app - register handler method: "isAddressComplete" on "/wxWeb/api/userHandler/isAddressComplete"
[2018-12-13T20:03:23.947] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/scanActivity.js"  ...
[2018-12-13T20:03:23.948] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/scanActivity.js" to "/wxWeb/scanActivity"
[2018-12-13T20:03:23.948] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/wxAccess.js"  ...
[2018-12-13T20:03:23.949] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/wxAccess.js" to "/wxWeb/wxAccess"
[2018-12-13T20:03:23.949] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/wxLogin.js"  ...
[2018-12-13T20:03:23.950] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/wxLogin.js" to "/wxWeb/wxLogin"
[2018-12-13T20:03:23.951] [DEBUG] app - load dbJsonImpl "D:\\workspace\\koa2/dbJson/scanActivity.json" ...
[2018-12-13T20:03:23.953] [DEBUG] app - load dbJsonImpl "D:\\workspace\\koa2/dbJson/taskInfo.json" ...
[2018-12-13T20:03:23.954] [DEBUG] app - DummyService.start
[2018-12-13T20:03:23.956] [DEBUG] app - start scan activity
[2018-12-13T20:03:24.032] [DEBUG] app - register event: "login"
[2018-12-13T20:03:24.032] [DEBUG] app - register event: "completePersonInfo"
[2018-12-13T20:03:24.032] [DEBUG] app - register event: "share"
[2018-12-13T20:03:24.032] [DEBUG] app - register event: "acquirePoints"
[2018-12-13T20:03:24.032] [DEBUG] app - register event: "read"
[2018-12-13T20:03:24.038] [DEBUG] app - UserService.start
[2018-12-13T20:03:24.040] [DEBUG] app - WechatService.start
[2018-12-13T20:03:24.040] [DEBUG] app - DummyService.afterStart
[2018-12-13T20:03:24.040] [DEBUG] app - UserService.afterStart
[2018-12-13T20:03:24.040] [DEBUG] app - WechatService.afterStart
[2018-12-13T20:03:24.041] [INFO] app - app start from dir: "D:\\workspace\\koa2"
[2018-12-13T20:03:24.057] [INFO] app - redis "redis_cache" ready.
[2018-12-13T20:03:24.075] [INFO] app - mongoose connect successfully.
[2018-12-13T20:03:24.105] [DEBUG] app - assignTask:{"n":1,"nModified":1,"opTime":{"ts":"6634447166226038785","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634447166226038785","$clusterTime":{"clusterTime":"6634447166226038785","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-13T20:03:24.108] [DEBUG] app - query task for "abcdef", ret:{"progress":0,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}
[2018-12-13T20:03:24.109] [DEBUG] app - queryTaskList: {"code":0,"taskList":[{"taskId":1,"desc":"【任务描述】每日完成3次登录. taskGoal [taskType,param] , 指定任务类型及目标。任务有顺序，每次只有一个当前任务，完成了当前任务才能开启后续任务","goalSort":1,"goal":3,"resetDaily":true,"award":[1000,100,1200,100]},{"taskId":2,"desc":"【任务描述】 完成个人信息填写","goalSort":2,"goal":1,"resetDaily":false,"award":[1000,1000,1200,100]},{"taskId":3,"desc":"【任务描述】每日分享一次","goalSort":3,"goal":1,"resetDaily":true,"award":[1001,2,1200,100]},{"taskId":4,"desc":"【任务描述】获得积分超过600","goalSort":4,"goal":600,"resetDaily":true,"award":[1001,2,1200,100]},{"taskId":5,"desc":"【任务描述】获得积分超过1000","goalSort":4,"goal":1000,"resetDaily":true,"taskAward":[1001,2,1200,100]}],"currentTask":{"progress":0,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}}
[2018-12-13T20:03:24.112] [DEBUG] app - user "abcdef" event "login" fired
[2018-12-13T20:03:24.114] [DEBUG] app - query task for "abcdef", ret:{"progress":0,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}
[2018-12-13T20:03:24.115] [DEBUG] app - user "abcdef" event "login" fired
[2018-12-13T20:03:24.117] [DEBUG] app - query task for "abcdef", ret:{"progress":0,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}
[2018-12-13T20:03:24.118] [INFO] app - complete task {"progress":0,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1} with event "login"
[2018-12-13T20:03:24.120] [DEBUG] app - user "abcdef" event "login" fired
[2018-12-13T20:03:24.121] [DEBUG] app - query task for "abcdef", ret:{"progress":0,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}
[2018-12-13T20:03:24.121] [INFO] app - complete task {"progress":0,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1} with event "login"
[2018-12-13T20:03:24.130] [DEBUG] app - completeTask: {"n":1,"nModified":1,"opTime":{"ts":"6634447166226038786","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634447166226038786","$clusterTime":{"clusterTime":"6634447166226038786","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-13T20:03:24.133] [DEBUG] app - completeTask: {"n":1,"nModified":1,"opTime":{"ts":"6634447166226038787","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634447166226038787","$clusterTime":{"clusterTime":"6634447166226038787","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-13T20:03:24.135] [DEBUG] app - user "abcdef" event "login" fired
[2018-12-13T20:03:24.135] [DEBUG] app - query task for "abcdef", ret:{"progress":1,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}
[2018-12-13T20:03:24.135] [DEBUG] app - try complete full task. {"n":0,"nModified":0,"opTime":{"ts":"6634447166226038787","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634447166226038787","$clusterTime":{"clusterTime":"6634447166226038787","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-13T20:03:24.136] [INFO] app - complete task {"progress":1,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1} with event "login"
[2018-12-13T20:03:24.138] [DEBUG] app - try complete full task. {"n":0,"nModified":0,"opTime":{"ts":"6634447166226038787","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634447166226038787","$clusterTime":{"clusterTime":"6634447166226038787","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-13T20:03:24.140] [DEBUG] app - completeTask: {"n":1,"nModified":1,"opTime":{"ts":"6634447166226038788","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634447166226038788","$clusterTime":{"clusterTime":"6634447166226038788","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-13T20:03:24.142] [DEBUG] app - query task for "abcdef", ret:{"progress":2,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}
[2018-12-13T20:03:24.142] [INFO] app - complete task {"progress":2,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1} with event "login"
[2018-12-13T20:03:24.144] [DEBUG] app - try complete full task. {"n":1,"nModified":1,"opTime":{"ts":"6634447166226038789","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634447166226038789","$clusterTime":{"clusterTime":"6634447166226038789","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-13T20:03:24.146] [DEBUG] app - completeTask: {"n":0,"nModified":0,"opTime":{"ts":"6634447166226038789","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634447166226038789","$clusterTime":{"clusterTime":"6634447166226038789","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-13T20:03:24.151] [DEBUG] app - query task for "abcdef", ret:{"progress":-2,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}
[2018-12-13T20:03:24.154] [DEBUG] app - awardItems:[{"itemId":"1000","amount":100},{"itemId":"1200","amount":100}]
[2018-12-13T20:03:24.162] [DEBUG] app - awardItems insert return:[{"amount":100,"acquireTime":1544702604154,"expireTime":9007199254740991,"_id":"5c124a8c0ec4a92770fae1d0","openId":"abcdef","itemId":"1000","__v":0},{"amount":100,"acquireTime":1544702604154,"expireTime":9007199254740991,"_id":"5c124a8c0ec4a92770fae1d1","openId":"abcdef","itemId":"1200","__v":0}]
[2018-12-13T20:03:24.164] [DEBUG] app - assignTask:{"n":1,"nModified":1,"opTime":{"ts":"6634447166226038793","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634447166226038793","$clusterTime":{"clusterTime":"6634447166226038793","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-13T20:03:24.804] [DEBUG] app - createMenu:{"errcode":0,"errmsg":"ok"}
[2018-12-14T00:00:00.004] [DEBUG] app - schedule job
[2018-12-14T00:00:00.007] [DEBUG] app - resetTask:{"n":0,"nModified":0,"opTime":{"ts":"6634508107517001729","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634508107517001729","$clusterTime":{"clusterTime":"6634508107517001729","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-14T00:00:00.008] [DEBUG] app - resetDailyTask: {"n":0,"nModified":0,"opTime":{"ts":"6634508107517001729","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634508107517001729","$clusterTime":{"clusterTime":"6634508107517001729","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-14T08:58:46.170] [DEBUG] app - starting "koa2" ...
[2018-12-14T08:58:46.181] [INFO] app - init mongoose "127.0.0.1":27017/"usercenter" ...
[2018-12-14T08:58:46.181] [DEBUG] app - mongodb connStr:"mongodb://127.0.0.1:27017/usercenter"
[2018-12-14T08:58:46.190] [DEBUG] app - create redis instance for "redis_cache"
[2018-12-14T08:58:46.192] [DEBUG] app - initRedisSession
[2018-12-14T08:58:46.194] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/manage/cdkeyHandler.js"  ...
[2018-12-14T08:58:46.205] [DEBUG] app - register handler method: "importCdkey" on "/manage/cdkeyHandler/importCdkey"
[2018-12-14T08:58:46.206] [DEBUG] app - register handler method: "genQrCode" on "/manage/cdkeyHandler/genQrCode"
[2018-12-14T08:58:46.206] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/manage/login.js"  ...
[2018-12-14T08:58:46.207] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/manage/login.js" to "/manage/login"
[2018-12-14T08:58:46.207] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/post.js"  ...
[2018-12-14T08:58:46.208] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/post.js" to "/post"
[2018-12-14T08:58:46.208] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/qrcode.js"  ...
[2018-12-14T08:58:46.209] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/qrcode.js" to "/qrcode"
[2018-12-14T08:58:46.209] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/redis.js"  ...
[2018-12-14T08:58:46.210] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/redis.js" to "/redis"
[2018-12-14T08:58:46.210] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/root.js"  ...
[2018-12-14T08:58:46.210] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/root.js" to "/"
[2018-12-14T08:58:46.211] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/drawAward.js"  ...
[2018-12-14T08:58:46.211] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/drawAward.js" to "/wxWeb/api/drawAward"
[2018-12-14T08:58:46.212] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/exchangeShopHandler.js"  ...
[2018-12-14T08:58:46.212] [DEBUG] app - register handler method: "queryOnSaleItemCount" on "/wxWeb/api/exchangeShopHandler/queryOnSaleItemCount"
[2018-12-14T08:58:46.213] [DEBUG] app - register handler method: "queryOnSaleItems" on "/wxWeb/api/exchangeShopHandler/queryOnSaleItems"
[2018-12-14T08:58:46.213] [DEBUG] app - register handler method: "exchangeItem" on "/wxWeb/api/exchangeShopHandler/exchangeItem"
[2018-12-14T08:58:46.213] [DEBUG] app - register handler method: "sendMessage" on "/wxWeb/api/exchangeShopHandler/sendMessage"
[2018-12-14T08:58:46.213] [DEBUG] app - register handler method: "markMessageRead" on "/wxWeb/api/exchangeShopHandler/markMessageRead"
[2018-12-14T08:58:46.213] [DEBUG] app - register handler method: "deleteMessage" on "/wxWeb/api/exchangeShopHandler/deleteMessage"
[2018-12-14T08:58:46.213] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/messageHandler.js"  ...
[2018-12-14T08:58:46.214] [DEBUG] app - register handler method: "getMessagePageCount" on "/wxWeb/api/messageHandler/getMessagePageCount"
[2018-12-14T08:58:46.215] [DEBUG] app - register handler method: "getMessagePage" on "/wxWeb/api/messageHandler/getMessagePage"
[2018-12-14T08:58:46.222] [DEBUG] app - register handler method: "sendMessage" on "/wxWeb/api/messageHandler/sendMessage"
[2018-12-14T08:58:46.222] [DEBUG] app - register handler method: "markMessageRead" on "/wxWeb/api/messageHandler/markMessageRead"
[2018-12-14T08:58:46.223] [DEBUG] app - register handler method: "deleteMessage" on "/wxWeb/api/messageHandler/deleteMessage"
[2018-12-14T08:58:46.223] [DEBUG] app - register handler method: "hasUnreadMessage" on "/wxWeb/api/messageHandler/hasUnreadMessage"
[2018-12-14T08:58:46.223] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/queryCdkeyUsage.js"  ...
[2018-12-14T08:58:46.224] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/queryCdkeyUsage.js" to "/wxWeb/api/queryCdkeyUsage"
[2018-12-14T08:58:46.224] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/queryUserStatus.js"  ...
[2018-12-14T08:58:46.229] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/queryUserStatus.js" to "/wxWeb/api/queryUserStatus"
[2018-12-14T08:58:46.229] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/smsHandler.js"  ...
[2018-12-14T08:58:46.230] [DEBUG] app - register handler method: "registerPhone" on "/wxWeb/api/smsHandler/registerPhone"
[2018-12-14T08:58:46.230] [DEBUG] app - register handler method: "getSmsCode" on "/wxWeb/api/smsHandler/getSmsCode"
[2018-12-14T08:58:46.230] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/taskHandler.js"  ...
[2018-12-14T08:58:46.231] [DEBUG] app - register handler method: "queryTaskList" on "/wxWeb/api/taskHandler/queryTaskList"
[2018-12-14T08:58:46.231] [DEBUG] app - register handler method: "rewardTask" on "/wxWeb/api/taskHandler/rewardTask"
[2018-12-14T08:58:46.231] [DEBUG] app - register handler method: "queryTaskInfo" on "/wxWeb/api/taskHandler/queryTaskInfo"
[2018-12-14T08:58:46.231] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/userHandler.js"  ...
[2018-12-14T08:58:46.232] [DEBUG] app - register handler method: "queryUserInfo" on "/wxWeb/api/userHandler/queryUserInfo"
[2018-12-14T08:58:46.232] [DEBUG] app - register handler method: "updateUserInfo" on "/wxWeb/api/userHandler/updateUserInfo"
[2018-12-14T08:58:46.232] [DEBUG] app - register handler method: "isAddressComplete" on "/wxWeb/api/userHandler/isAddressComplete"
[2018-12-14T08:58:46.232] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/scanActivity.js"  ...
[2018-12-14T08:58:46.233] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/scanActivity.js" to "/wxWeb/scanActivity"
[2018-12-14T08:58:46.234] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/wxAccess.js"  ...
[2018-12-14T08:58:46.235] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/wxAccess.js" to "/wxWeb/wxAccess"
[2018-12-14T08:58:46.235] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/wxLogin.js"  ...
[2018-12-14T08:58:46.235] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/wxLogin.js" to "/wxWeb/wxLogin"
[2018-12-14T08:58:46.237] [DEBUG] app - load dbJsonImpl "D:\\workspace\\koa2/dbJson/scanActivity.json" ...
[2018-12-14T08:58:46.239] [DEBUG] app - load dbJsonImpl "D:\\workspace\\koa2/dbJson/taskInfo.json" ...
[2018-12-14T08:58:46.242] [DEBUG] app - DummyService.start
[2018-12-14T08:58:46.245] [DEBUG] app - start scan activity
[2018-12-14T08:58:46.317] [DEBUG] app - register event: "login"
[2018-12-14T08:58:46.318] [DEBUG] app - register event: "completePersonInfo"
[2018-12-14T08:58:46.318] [DEBUG] app - register event: "share"
[2018-12-14T08:58:46.325] [DEBUG] app - register event: "acquirePoints"
[2018-12-14T08:58:46.325] [DEBUG] app - register event: "read"
[2018-12-14T08:58:46.331] [DEBUG] app - UserService.start
[2018-12-14T08:58:46.333] [DEBUG] app - WechatService.start
[2018-12-14T08:58:46.333] [DEBUG] app - DummyService.afterStart
[2018-12-14T08:58:46.333] [DEBUG] app - UserService.afterStart
[2018-12-14T08:58:46.334] [DEBUG] app - WechatService.afterStart
[2018-12-14T08:58:46.334] [INFO] app - app start from dir: "D:\\workspace\\koa2"
[2018-12-14T08:58:46.369] [INFO] app - mongoose connect successfully.
[2018-12-14T08:58:46.372] [INFO] app - redis "redis_cache" ready.
[2018-12-14T08:58:46.394] [DEBUG] app - assignTask:{"n":1,"nModified":1,"opTime":{"ts":"6634646976694583297","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634646976694583297","$clusterTime":{"clusterTime":"6634646976694583297","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-14T08:58:46.399] [DEBUG] app - query task for "abcdef", ret:{"progress":0,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}
[2018-12-14T08:58:46.400] [DEBUG] app - queryTaskList: {"code":0,"taskList":[{"taskId":1,"desc":"【任务描述】每日完成3次登录. taskGoal [taskType,param] , 指定任务类型及目标。任务有顺序，每次只有一个当前任务，完成了当前任务才能开启后续任务","goalSort":1,"goal":3,"resetDaily":true,"award":[1000,100,1200,100]},{"taskId":2,"desc":"【任务描述】 完成个人信息填写","goalSort":2,"goal":1,"resetDaily":false,"award":[1000,1000,1200,100]},{"taskId":3,"desc":"【任务描述】每日分享一次","goalSort":3,"goal":1,"resetDaily":true,"award":[1001,2,1200,100]},{"taskId":4,"desc":"【任务描述】获得积分超过600","goalSort":4,"goal":600,"resetDaily":true,"award":[1001,2,1200,100]},{"taskId":5,"desc":"【任务描述】获得积分超过1000","goalSort":4,"goal":1000,"resetDaily":true,"taskAward":[1001,2,1200,100]}],"currentTask":{"progress":0,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}}
[2018-12-14T08:58:46.404] [DEBUG] app - query task for "abcdef", ret:{"progress":0,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}
[2018-12-14T08:58:46.405] [DEBUG] app - user "abcdef" event "login" fired
[2018-12-14T08:58:46.408] [DEBUG] app - user "abcdef" event "login" fired
[2018-12-14T08:58:46.410] [DEBUG] app - query task for "abcdef", ret:{"progress":0,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}
[2018-12-14T08:58:46.410] [INFO] app - complete task {"progress":0,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1} with event "login"
[2018-12-14T08:58:46.412] [DEBUG] app - user "abcdef" event "login" fired
[2018-12-14T08:58:46.413] [DEBUG] app - query task for "abcdef", ret:{"progress":0,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}
[2018-12-14T08:58:46.414] [INFO] app - complete task {"progress":0,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1} with event "login"
[2018-12-14T08:58:46.419] [DEBUG] app - completeTask: {"n":1,"nModified":1,"opTime":{"ts":"6634646976694583298","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634646976694583298","$clusterTime":{"clusterTime":"6634646976694583298","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-14T08:58:46.425] [DEBUG] app - completeTask: {"n":1,"nModified":1,"opTime":{"ts":"6634646976694583299","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634646976694583299","$clusterTime":{"clusterTime":"6634646976694583299","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-14T08:58:46.428] [DEBUG] app - query task for "abcdef", ret:{"progress":1,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}
[2018-12-14T08:58:46.429] [INFO] app - complete task {"progress":1,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1} with event "login"
[2018-12-14T08:58:46.430] [DEBUG] app - user "abcdef" event "login" fired
[2018-12-14T08:58:46.432] [DEBUG] app - try complete full task. {"n":0,"nModified":0,"opTime":{"ts":"6634646976694583299","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634646976694583299","$clusterTime":{"clusterTime":"6634646976694583299","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-14T08:58:46.433] [DEBUG] app - try complete full task. {"n":0,"nModified":0,"opTime":{"ts":"6634646976694583299","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634646976694583299","$clusterTime":{"clusterTime":"6634646976694583299","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-14T08:58:46.434] [DEBUG] app - completeTask: {"n":1,"nModified":1,"opTime":{"ts":"6634646976694583300","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634646976694583300","$clusterTime":{"clusterTime":"6634646976694583300","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-14T08:58:46.435] [DEBUG] app - query task for "abcdef", ret:{"progress":3,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}
[2018-12-14T08:58:46.436] [INFO] app - complete task {"progress":3,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1} with event "login"
[2018-12-14T08:58:46.439] [DEBUG] app - try complete full task. {"n":1,"nModified":1,"opTime":{"ts":"6634646976694583301","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634646976694583301","$clusterTime":{"clusterTime":"6634646976694583301","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-14T08:58:46.440] [DEBUG] app - completeTask: {"n":0,"nModified":0,"opTime":{"ts":"6634646976694583301","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634646976694583301","$clusterTime":{"clusterTime":"6634646976694583301","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-14T08:58:46.441] [DEBUG] app - query task for "abcdef", ret:{"progress":-2,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}
[2018-12-14T08:58:46.444] [DEBUG] app - awardItems:[{"itemId":"1000","amount":100},{"itemId":"1200","amount":100}]
[2018-12-14T08:58:46.452] [DEBUG] app - awardItems insert return:[{"amount":100,"acquireTime":1544749126444,"expireTime":9007199254740991,"_id":"5c130046dec3f65370404013","openId":"abcdef","itemId":"1000","__v":0},{"amount":100,"acquireTime":1544749126444,"expireTime":9007199254740991,"_id":"5c130046dec3f65370404014","openId":"abcdef","itemId":"1200","__v":0}]
[2018-12-14T08:58:46.455] [DEBUG] app - assignTask:{"n":1,"nModified":1,"opTime":{"ts":"6634646976694583305","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634646976694583305","$clusterTime":{"clusterTime":"6634646976694583305","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-14T08:58:47.131] [DEBUG] app - createMenu:{"errcode":0,"errmsg":"ok"}
[2018-12-14T09:03:02.451] [DEBUG] app - starting "koa2" ...
[2018-12-14T09:03:02.462] [INFO] app - init mongoose "127.0.0.1":27017/"usercenter" ...
[2018-12-14T09:03:02.462] [DEBUG] app - mongodb connStr:"mongodb://127.0.0.1:27017/usercenter"
[2018-12-14T09:03:02.471] [DEBUG] app - create redis instance for "redis_cache"
[2018-12-14T09:03:02.473] [DEBUG] app - initRedisSession
[2018-12-14T09:03:02.474] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/manage/cdkeyHandler.js"  ...
[2018-12-14T09:03:02.486] [DEBUG] app - register handler method: "importCdkey" on "/manage/cdkeyHandler/importCdkey"
[2018-12-14T09:03:02.487] [DEBUG] app - register handler method: "genQrCode" on "/manage/cdkeyHandler/genQrCode"
[2018-12-14T09:03:02.487] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/manage/login.js"  ...
[2018-12-14T09:03:02.488] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/manage/login.js" to "/manage/login"
[2018-12-14T09:03:02.488] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/post.js"  ...
[2018-12-14T09:03:02.488] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/post.js" to "/post"
[2018-12-14T09:03:02.489] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/qrcode.js"  ...
[2018-12-14T09:03:02.489] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/qrcode.js" to "/qrcode"
[2018-12-14T09:03:02.490] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/redis.js"  ...
[2018-12-14T09:03:02.491] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/redis.js" to "/redis"
[2018-12-14T09:03:02.491] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/root.js"  ...
[2018-12-14T09:03:02.491] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/root.js" to "/"
[2018-12-14T09:03:02.492] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/drawAward.js"  ...
[2018-12-14T09:03:02.492] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/drawAward.js" to "/wxWeb/api/drawAward"
[2018-12-14T09:03:02.492] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/exchangeShopHandler.js"  ...
[2018-12-14T09:03:02.493] [DEBUG] app - register handler method: "queryOnSaleItemCount" on "/wxWeb/api/exchangeShopHandler/queryOnSaleItemCount"
[2018-12-14T09:03:02.493] [DEBUG] app - register handler method: "queryOnSaleItems" on "/wxWeb/api/exchangeShopHandler/queryOnSaleItems"
[2018-12-14T09:03:02.493] [DEBUG] app - register handler method: "exchangeItem" on "/wxWeb/api/exchangeShopHandler/exchangeItem"
[2018-12-14T09:03:02.494] [DEBUG] app - register handler method: "sendMessage" on "/wxWeb/api/exchangeShopHandler/sendMessage"
[2018-12-14T09:03:02.494] [DEBUG] app - register handler method: "markMessageRead" on "/wxWeb/api/exchangeShopHandler/markMessageRead"
[2018-12-14T09:03:02.501] [DEBUG] app - register handler method: "deleteMessage" on "/wxWeb/api/exchangeShopHandler/deleteMessage"
[2018-12-14T09:03:02.501] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/messageHandler.js"  ...
[2018-12-14T09:03:02.502] [DEBUG] app - register handler method: "getMessagePageCount" on "/wxWeb/api/messageHandler/getMessagePageCount"
[2018-12-14T09:03:02.502] [DEBUG] app - register handler method: "getMessagePage" on "/wxWeb/api/messageHandler/getMessagePage"
[2018-12-14T09:03:02.502] [DEBUG] app - register handler method: "sendMessage" on "/wxWeb/api/messageHandler/sendMessage"
[2018-12-14T09:03:02.503] [DEBUG] app - register handler method: "markMessageRead" on "/wxWeb/api/messageHandler/markMessageRead"
[2018-12-14T09:03:02.503] [DEBUG] app - register handler method: "deleteMessage" on "/wxWeb/api/messageHandler/deleteMessage"
[2018-12-14T09:03:02.503] [DEBUG] app - register handler method: "hasUnreadMessage" on "/wxWeb/api/messageHandler/hasUnreadMessage"
[2018-12-14T09:03:02.503] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/queryCdkeyUsage.js"  ...
[2018-12-14T09:03:02.504] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/queryCdkeyUsage.js" to "/wxWeb/api/queryCdkeyUsage"
[2018-12-14T09:03:02.504] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/queryUserStatus.js"  ...
[2018-12-14T09:03:02.508] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/queryUserStatus.js" to "/wxWeb/api/queryUserStatus"
[2018-12-14T09:03:02.508] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/smsHandler.js"  ...
[2018-12-14T09:03:02.509] [DEBUG] app - register handler method: "registerPhone" on "/wxWeb/api/smsHandler/registerPhone"
[2018-12-14T09:03:02.509] [DEBUG] app - register handler method: "getSmsCode" on "/wxWeb/api/smsHandler/getSmsCode"
[2018-12-14T09:03:02.509] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/taskHandler.js"  ...
[2018-12-14T09:03:02.510] [DEBUG] app - register handler method: "queryTaskList" on "/wxWeb/api/taskHandler/queryTaskList"
[2018-12-14T09:03:02.510] [DEBUG] app - register handler method: "rewardTask" on "/wxWeb/api/taskHandler/rewardTask"
[2018-12-14T09:03:02.510] [DEBUG] app - register handler method: "queryTaskInfo" on "/wxWeb/api/taskHandler/queryTaskInfo"
[2018-12-14T09:03:02.510] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/userHandler.js"  ...
[2018-12-14T09:03:02.511] [DEBUG] app - register handler method: "queryUserInfo" on "/wxWeb/api/userHandler/queryUserInfo"
[2018-12-14T09:03:02.511] [DEBUG] app - register handler method: "updateUserInfo" on "/wxWeb/api/userHandler/updateUserInfo"
[2018-12-14T09:03:02.511] [DEBUG] app - register handler method: "isAddressComplete" on "/wxWeb/api/userHandler/isAddressComplete"
[2018-12-14T09:03:02.512] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/scanActivity.js"  ...
[2018-12-14T09:03:02.512] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/scanActivity.js" to "/wxWeb/scanActivity"
[2018-12-14T09:03:02.513] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/wxAccess.js"  ...
[2018-12-14T09:03:02.514] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/wxAccess.js" to "/wxWeb/wxAccess"
[2018-12-14T09:03:02.514] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/wxLogin.js"  ...
[2018-12-14T09:03:02.515] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/wxLogin.js" to "/wxWeb/wxLogin"
[2018-12-14T09:03:02.518] [DEBUG] app - load dbJsonImpl "D:\\workspace\\koa2/dbJson/scanActivity.json" ...
[2018-12-14T09:03:02.519] [DEBUG] app - load dbJsonImpl "D:\\workspace\\koa2/dbJson/taskInfo.json" ...
[2018-12-14T09:03:02.521] [DEBUG] app - DummyService.start
[2018-12-14T09:03:02.523] [DEBUG] app - start scan activity
[2018-12-14T09:03:02.595] [DEBUG] app - register event: "login"
[2018-12-14T09:03:02.595] [DEBUG] app - register event: "completePersonInfo"
[2018-12-14T09:03:02.595] [DEBUG] app - register event: "share"
[2018-12-14T09:03:02.596] [DEBUG] app - register event: "acquirePoints"
[2018-12-14T09:03:02.596] [DEBUG] app - register event: "read"
[2018-12-14T09:03:02.601] [DEBUG] app - UserService.start
[2018-12-14T09:03:02.603] [DEBUG] app - WechatService.start
[2018-12-14T09:03:02.603] [DEBUG] app - DummyService.afterStart
[2018-12-14T09:03:02.603] [DEBUG] app - UserService.afterStart
[2018-12-14T09:03:02.603] [DEBUG] app - WechatService.afterStart
[2018-12-14T09:03:02.604] [INFO] app - app start from dir: "D:\\workspace\\koa2"
[2018-12-14T09:03:02.619] [INFO] app - redis "redis_cache" ready.
[2018-12-14T09:03:02.637] [INFO] app - mongoose connect successfully.
[2018-12-14T09:03:02.661] [DEBUG] app - assignTask:{"n":1,"nModified":1,"opTime":{"ts":"6634648076206211073","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634648076206211073","$clusterTime":{"clusterTime":"6634648076206211073","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-14T09:03:02.666] [DEBUG] app - query task for "abcdef", ret:{"progress":0,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}
[2018-12-14T09:03:02.667] [DEBUG] app - queryTaskList: {"code":0,"taskList":[{"taskId":1,"desc":"【任务描述】每日完成3次登录. taskGoal [taskType,param] , 指定任务类型及目标。任务有顺序，每次只有一个当前任务，完成了当前任务才能开启后续任务","goalSort":1,"goal":3,"resetDaily":true,"award":[1000,100,1200,100]},{"taskId":2,"desc":"【任务描述】 完成个人信息填写","goalSort":2,"goal":1,"resetDaily":false,"award":[1000,1000,1200,100]},{"taskId":3,"desc":"【任务描述】每日分享一次","goalSort":3,"goal":1,"resetDaily":true,"award":[1001,2,1200,100]},{"taskId":4,"desc":"【任务描述】获得积分超过600","goalSort":4,"goal":600,"resetDaily":true,"award":[1001,2,1200,100]},{"taskId":5,"desc":"【任务描述】获得积分超过1000","goalSort":4,"goal":1000,"resetDaily":true,"taskAward":[1001,2,1200,100]}],"currentTask":{"progress":0,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}}
[2018-12-14T09:03:02.672] [DEBUG] app - query task for "abcdef", ret:{"progress":0,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}
[2018-12-14T09:03:02.673] [DEBUG] app - user "abcdef" event "login" fired
[2018-12-14T09:03:02.674] [DEBUG] app - user "abcdef" event "login" fired
[2018-12-14T09:03:02.676] [DEBUG] app - query task for "abcdef", ret:{"progress":0,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}
[2018-12-14T09:03:02.676] [INFO] app - complete task {"progress":0,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1} with event "login"
[2018-12-14T09:03:02.678] [DEBUG] app - user "abcdef" event "login" fired
[2018-12-14T09:03:02.679] [DEBUG] app - query task for "abcdef", ret:{"progress":0,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}
[2018-12-14T09:03:02.679] [INFO] app - complete task {"progress":0,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1} with event "login"
[2018-12-14T09:03:02.683] [DEBUG] app - completeTask: {"n":1,"nModified":1,"opTime":{"ts":"6634648076206211074","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634648076206211074","$clusterTime":{"clusterTime":"6634648076206211074","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-14T09:03:02.692] [DEBUG] app - completeTask: {"n":1,"nModified":1,"opTime":{"ts":"6634648076206211075","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634648076206211075","$clusterTime":{"clusterTime":"6634648076206211075","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-14T09:03:02.694] [DEBUG] app - user "abcdef" event "login" fired
[2018-12-14T09:03:02.695] [DEBUG] app - query task for "abcdef", ret:{"progress":1,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}
[2018-12-14T09:03:02.695] [DEBUG] app - try complete full task. {"n":0,"nModified":0,"opTime":{"ts":"6634648076206211075","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634648076206211075","$clusterTime":{"clusterTime":"6634648076206211075","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-14T09:03:02.696] [INFO] app - complete task {"progress":1,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1} with event "login"
[2018-12-14T09:03:02.698] [DEBUG] app - try complete full task. {"n":0,"nModified":0,"opTime":{"ts":"6634648076206211075","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634648076206211075","$clusterTime":{"clusterTime":"6634648076206211075","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-14T09:03:02.700] [DEBUG] app - completeTask: {"n":1,"nModified":1,"opTime":{"ts":"6634648076206211076","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634648076206211076","$clusterTime":{"clusterTime":"6634648076206211076","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-14T09:03:02.701] [DEBUG] app - query task for "abcdef", ret:{"progress":2,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}
[2018-12-14T09:03:02.702] [INFO] app - complete task {"progress":2,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1} with event "login"
[2018-12-14T09:03:02.704] [DEBUG] app - try complete full task. {"n":1,"nModified":1,"opTime":{"ts":"6634648076206211077","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634648076206211077","$clusterTime":{"clusterTime":"6634648076206211077","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-14T09:03:02.706] [DEBUG] app - completeTask: {"n":0,"nModified":0,"opTime":{"ts":"6634648076206211077","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634648076206211077","$clusterTime":{"clusterTime":"6634648076206211077","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-14T09:03:02.706] [DEBUG] app - query task for "abcdef", ret:{"progress":-2,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}
[2018-12-14T09:03:02.710] [DEBUG] app - awardItems:[{"itemId":"1000","amount":100},{"itemId":"1200","amount":100}]
[2018-12-14T09:03:02.718] [DEBUG] app - awardItems insert return:[{"amount":100,"acquireTime":1544749382710,"expireTime":9007199254740991,"_id":"5c1301465275064eec321b04","openId":"abcdef","itemId":"1000","__v":0},{"amount":100,"acquireTime":1544749382710,"expireTime":9007199254740991,"_id":"5c1301465275064eec321b05","openId":"abcdef","itemId":"1200","__v":0}]
[2018-12-14T09:03:02.720] [DEBUG] app - assignTask:{"n":1,"nModified":1,"opTime":{"ts":"6634648076206211081","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634648076206211081","$clusterTime":{"clusterTime":"6634648076206211081","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-14T09:03:03.366] [DEBUG] app - createMenu:{"errcode":0,"errmsg":"ok"}
[2018-12-14T09:08:21.785] [DEBUG] app - starting "koa2" ...
[2018-12-14T09:08:21.796] [INFO] app - init mongoose "127.0.0.1":27017/"usercenter" ...
[2018-12-14T09:08:21.797] [DEBUG] app - mongodb connStr:"mongodb://127.0.0.1:27017/usercenter"
[2018-12-14T09:08:21.807] [DEBUG] app - create redis instance for "redis_cache"
[2018-12-14T09:08:21.809] [DEBUG] app - initRedisSession
[2018-12-14T09:08:21.811] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/manage/cdkeyHandler.js"  ...
[2018-12-14T09:08:21.822] [DEBUG] app - register handler method: "importCdkey" on "/manage/cdkeyHandler/importCdkey"
[2018-12-14T09:08:21.823] [DEBUG] app - register handler method: "genQrCode" on "/manage/cdkeyHandler/genQrCode"
[2018-12-14T09:08:21.823] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/manage/login.js"  ...
[2018-12-14T09:08:21.824] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/manage/login.js" to "/manage/login"
[2018-12-14T09:08:21.824] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/post.js"  ...
[2018-12-14T09:08:21.825] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/post.js" to "/post"
[2018-12-14T09:08:21.825] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/qrcode.js"  ...
[2018-12-14T09:08:21.827] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/qrcode.js" to "/qrcode"
[2018-12-14T09:08:21.834] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/redis.js"  ...
[2018-12-14T09:08:21.835] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/redis.js" to "/redis"
[2018-12-14T09:08:21.836] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/root.js"  ...
[2018-12-14T09:08:21.836] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/root.js" to "/"
[2018-12-14T09:08:21.836] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/drawAward.js"  ...
[2018-12-14T09:08:21.837] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/drawAward.js" to "/wxWeb/api/drawAward"
[2018-12-14T09:08:21.837] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/exchangeShopHandler.js"  ...
[2018-12-14T09:08:21.838] [DEBUG] app - register handler method: "queryOnSaleItemCount" on "/wxWeb/api/exchangeShopHandler/queryOnSaleItemCount"
[2018-12-14T09:08:21.838] [DEBUG] app - register handler method: "queryOnSaleItems" on "/wxWeb/api/exchangeShopHandler/queryOnSaleItems"
[2018-12-14T09:08:21.838] [DEBUG] app - register handler method: "exchangeItem" on "/wxWeb/api/exchangeShopHandler/exchangeItem"
[2018-12-14T09:08:21.839] [DEBUG] app - register handler method: "sendMessage" on "/wxWeb/api/exchangeShopHandler/sendMessage"
[2018-12-14T09:08:21.839] [DEBUG] app - register handler method: "markMessageRead" on "/wxWeb/api/exchangeShopHandler/markMessageRead"
[2018-12-14T09:08:21.839] [DEBUG] app - register handler method: "deleteMessage" on "/wxWeb/api/exchangeShopHandler/deleteMessage"
[2018-12-14T09:08:21.839] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/messageHandler.js"  ...
[2018-12-14T09:08:21.840] [DEBUG] app - register handler method: "getMessagePageCount" on "/wxWeb/api/messageHandler/getMessagePageCount"
[2018-12-14T09:08:21.840] [DEBUG] app - register handler method: "getMessagePage" on "/wxWeb/api/messageHandler/getMessagePage"
[2018-12-14T09:08:21.840] [DEBUG] app - register handler method: "sendMessage" on "/wxWeb/api/messageHandler/sendMessage"
[2018-12-14T09:08:21.840] [DEBUG] app - register handler method: "markMessageRead" on "/wxWeb/api/messageHandler/markMessageRead"
[2018-12-14T09:08:21.840] [DEBUG] app - register handler method: "deleteMessage" on "/wxWeb/api/messageHandler/deleteMessage"
[2018-12-14T09:08:21.840] [DEBUG] app - register handler method: "hasUnreadMessage" on "/wxWeb/api/messageHandler/hasUnreadMessage"
[2018-12-14T09:08:21.841] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/queryCdkeyUsage.js"  ...
[2018-12-14T09:08:21.841] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/queryCdkeyUsage.js" to "/wxWeb/api/queryCdkeyUsage"
[2018-12-14T09:08:21.842] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/queryUserStatus.js"  ...
[2018-12-14T09:08:21.845] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/queryUserStatus.js" to "/wxWeb/api/queryUserStatus"
[2018-12-14T09:08:21.846] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/smsHandler.js"  ...
[2018-12-14T09:08:21.846] [DEBUG] app - register handler method: "registerPhone" on "/wxWeb/api/smsHandler/registerPhone"
[2018-12-14T09:08:21.846] [DEBUG] app - register handler method: "getSmsCode" on "/wxWeb/api/smsHandler/getSmsCode"
[2018-12-14T09:08:21.847] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/taskHandler.js"  ...
[2018-12-14T09:08:21.847] [DEBUG] app - register handler method: "queryTaskList" on "/wxWeb/api/taskHandler/queryTaskList"
[2018-12-14T09:08:21.848] [DEBUG] app - register handler method: "rewardTask" on "/wxWeb/api/taskHandler/rewardTask"
[2018-12-14T09:08:21.848] [DEBUG] app - register handler method: "queryTaskInfo" on "/wxWeb/api/taskHandler/queryTaskInfo"
[2018-12-14T09:08:21.848] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/userHandler.js"  ...
[2018-12-14T09:08:21.849] [DEBUG] app - register handler method: "queryUserInfo" on "/wxWeb/api/userHandler/queryUserInfo"
[2018-12-14T09:08:21.849] [DEBUG] app - register handler method: "updateUserInfo" on "/wxWeb/api/userHandler/updateUserInfo"
[2018-12-14T09:08:21.849] [DEBUG] app - register handler method: "isAddressComplete" on "/wxWeb/api/userHandler/isAddressComplete"
[2018-12-14T09:08:21.850] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/scanActivity.js"  ...
[2018-12-14T09:08:21.851] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/scanActivity.js" to "/wxWeb/scanActivity"
[2018-12-14T09:08:21.851] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/wxAccess.js"  ...
[2018-12-14T09:08:21.852] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/wxAccess.js" to "/wxWeb/wxAccess"
[2018-12-14T09:08:21.852] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/wxLogin.js"  ...
[2018-12-14T09:08:21.853] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/wxLogin.js" to "/wxWeb/wxLogin"
[2018-12-14T09:08:21.854] [DEBUG] app - load dbJsonImpl "D:\\workspace\\koa2/dbJson/scanActivity.json" ...
[2018-12-14T09:08:21.855] [DEBUG] app - load dbJsonImpl "D:\\workspace\\koa2/dbJson/taskInfo.json" ...
[2018-12-14T09:08:21.857] [DEBUG] app - DummyService.start
[2018-12-14T09:08:21.861] [DEBUG] app - start scan activity
[2018-12-14T09:08:21.938] [DEBUG] app - register event: "login"
[2018-12-14T09:08:21.938] [DEBUG] app - register event: "completePersonInfo"
[2018-12-14T09:08:21.938] [DEBUG] app - register event: "share"
[2018-12-14T09:08:21.938] [DEBUG] app - register event: "acquirePoints"
[2018-12-14T09:08:21.938] [DEBUG] app - register event: "read"
[2018-12-14T09:08:21.944] [DEBUG] app - UserService.start
[2018-12-14T09:08:21.946] [DEBUG] app - WechatService.start
[2018-12-14T09:08:21.946] [DEBUG] app - DummyService.afterStart
[2018-12-14T09:08:21.946] [DEBUG] app - UserService.afterStart
[2018-12-14T09:08:21.946] [DEBUG] app - WechatService.afterStart
[2018-12-14T09:08:21.946] [INFO] app - app start from dir: "D:\\workspace\\koa2"
[2018-12-14T09:08:21.962] [INFO] app - redis "redis_cache" ready.
[2018-12-14T09:08:21.981] [INFO] app - mongoose connect successfully.
[2018-12-14T09:08:22.004] [DEBUG] app - assignTask:{"n":1,"nModified":1,"opTime":{"ts":"6634649446300778497","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634649446300778497","$clusterTime":{"clusterTime":"6634649446300778497","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-14T09:08:22.008] [DEBUG] app - query task for "abcdef", ret:{"progress":0,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}
[2018-12-14T09:08:22.009] [DEBUG] app - queryTaskList: {"code":0,"taskList":[{"taskId":1,"desc":"【任务描述】每日完成3次登录. taskGoal [taskType,param] , 指定任务类型及目标。任务有顺序，每次只有一个当前任务，完成了当前任务才能开启后续任务","goalSort":1,"goal":3,"resetDaily":true,"award":[1000,100,1200,100]},{"taskId":2,"desc":"【任务描述】 完成个人信息填写","goalSort":2,"goal":1,"resetDaily":false,"award":[1000,1000,1200,100]},{"taskId":3,"desc":"【任务描述】每日分享一次","goalSort":3,"goal":1,"resetDaily":true,"award":[1001,2,1200,100]},{"taskId":4,"desc":"【任务描述】获得积分超过600","goalSort":4,"goal":600,"resetDaily":true,"award":[1001,2,1200,100]},{"taskId":5,"desc":"【任务描述】获得积分超过1000","goalSort":4,"goal":1000,"resetDaily":true,"taskAward":[1001,2,1200,100]}],"currentTask":{"progress":0,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}}
[2018-12-14T09:08:22.012] [DEBUG] app - query task for "abcdef", ret:{"progress":0,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}
[2018-12-14T09:08:22.014] [DEBUG] app - user "abcdef" event "login" fired
[2018-12-14T09:08:22.015] [DEBUG] app - user "abcdef" event "login" fired
[2018-12-14T09:08:22.016] [DEBUG] app - query task for "abcdef", ret:{"progress":0,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}
[2018-12-14T09:08:22.016] [INFO] app - complete task {"progress":0,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1} with event "login"
[2018-12-14T09:08:22.019] [DEBUG] app - user "abcdef" event "login" fired
[2018-12-14T09:08:22.019] [DEBUG] app - query task for "abcdef", ret:{"progress":0,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}
[2018-12-14T09:08:22.020] [DEBUG] app - completeTask: {"n":1,"nModified":1,"opTime":{"ts":"6634649450595745793","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634649450595745793","$clusterTime":{"clusterTime":"6634649450595745793","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-14T09:08:22.020] [INFO] app - complete task {"progress":0,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1} with event "login"
[2018-12-14T09:08:22.024] [DEBUG] app - try complete full task. {"n":0,"nModified":0,"opTime":{"ts":"6634649450595745793","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634649450595745793","$clusterTime":{"clusterTime":"6634649450595745794","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-14T09:08:22.026] [DEBUG] app - user "abcdef" event "login" fired
[2018-12-14T09:08:22.029] [DEBUG] app - query task for "abcdef", ret:{"progress":1,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}
[2018-12-14T09:08:22.035] [DEBUG] app - completeTask: {"n":1,"nModified":1,"opTime":{"ts":"6634649450595745794","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634649450595745794","$clusterTime":{"clusterTime":"6634649450595745794","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-14T09:08:22.036] [INFO] app - complete task {"progress":1,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1} with event "login"
[2018-12-14T09:08:22.040] [DEBUG] app - try complete full task. {"n":0,"nModified":0,"opTime":{"ts":"6634649450595745794","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634649450595745794","$clusterTime":{"clusterTime":"6634649450595745795","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-14T09:08:22.041] [DEBUG] app - completeTask: {"n":1,"nModified":1,"opTime":{"ts":"6634649450595745795","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634649450595745795","$clusterTime":{"clusterTime":"6634649450595745795","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-14T09:08:22.043] [DEBUG] app - query task for "abcdef", ret:{"progress":2,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}
[2018-12-14T09:08:22.043] [INFO] app - complete task {"progress":2,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1} with event "login"
[2018-12-14T09:08:22.045] [DEBUG] app - try complete full task. {"n":1,"nModified":1,"opTime":{"ts":"6634649450595745796","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634649450595745796","$clusterTime":{"clusterTime":"6634649450595745796","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-14T09:08:22.046] [DEBUG] app - completeTask: {"n":0,"nModified":0,"opTime":{"ts":"6634649450595745796","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634649450595745796","$clusterTime":{"clusterTime":"6634649450595745796","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-14T09:08:22.047] [DEBUG] app - query task for "abcdef", ret:{"progress":-2,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}
[2018-12-14T09:08:22.049] [DEBUG] app - awardItems:[{"itemId":"1000","amount":100},{"itemId":"1200","amount":100}]
[2018-12-14T09:08:22.058] [DEBUG] app - awardItems insert return:[{"amount":100,"acquireTime":1544749702049,"expireTime":9007199254740991,"_id":"5c13028616588551c87b4731","openId":"abcdef","itemId":"1000","__v":0},{"amount":100,"acquireTime":1544749702049,"expireTime":9007199254740991,"_id":"5c13028616588551c87b4732","openId":"abcdef","itemId":"1200","__v":0}]
[2018-12-14T09:08:22.060] [DEBUG] app - assignTask:{"n":1,"nModified":1,"opTime":{"ts":"6634649450595745800","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634649450595745800","$clusterTime":{"clusterTime":"6634649450595745800","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-14T09:08:22.638] [DEBUG] app - createMenu:{"errcode":0,"errmsg":"ok"}
[2018-12-14T09:10:47.341] [DEBUG] app - starting "koa2" ...
[2018-12-14T09:10:47.352] [INFO] app - init mongoose "127.0.0.1":27017/"usercenter" ...
[2018-12-14T09:10:47.353] [DEBUG] app - mongodb connStr:"mongodb://127.0.0.1:27017/usercenter"
[2018-12-14T09:10:47.361] [DEBUG] app - create redis instance for "redis_cache"
[2018-12-14T09:10:47.363] [DEBUG] app - initRedisSession
[2018-12-14T09:10:47.365] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/manage/cdkeyHandler.js"  ...
[2018-12-14T09:10:47.375] [DEBUG] app - register handler method: "importCdkey" on "/manage/cdkeyHandler/importCdkey"
[2018-12-14T09:10:47.376] [DEBUG] app - register handler method: "genQrCode" on "/manage/cdkeyHandler/genQrCode"
[2018-12-14T09:10:47.377] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/manage/login.js"  ...
[2018-12-14T09:10:47.378] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/manage/login.js" to "/manage/login"
[2018-12-14T09:10:47.379] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/post.js"  ...
[2018-12-14T09:10:47.380] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/post.js" to "/post"
[2018-12-14T09:10:47.380] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/qrcode.js"  ...
[2018-12-14T09:10:47.381] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/qrcode.js" to "/qrcode"
[2018-12-14T09:10:47.381] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/redis.js"  ...
[2018-12-14T09:10:47.382] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/redis.js" to "/redis"
[2018-12-14T09:10:47.383] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/root.js"  ...
[2018-12-14T09:10:47.384] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/root.js" to "/"
[2018-12-14T09:10:47.385] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/drawAward.js"  ...
[2018-12-14T09:10:47.385] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/drawAward.js" to "/wxWeb/api/drawAward"
[2018-12-14T09:10:47.386] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/exchangeShopHandler.js"  ...
[2018-12-14T09:10:47.386] [DEBUG] app - register handler method: "queryOnSaleItemCount" on "/wxWeb/api/exchangeShopHandler/queryOnSaleItemCount"
[2018-12-14T09:10:47.387] [DEBUG] app - register handler method: "queryOnSaleItems" on "/wxWeb/api/exchangeShopHandler/queryOnSaleItems"
[2018-12-14T09:10:47.387] [DEBUG] app - register handler method: "exchangeItem" on "/wxWeb/api/exchangeShopHandler/exchangeItem"
[2018-12-14T09:10:47.387] [DEBUG] app - register handler method: "sendMessage" on "/wxWeb/api/exchangeShopHandler/sendMessage"
[2018-12-14T09:10:47.387] [DEBUG] app - register handler method: "markMessageRead" on "/wxWeb/api/exchangeShopHandler/markMessageRead"
[2018-12-14T09:10:47.387] [DEBUG] app - register handler method: "deleteMessage" on "/wxWeb/api/exchangeShopHandler/deleteMessage"
[2018-12-14T09:10:47.388] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/messageHandler.js"  ...
[2018-12-14T09:10:47.388] [DEBUG] app - register handler method: "getMessagePageCount" on "/wxWeb/api/messageHandler/getMessagePageCount"
[2018-12-14T09:10:47.388] [DEBUG] app - register handler method: "getMessagePage" on "/wxWeb/api/messageHandler/getMessagePage"
[2018-12-14T09:10:47.389] [DEBUG] app - register handler method: "sendMessage" on "/wxWeb/api/messageHandler/sendMessage"
[2018-12-14T09:10:47.389] [DEBUG] app - register handler method: "markMessageRead" on "/wxWeb/api/messageHandler/markMessageRead"
[2018-12-14T09:10:47.389] [DEBUG] app - register handler method: "deleteMessage" on "/wxWeb/api/messageHandler/deleteMessage"
[2018-12-14T09:10:47.389] [DEBUG] app - register handler method: "hasUnreadMessage" on "/wxWeb/api/messageHandler/hasUnreadMessage"
[2018-12-14T09:10:47.389] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/queryCdkeyUsage.js"  ...
[2018-12-14T09:10:47.390] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/queryCdkeyUsage.js" to "/wxWeb/api/queryCdkeyUsage"
[2018-12-14T09:10:47.390] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/queryUserStatus.js"  ...
[2018-12-14T09:10:47.394] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/queryUserStatus.js" to "/wxWeb/api/queryUserStatus"
[2018-12-14T09:10:47.394] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/smsHandler.js"  ...
[2018-12-14T09:10:47.395] [DEBUG] app - register handler method: "registerPhone" on "/wxWeb/api/smsHandler/registerPhone"
[2018-12-14T09:10:47.395] [DEBUG] app - register handler method: "getSmsCode" on "/wxWeb/api/smsHandler/getSmsCode"
[2018-12-14T09:10:47.396] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/taskHandler.js"  ...
[2018-12-14T09:10:47.396] [DEBUG] app - register handler method: "queryTaskList" on "/wxWeb/api/taskHandler/queryTaskList"
[2018-12-14T09:10:47.397] [DEBUG] app - register handler method: "rewardTask" on "/wxWeb/api/taskHandler/rewardTask"
[2018-12-14T09:10:47.397] [DEBUG] app - register handler method: "queryTaskInfo" on "/wxWeb/api/taskHandler/queryTaskInfo"
[2018-12-14T09:10:47.397] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/userHandler.js"  ...
[2018-12-14T09:10:47.398] [DEBUG] app - register handler method: "queryUserInfo" on "/wxWeb/api/userHandler/queryUserInfo"
[2018-12-14T09:10:47.398] [DEBUG] app - register handler method: "updateUserInfo" on "/wxWeb/api/userHandler/updateUserInfo"
[2018-12-14T09:10:47.398] [DEBUG] app - register handler method: "isAddressComplete" on "/wxWeb/api/userHandler/isAddressComplete"
[2018-12-14T09:10:47.398] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/scanActivity.js"  ...
[2018-12-14T09:10:47.399] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/scanActivity.js" to "/wxWeb/scanActivity"
[2018-12-14T09:10:47.399] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/wxAccess.js"  ...
[2018-12-14T09:10:47.401] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/wxAccess.js" to "/wxWeb/wxAccess"
[2018-12-14T09:10:47.401] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/wxLogin.js"  ...
[2018-12-14T09:10:47.401] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/wxLogin.js" to "/wxWeb/wxLogin"
[2018-12-14T09:10:47.403] [DEBUG] app - load dbJsonImpl "D:\\workspace\\koa2/dbJson/scanActivity.json" ...
[2018-12-14T09:10:47.404] [DEBUG] app - load dbJsonImpl "D:\\workspace\\koa2/dbJson/taskInfo.json" ...
[2018-12-14T09:10:47.406] [DEBUG] app - DummyService.start
[2018-12-14T09:10:47.414] [DEBUG] app - start scan activity
[2018-12-14T09:10:47.493] [DEBUG] app - register event: "login"
[2018-12-14T09:10:47.493] [DEBUG] app - register event: "completePersonInfo"
[2018-12-14T09:10:47.493] [DEBUG] app - register event: "share"
[2018-12-14T09:10:47.493] [DEBUG] app - register event: "acquirePoints"
[2018-12-14T09:10:47.493] [DEBUG] app - register event: "read"
[2018-12-14T09:10:47.499] [DEBUG] app - UserService.start
[2018-12-14T09:10:47.501] [DEBUG] app - WechatService.start
[2018-12-14T09:10:47.501] [DEBUG] app - DummyService.afterStart
[2018-12-14T09:10:47.501] [DEBUG] app - UserService.afterStart
[2018-12-14T09:10:47.501] [DEBUG] app - WechatService.afterStart
[2018-12-14T09:10:47.501] [INFO] app - app start from dir: "D:\\workspace\\koa2"
[2018-12-14T09:10:47.518] [INFO] app - redis "redis_cache" ready.
[2018-12-14T09:10:47.536] [INFO] app - mongoose connect successfully.
[2018-12-14T09:10:47.565] [DEBUG] app - assignTask:{"n":1,"nModified":1,"opTime":{"ts":"6634650073366003713","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634650073366003713","$clusterTime":{"clusterTime":"6634650073366003713","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-14T09:10:47.571] [DEBUG] app - query task for "abcdef", ret:{"progress":0,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}
[2018-12-14T09:10:47.571] [DEBUG] app - queryTaskList: {"code":0,"taskList":[{"taskId":1,"desc":"【任务描述】每日完成3次登录. taskGoal [taskType,param] , 指定任务类型及目标。任务有顺序，每次只有一个当前任务，完成了当前任务才能开启后续任务","goalSort":1,"goal":3,"resetDaily":true,"award":[1000,100,1200,100]},{"taskId":2,"desc":"【任务描述】 完成个人信息填写","goalSort":2,"goal":1,"resetDaily":false,"award":[1000,1000,1200,100]},{"taskId":3,"desc":"【任务描述】每日分享一次","goalSort":3,"goal":1,"resetDaily":true,"award":[1001,2,1200,100]},{"taskId":4,"desc":"【任务描述】获得积分超过600","goalSort":4,"goal":600,"resetDaily":true,"award":[1001,2,1200,100]},{"taskId":5,"desc":"【任务描述】获得积分超过1000","goalSort":4,"goal":1000,"resetDaily":true,"taskAward":[1001,2,1200,100]}],"currentTask":{"progress":0,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}}
[2018-12-14T09:10:47.583] [DEBUG] app - query task for "abcdef", ret:{"progress":0,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}
[2018-12-14T09:10:47.584] [DEBUG] app - user "abcdef" event "login" fired
[2018-12-14T09:10:47.586] [DEBUG] app - user "abcdef" event "login" fired
[2018-12-14T09:10:47.588] [DEBUG] app - query task for "abcdef", ret:{"progress":0,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}
[2018-12-14T09:10:47.588] [INFO] app - complete task {"progress":0,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1} with event "login"
[2018-12-14T09:10:47.591] [DEBUG] app - user "abcdef" event "login" fired
[2018-12-14T09:10:47.591] [DEBUG] app - query task for "abcdef", ret:{"progress":0,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}
[2018-12-14T09:10:47.592] [INFO] app - complete task {"progress":0,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1} with event "login"
[2018-12-14T09:10:47.595] [DEBUG] app - completeTask: {"n":1,"nModified":1,"opTime":{"ts":"6634650073366003714","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634650073366003714","$clusterTime":{"clusterTime":"6634650073366003714","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-14T09:10:47.597] [DEBUG] app - completeTask: {"n":1,"nModified":1,"opTime":{"ts":"6634650073366003715","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634650073366003715","$clusterTime":{"clusterTime":"6634650073366003715","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-14T09:10:47.600] [DEBUG] app - user "abcdef" event "login" fired
[2018-12-14T09:10:47.600] [DEBUG] app - query task for "abcdef", ret:{"progress":1,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}
[2018-12-14T09:10:47.601] [DEBUG] app - try complete full task. {"n":0,"nModified":0,"opTime":{"ts":"6634650073366003715","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634650073366003715","$clusterTime":{"clusterTime":"6634650073366003715","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-14T09:10:47.601] [INFO] app - complete task {"progress":1,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1} with event "login"
[2018-12-14T09:10:47.603] [DEBUG] app - try complete full task. {"n":0,"nModified":0,"opTime":{"ts":"6634650073366003715","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634650073366003715","$clusterTime":{"clusterTime":"6634650073366003715","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-14T09:10:47.605] [DEBUG] app - query task for "abcdef", ret:{"progress":2,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}
[2018-12-14T09:10:47.605] [DEBUG] app - completeTask: {"n":1,"nModified":1,"opTime":{"ts":"6634650073366003716","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634650073366003716","$clusterTime":{"clusterTime":"6634650073366003716","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-14T09:10:47.605] [INFO] app - complete task {"progress":2,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1} with event "login"
[2018-12-14T09:10:47.616] [DEBUG] app - try complete full task. {"n":1,"nModified":1,"opTime":{"ts":"6634650073366003717","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634650073366003717","$clusterTime":{"clusterTime":"6634650073366003717","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-14T09:10:47.616] [DEBUG] app - completeTask: {"n":0,"nModified":0,"opTime":{"ts":"6634650073366003717","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634650073366003717","$clusterTime":{"clusterTime":"6634650073366003717","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-14T09:10:47.617] [DEBUG] app - query task for "abcdef", ret:{"progress":-2,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}
[2018-12-14T09:10:47.619] [DEBUG] app - awardItems:[{"itemId":"1000","amount":100},{"itemId":"1200","amount":100}]
[2018-12-14T09:10:47.627] [DEBUG] app - awardItems insert return:[{"amount":100,"acquireTime":1544749847619,"expireTime":9007199254740991,"_id":"5c13031729cdc82280cfeb70","openId":"abcdef","itemId":"1000","__v":0},{"amount":100,"acquireTime":1544749847619,"expireTime":9007199254740991,"_id":"5c13031729cdc82280cfeb71","openId":"abcdef","itemId":"1200","__v":0}]
[2018-12-14T09:10:47.629] [DEBUG] app - assignTask:{"n":1,"nModified":1,"opTime":{"ts":"6634650073366003721","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634650073366003721","$clusterTime":{"clusterTime":"6634650073366003721","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-14T09:10:48.251] [DEBUG] app - createMenu:{"errcode":0,"errmsg":"ok"}
[2018-12-14T09:17:34.789] [DEBUG] app - starting "koa2" ...
[2018-12-14T09:17:34.800] [INFO] app - init mongoose "127.0.0.1":27017/"usercenter" ...
[2018-12-14T09:17:34.800] [DEBUG] app - mongodb connStr:"mongodb://127.0.0.1:27017/usercenter"
[2018-12-14T09:17:34.809] [DEBUG] app - create redis instance for "redis_cache"
[2018-12-14T09:17:34.811] [DEBUG] app - initRedisSession
[2018-12-14T09:17:34.812] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/manage/cdkeyHandler.js"  ...
[2018-12-14T09:17:34.823] [DEBUG] app - register handler method: "importCdkey" on "/manage/cdkeyHandler/importCdkey"
[2018-12-14T09:17:34.823] [DEBUG] app - register handler method: "genQrCode" on "/manage/cdkeyHandler/genQrCode"
[2018-12-14T09:17:34.824] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/manage/login.js"  ...
[2018-12-14T09:17:34.824] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/manage/login.js" to "/manage/login"
[2018-12-14T09:17:34.825] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/post.js"  ...
[2018-12-14T09:17:34.825] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/post.js" to "/post"
[2018-12-14T09:17:34.826] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/qrcode.js"  ...
[2018-12-14T09:17:34.826] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/qrcode.js" to "/qrcode"
[2018-12-14T09:17:34.832] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/redis.js"  ...
[2018-12-14T09:17:34.833] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/redis.js" to "/redis"
[2018-12-14T09:17:34.834] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/root.js"  ...
[2018-12-14T09:17:34.834] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/root.js" to "/"
[2018-12-14T09:17:34.834] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/drawAward.js"  ...
[2018-12-14T09:17:34.836] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/drawAward.js" to "/wxWeb/api/drawAward"
[2018-12-14T09:17:34.836] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/exchangeShopHandler.js"  ...
[2018-12-14T09:17:34.836] [DEBUG] app - register handler method: "queryOnSaleItemCount" on "/wxWeb/api/exchangeShopHandler/queryOnSaleItemCount"
[2018-12-14T09:17:34.837] [DEBUG] app - register handler method: "queryOnSaleItems" on "/wxWeb/api/exchangeShopHandler/queryOnSaleItems"
[2018-12-14T09:17:34.837] [DEBUG] app - register handler method: "exchangeItem" on "/wxWeb/api/exchangeShopHandler/exchangeItem"
[2018-12-14T09:17:34.837] [DEBUG] app - register handler method: "sendMessage" on "/wxWeb/api/exchangeShopHandler/sendMessage"
[2018-12-14T09:17:34.837] [DEBUG] app - register handler method: "markMessageRead" on "/wxWeb/api/exchangeShopHandler/markMessageRead"
[2018-12-14T09:17:34.837] [DEBUG] app - register handler method: "deleteMessage" on "/wxWeb/api/exchangeShopHandler/deleteMessage"
[2018-12-14T09:17:34.837] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/messageHandler.js"  ...
[2018-12-14T09:17:34.838] [DEBUG] app - register handler method: "getMessagePageCount" on "/wxWeb/api/messageHandler/getMessagePageCount"
[2018-12-14T09:17:34.838] [DEBUG] app - register handler method: "getMessagePage" on "/wxWeb/api/messageHandler/getMessagePage"
[2018-12-14T09:17:34.838] [DEBUG] app - register handler method: "sendMessage" on "/wxWeb/api/messageHandler/sendMessage"
[2018-12-14T09:17:34.839] [DEBUG] app - register handler method: "markMessageRead" on "/wxWeb/api/messageHandler/markMessageRead"
[2018-12-14T09:17:34.839] [DEBUG] app - register handler method: "deleteMessage" on "/wxWeb/api/messageHandler/deleteMessage"
[2018-12-14T09:17:34.839] [DEBUG] app - register handler method: "hasUnreadMessage" on "/wxWeb/api/messageHandler/hasUnreadMessage"
[2018-12-14T09:17:34.839] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/queryCdkeyUsage.js"  ...
[2018-12-14T09:17:34.840] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/queryCdkeyUsage.js" to "/wxWeb/api/queryCdkeyUsage"
[2018-12-14T09:17:34.840] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/queryUserStatus.js"  ...
[2018-12-14T09:17:34.844] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/queryUserStatus.js" to "/wxWeb/api/queryUserStatus"
[2018-12-14T09:17:34.844] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/smsHandler.js"  ...
[2018-12-14T09:17:34.845] [DEBUG] app - register handler method: "registerPhone" on "/wxWeb/api/smsHandler/registerPhone"
[2018-12-14T09:17:34.846] [DEBUG] app - register handler method: "getSmsCode" on "/wxWeb/api/smsHandler/getSmsCode"
[2018-12-14T09:17:34.846] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/taskHandler.js"  ...
[2018-12-14T09:17:34.847] [DEBUG] app - register handler method: "queryTaskList" on "/wxWeb/api/taskHandler/queryTaskList"
[2018-12-14T09:17:34.847] [DEBUG] app - register handler method: "rewardTask" on "/wxWeb/api/taskHandler/rewardTask"
[2018-12-14T09:17:34.847] [DEBUG] app - register handler method: "queryTaskInfo" on "/wxWeb/api/taskHandler/queryTaskInfo"
[2018-12-14T09:17:34.848] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/userHandler.js"  ...
[2018-12-14T09:17:34.848] [DEBUG] app - register handler method: "queryUserInfo" on "/wxWeb/api/userHandler/queryUserInfo"
[2018-12-14T09:17:34.849] [DEBUG] app - register handler method: "updateUserInfo" on "/wxWeb/api/userHandler/updateUserInfo"
[2018-12-14T09:17:34.849] [DEBUG] app - register handler method: "isAddressComplete" on "/wxWeb/api/userHandler/isAddressComplete"
[2018-12-14T09:17:34.849] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/scanActivity.js"  ...
[2018-12-14T09:17:34.850] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/scanActivity.js" to "/wxWeb/scanActivity"
[2018-12-14T09:17:34.850] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/wxAccess.js"  ...
[2018-12-14T09:17:34.851] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/wxAccess.js" to "/wxWeb/wxAccess"
[2018-12-14T09:17:34.851] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/wxLogin.js"  ...
[2018-12-14T09:17:34.852] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/wxLogin.js" to "/wxWeb/wxLogin"
[2018-12-14T09:17:34.853] [DEBUG] app - load dbJsonImpl "D:\\workspace\\koa2/dbJson/scanActivity.json" ...
[2018-12-14T09:17:34.855] [DEBUG] app - load dbJsonImpl "D:\\workspace\\koa2/dbJson/taskInfo.json" ...
[2018-12-14T09:17:34.856] [DEBUG] app - DummyService.start
[2018-12-14T09:17:34.858] [DEBUG] app - start scan activity
[2018-12-14T09:17:34.935] [DEBUG] app - register event: "login"
[2018-12-14T09:17:34.936] [DEBUG] app - register event: "completePersonInfo"
[2018-12-14T09:17:34.936] [DEBUG] app - register event: "share"
[2018-12-14T09:17:34.936] [DEBUG] app - register event: "acquirePoints"
[2018-12-14T09:17:34.936] [DEBUG] app - register event: "read"
[2018-12-14T09:17:34.942] [DEBUG] app - UserService.start
[2018-12-14T09:17:34.943] [DEBUG] app - WechatService.start
[2018-12-14T09:17:34.944] [DEBUG] app - DummyService.afterStart
[2018-12-14T09:17:34.944] [DEBUG] app - UserService.afterStart
[2018-12-14T09:17:34.944] [DEBUG] app - WechatService.afterStart
[2018-12-14T09:17:34.945] [INFO] app - app start from dir: "D:\\workspace\\koa2"
[2018-12-14T09:17:34.960] [INFO] app - redis "redis_cache" ready.
[2018-12-14T09:17:34.978] [INFO] app - mongoose connect successfully.
[2018-12-14T09:17:35.003] [DEBUG] app - assignTask:{"n":1,"nModified":1,"opTime":{"ts":"6634651821417693185","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634651821417693185","$clusterTime":{"clusterTime":"6634651821417693185","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-14T09:17:35.009] [DEBUG] app - query task for "abcdef", ret:{"progress":0,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}
[2018-12-14T09:17:35.010] [DEBUG] app - queryTaskList: {"code":0,"taskList":[{"taskId":1,"desc":"【任务描述】每日完成3次登录. taskGoal [taskType,param] , 指定任务类型及目标。任务有顺序，每次只有一个当前任务，完成了当前任务才能开启后续任务","goalSort":1,"goal":3,"resetDaily":true,"award":[1000,100,1200,100]},{"taskId":2,"desc":"【任务描述】 完成个人信息填写","goalSort":2,"goal":1,"resetDaily":false,"award":[1000,1000,1200,100]},{"taskId":3,"desc":"【任务描述】每日分享一次","goalSort":3,"goal":1,"resetDaily":true,"award":[1001,2,1200,100]},{"taskId":4,"desc":"【任务描述】获得积分超过600","goalSort":4,"goal":600,"resetDaily":true,"award":[1001,2,1200,100]},{"taskId":5,"desc":"【任务描述】获得积分超过1000","goalSort":4,"goal":1000,"resetDaily":true,"taskAward":[1001,2,1200,100]}],"currentTask":{"progress":0,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}}
[2018-12-14T09:17:35.015] [DEBUG] app - query task for "abcdef", ret:{"progress":0,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}
[2018-12-14T09:17:35.016] [DEBUG] app - user "abcdef" event "login" fired
[2018-12-14T09:17:35.018] [DEBUG] app - user "abcdef" event "login" fired
[2018-12-14T09:17:35.020] [DEBUG] app - query task for "abcdef", ret:{"progress":0,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}
[2018-12-14T09:17:35.020] [INFO] app - complete task {"progress":0,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1} with event "login"
[2018-12-14T09:17:35.029] [DEBUG] app - user "abcdef" event "login" fired
[2018-12-14T09:17:35.030] [DEBUG] app - query task for "abcdef", ret:{"progress":0,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}
[2018-12-14T09:17:35.030] [INFO] app - complete task {"progress":0,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1} with event "login"
[2018-12-14T09:17:35.033] [DEBUG] app - completeTask: {"n":1,"nModified":1,"opTime":{"ts":"6634651825712660481","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634651825712660481","$clusterTime":{"clusterTime":"6634651825712660481","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-14T09:17:35.035] [DEBUG] app - completeTask: {"n":1,"nModified":1,"opTime":{"ts":"6634651825712660482","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634651825712660482","$clusterTime":{"clusterTime":"6634651825712660482","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-14T09:17:35.038] [DEBUG] app - user "abcdef" event "login" fired
[2018-12-14T09:17:35.038] [DEBUG] app - query task for "abcdef", ret:{"progress":1,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}
[2018-12-14T09:17:35.039] [DEBUG] app - try complete full task. {"n":0,"nModified":0,"opTime":{"ts":"6634651825712660482","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634651825712660482","$clusterTime":{"clusterTime":"6634651825712660482","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-14T09:17:35.040] [INFO] app - complete task {"progress":1,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1} with event "login"
[2018-12-14T09:17:35.044] [DEBUG] app - try complete full task. {"n":0,"nModified":0,"opTime":{"ts":"6634651825712660482","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634651825712660482","$clusterTime":{"clusterTime":"6634651825712660482","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-14T09:17:35.045] [DEBUG] app - completeTask: {"n":1,"nModified":1,"opTime":{"ts":"6634651825712660483","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634651825712660483","$clusterTime":{"clusterTime":"6634651825712660483","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-14T09:17:35.047] [DEBUG] app - query task for "abcdef", ret:{"progress":2,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}
[2018-12-14T09:17:35.047] [INFO] app - complete task {"progress":2,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1} with event "login"
[2018-12-14T09:17:35.049] [DEBUG] app - try complete full task. {"n":1,"nModified":1,"opTime":{"ts":"6634651825712660484","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634651825712660484","$clusterTime":{"clusterTime":"6634651825712660484","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-14T09:17:35.050] [DEBUG] app - completeTask: {"n":0,"nModified":0,"opTime":{"ts":"6634651825712660484","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634651825712660484","$clusterTime":{"clusterTime":"6634651825712660484","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-14T09:17:35.051] [DEBUG] app - query task for "abcdef", ret:{"progress":-2,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}
[2018-12-14T09:17:35.053] [DEBUG] app - awardItems:[{"itemId":"1000","amount":100},{"itemId":"1200","amount":100}]
[2018-12-14T09:17:35.066] [DEBUG] app - awardItems insert return:[{"amount":100,"acquireTime":1544750255053,"expireTime":9007199254740991,"_id":"5c1304af887ece4a14b942af","openId":"abcdef","itemId":"1000","__v":0},{"amount":100,"acquireTime":1544750255053,"expireTime":9007199254740991,"_id":"5c1304af887ece4a14b942b0","openId":"abcdef","itemId":"1200","__v":0}]
[2018-12-14T09:17:35.069] [DEBUG] app - assignTask:{"n":1,"nModified":1,"opTime":{"ts":"6634651825712660488","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634651825712660488","$clusterTime":{"clusterTime":"6634651825712660488","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-14T09:17:35.750] [DEBUG] app - createMenu:{"errcode":0,"errmsg":"ok"}
[2018-12-14T09:18:42.452] [DEBUG] app - starting "koa2" ...
[2018-12-14T09:18:42.463] [INFO] app - init mongoose "127.0.0.1":27017/"usercenter" ...
[2018-12-14T09:18:42.464] [DEBUG] app - mongodb connStr:"mongodb://127.0.0.1:27017/usercenter"
[2018-12-14T09:18:42.474] [DEBUG] app - create redis instance for "redis_cache"
[2018-12-14T09:18:42.476] [DEBUG] app - initRedisSession
[2018-12-14T09:18:42.477] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/manage/cdkeyHandler.js"  ...
[2018-12-14T09:18:42.488] [DEBUG] app - register handler method: "importCdkey" on "/manage/cdkeyHandler/importCdkey"
[2018-12-14T09:18:42.489] [DEBUG] app - register handler method: "genQrCode" on "/manage/cdkeyHandler/genQrCode"
[2018-12-14T09:18:42.489] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/manage/login.js"  ...
[2018-12-14T09:18:42.490] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/manage/login.js" to "/manage/login"
[2018-12-14T09:18:42.490] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/post.js"  ...
[2018-12-14T09:18:42.491] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/post.js" to "/post"
[2018-12-14T09:18:42.491] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/qrcode.js"  ...
[2018-12-14T09:18:42.492] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/qrcode.js" to "/qrcode"
[2018-12-14T09:18:42.492] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/redis.js"  ...
[2018-12-14T09:18:42.493] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/redis.js" to "/redis"
[2018-12-14T09:18:42.493] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/root.js"  ...
[2018-12-14T09:18:42.494] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/root.js" to "/"
[2018-12-14T09:18:42.494] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/drawAward.js"  ...
[2018-12-14T09:18:42.495] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/drawAward.js" to "/wxWeb/api/drawAward"
[2018-12-14T09:18:42.495] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/exchangeShopHandler.js"  ...
[2018-12-14T09:18:42.495] [DEBUG] app - register handler method: "queryOnSaleItemCount" on "/wxWeb/api/exchangeShopHandler/queryOnSaleItemCount"
[2018-12-14T09:18:42.496] [DEBUG] app - register handler method: "queryOnSaleItems" on "/wxWeb/api/exchangeShopHandler/queryOnSaleItems"
[2018-12-14T09:18:42.496] [DEBUG] app - register handler method: "exchangeItem" on "/wxWeb/api/exchangeShopHandler/exchangeItem"
[2018-12-14T09:18:42.496] [DEBUG] app - register handler method: "sendMessage" on "/wxWeb/api/exchangeShopHandler/sendMessage"
[2018-12-14T09:18:42.496] [DEBUG] app - register handler method: "markMessageRead" on "/wxWeb/api/exchangeShopHandler/markMessageRead"
[2018-12-14T09:18:42.496] [DEBUG] app - register handler method: "deleteMessage" on "/wxWeb/api/exchangeShopHandler/deleteMessage"
[2018-12-14T09:18:42.496] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/messageHandler.js"  ...
[2018-12-14T09:18:42.497] [DEBUG] app - register handler method: "getMessagePageCount" on "/wxWeb/api/messageHandler/getMessagePageCount"
[2018-12-14T09:18:42.497] [DEBUG] app - register handler method: "getMessagePage" on "/wxWeb/api/messageHandler/getMessagePage"
[2018-12-14T09:18:42.497] [DEBUG] app - register handler method: "sendMessage" on "/wxWeb/api/messageHandler/sendMessage"
[2018-12-14T09:18:42.497] [DEBUG] app - register handler method: "markMessageRead" on "/wxWeb/api/messageHandler/markMessageRead"
[2018-12-14T09:18:42.498] [DEBUG] app - register handler method: "deleteMessage" on "/wxWeb/api/messageHandler/deleteMessage"
[2018-12-14T09:18:42.498] [DEBUG] app - register handler method: "hasUnreadMessage" on "/wxWeb/api/messageHandler/hasUnreadMessage"
[2018-12-14T09:18:42.498] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/queryCdkeyUsage.js"  ...
[2018-12-14T09:18:42.499] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/queryCdkeyUsage.js" to "/wxWeb/api/queryCdkeyUsage"
[2018-12-14T09:18:42.499] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/queryUserStatus.js"  ...
[2018-12-14T09:18:42.503] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/queryUserStatus.js" to "/wxWeb/api/queryUserStatus"
[2018-12-14T09:18:42.507] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/smsHandler.js"  ...
[2018-12-14T09:18:42.508] [DEBUG] app - register handler method: "registerPhone" on "/wxWeb/api/smsHandler/registerPhone"
[2018-12-14T09:18:42.508] [DEBUG] app - register handler method: "getSmsCode" on "/wxWeb/api/smsHandler/getSmsCode"
[2018-12-14T09:18:42.508] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/taskHandler.js"  ...
[2018-12-14T09:18:42.509] [DEBUG] app - register handler method: "queryTaskList" on "/wxWeb/api/taskHandler/queryTaskList"
[2018-12-14T09:18:42.509] [DEBUG] app - register handler method: "rewardTask" on "/wxWeb/api/taskHandler/rewardTask"
[2018-12-14T09:18:42.509] [DEBUG] app - register handler method: "queryTaskInfo" on "/wxWeb/api/taskHandler/queryTaskInfo"
[2018-12-14T09:18:42.509] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/userHandler.js"  ...
[2018-12-14T09:18:42.510] [DEBUG] app - register handler method: "queryUserInfo" on "/wxWeb/api/userHandler/queryUserInfo"
[2018-12-14T09:18:42.510] [DEBUG] app - register handler method: "updateUserInfo" on "/wxWeb/api/userHandler/updateUserInfo"
[2018-12-14T09:18:42.510] [DEBUG] app - register handler method: "isAddressComplete" on "/wxWeb/api/userHandler/isAddressComplete"
[2018-12-14T09:18:42.511] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/scanActivity.js"  ...
[2018-12-14T09:18:42.512] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/scanActivity.js" to "/wxWeb/scanActivity"
[2018-12-14T09:18:42.512] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/wxAccess.js"  ...
[2018-12-14T09:18:42.513] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/wxAccess.js" to "/wxWeb/wxAccess"
[2018-12-14T09:18:42.513] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/wxLogin.js"  ...
[2018-12-14T09:18:42.514] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/wxLogin.js" to "/wxWeb/wxLogin"
[2018-12-14T09:18:42.515] [DEBUG] app - load dbJsonImpl "D:\\workspace\\koa2/dbJson/scanActivity.json" ...
[2018-12-14T09:18:42.516] [DEBUG] app - load dbJsonImpl "D:\\workspace\\koa2/dbJson/taskInfo.json" ...
[2018-12-14T09:18:42.517] [DEBUG] app - DummyService.start
[2018-12-14T09:18:42.520] [DEBUG] app - start scan activity
[2018-12-14T09:18:42.592] [DEBUG] app - register event: "login"
[2018-12-14T09:18:42.593] [DEBUG] app - register event: "completePersonInfo"
[2018-12-14T09:18:42.593] [DEBUG] app - register event: "share"
[2018-12-14T09:18:42.593] [DEBUG] app - register event: "acquirePoints"
[2018-12-14T09:18:42.593] [DEBUG] app - register event: "read"
[2018-12-14T09:18:42.599] [DEBUG] app - UserService.start
[2018-12-14T09:18:42.600] [DEBUG] app - WechatService.start
[2018-12-14T09:18:42.601] [DEBUG] app - DummyService.afterStart
[2018-12-14T09:18:42.601] [DEBUG] app - UserService.afterStart
[2018-12-14T09:18:42.601] [DEBUG] app - WechatService.afterStart
[2018-12-14T09:18:42.601] [INFO] app - app start from dir: "D:\\workspace\\koa2"
[2018-12-14T09:18:42.617] [INFO] app - redis "redis_cache" ready.
[2018-12-14T09:18:42.638] [INFO] app - mongoose connect successfully.
[2018-12-14T09:18:42.662] [DEBUG] app - assignTask:{"n":1,"nModified":1,"opTime":{"ts":"6634652113475469313","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634652113475469313","$clusterTime":{"clusterTime":"6634652113475469313","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-14T09:18:42.667] [DEBUG] app - query task for "abcdef", ret:{"progress":0,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}
[2018-12-14T09:18:42.668] [DEBUG] app - queryTaskList: {"code":0,"taskList":[{"taskId":1,"desc":"【任务描述】每日完成3次登录. taskGoal [taskType,param] , 指定任务类型及目标。任务有顺序，每次只有一个当前任务，完成了当前任务才能开启后续任务","goalSort":1,"goal":3,"resetDaily":true,"award":[1000,100,1200,100]},{"taskId":2,"desc":"【任务描述】 完成个人信息填写","goalSort":2,"goal":1,"resetDaily":false,"award":[1000,1000,1200,100]},{"taskId":3,"desc":"【任务描述】每日分享一次","goalSort":3,"goal":1,"resetDaily":true,"award":[1001,2,1200,100]},{"taskId":4,"desc":"【任务描述】获得积分超过600","goalSort":4,"goal":600,"resetDaily":true,"award":[1001,2,1200,100]},{"taskId":5,"desc":"【任务描述】获得积分超过1000","goalSort":4,"goal":1000,"resetDaily":true,"taskAward":[1001,2,1200,100]}],"currentTask":{"progress":0,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}}
[2018-12-14T09:18:42.672] [DEBUG] app - query task for "abcdef", ret:{"progress":0,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}
[2018-12-14T09:18:42.674] [DEBUG] app - user "abcdef" event "login" fired
[2018-12-14T09:18:42.676] [DEBUG] app - user "abcdef" event "login" fired
[2018-12-14T09:18:42.678] [DEBUG] app - query task for "abcdef", ret:{"progress":0,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}
[2018-12-14T09:18:42.679] [INFO] app - complete task {"progress":0,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1} with event "login"
[2018-12-14T09:18:42.681] [DEBUG] app - user "abcdef" event "login" fired
[2018-12-14T09:18:42.682] [DEBUG] app - query task for "abcdef", ret:{"progress":0,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}
[2018-12-14T09:18:42.682] [INFO] app - complete task {"progress":0,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1} with event "login"
[2018-12-14T09:18:42.684] [DEBUG] app - completeTask: {"n":1,"nModified":1,"opTime":{"ts":"6634652113475469314","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634652113475469314","$clusterTime":{"clusterTime":"6634652113475469314","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-14T09:18:42.686] [DEBUG] app - completeTask: {"n":1,"nModified":1,"opTime":{"ts":"6634652113475469315","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634652113475469315","$clusterTime":{"clusterTime":"6634652113475469315","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-14T09:18:42.688] [DEBUG] app - user "abcdef" event "login" fired
[2018-12-14T09:18:42.688] [DEBUG] app - query task for "abcdef", ret:{"progress":1,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}
[2018-12-14T09:18:42.688] [DEBUG] app - try complete full task. {"n":0,"nModified":0,"opTime":{"ts":"6634652113475469315","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634652113475469315","$clusterTime":{"clusterTime":"6634652113475469315","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-14T09:18:42.689] [INFO] app - complete task {"progress":1,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1} with event "login"
[2018-12-14T09:18:42.690] [DEBUG] app - try complete full task. {"n":0,"nModified":0,"opTime":{"ts":"6634652113475469315","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634652113475469315","$clusterTime":{"clusterTime":"6634652113475469315","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-14T09:18:42.692] [DEBUG] app - completeTask: {"n":1,"nModified":1,"opTime":{"ts":"6634652113475469316","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634652113475469316","$clusterTime":{"clusterTime":"6634652113475469316","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-14T09:18:42.693] [DEBUG] app - query task for "abcdef", ret:{"progress":2,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}
[2018-12-14T09:18:42.694] [INFO] app - complete task {"progress":2,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1} with event "login"
[2018-12-14T09:18:42.697] [DEBUG] app - try complete full task. {"n":1,"nModified":1,"opTime":{"ts":"6634652113475469317","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634652113475469317","$clusterTime":{"clusterTime":"6634652113475469317","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-14T09:18:42.698] [DEBUG] app - completeTask: {"n":0,"nModified":0,"opTime":{"ts":"6634652113475469317","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634652113475469317","$clusterTime":{"clusterTime":"6634652113475469317","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-14T09:18:42.698] [DEBUG] app - query task for "abcdef", ret:{"progress":-2,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}
[2018-12-14T09:18:42.708] [DEBUG] app - awardItems:[{"itemId":"1000","amount":100},{"itemId":"1200","amount":100}]
[2018-12-14T09:18:42.717] [DEBUG] app - awardItems insert return:[{"amount":100,"acquireTime":1544750322709,"expireTime":9007199254740991,"_id":"5c1304f2bf8efa4598a95add","openId":"abcdef","itemId":"1000","__v":0},{"amount":100,"acquireTime":1544750322709,"expireTime":9007199254740991,"_id":"5c1304f2bf8efa4598a95ade","openId":"abcdef","itemId":"1200","__v":0}]
[2018-12-14T09:18:42.719] [DEBUG] app - assignTask:{"n":1,"nModified":1,"opTime":{"ts":"6634652113475469321","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634652113475469321","$clusterTime":{"clusterTime":"6634652113475469321","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-14T09:18:42.719] [DEBUG] app - go to next task. {"code":1}
[2018-12-14T09:18:43.385] [DEBUG] app - createMenu:{"errcode":0,"errmsg":"ok"}
[2018-12-14T09:20:05.039] [DEBUG] app - starting "koa2" ...
[2018-12-14T09:20:05.050] [INFO] app - init mongoose "127.0.0.1":27017/"usercenter" ...
[2018-12-14T09:20:05.050] [DEBUG] app - mongodb connStr:"mongodb://127.0.0.1:27017/usercenter"
[2018-12-14T09:20:05.059] [DEBUG] app - create redis instance for "redis_cache"
[2018-12-14T09:20:05.061] [DEBUG] app - initRedisSession
[2018-12-14T09:20:05.062] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/manage/cdkeyHandler.js"  ...
[2018-12-14T09:20:05.072] [DEBUG] app - register handler method: "importCdkey" on "/manage/cdkeyHandler/importCdkey"
[2018-12-14T09:20:05.073] [DEBUG] app - register handler method: "genQrCode" on "/manage/cdkeyHandler/genQrCode"
[2018-12-14T09:20:05.074] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/manage/login.js"  ...
[2018-12-14T09:20:05.074] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/manage/login.js" to "/manage/login"
[2018-12-14T09:20:05.075] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/post.js"  ...
[2018-12-14T09:20:05.082] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/post.js" to "/post"
[2018-12-14T09:20:05.082] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/qrcode.js"  ...
[2018-12-14T09:20:05.083] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/qrcode.js" to "/qrcode"
[2018-12-14T09:20:05.083] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/redis.js"  ...
[2018-12-14T09:20:05.084] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/redis.js" to "/redis"
[2018-12-14T09:20:05.085] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/root.js"  ...
[2018-12-14T09:20:05.085] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/root.js" to "/"
[2018-12-14T09:20:05.085] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/drawAward.js"  ...
[2018-12-14T09:20:05.086] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/drawAward.js" to "/wxWeb/api/drawAward"
[2018-12-14T09:20:05.086] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/exchangeShopHandler.js"  ...
[2018-12-14T09:20:05.087] [DEBUG] app - register handler method: "queryOnSaleItemCount" on "/wxWeb/api/exchangeShopHandler/queryOnSaleItemCount"
[2018-12-14T09:20:05.087] [DEBUG] app - register handler method: "queryOnSaleItems" on "/wxWeb/api/exchangeShopHandler/queryOnSaleItems"
[2018-12-14T09:20:05.087] [DEBUG] app - register handler method: "exchangeItem" on "/wxWeb/api/exchangeShopHandler/exchangeItem"
[2018-12-14T09:20:05.087] [DEBUG] app - register handler method: "sendMessage" on "/wxWeb/api/exchangeShopHandler/sendMessage"
[2018-12-14T09:20:05.088] [DEBUG] app - register handler method: "markMessageRead" on "/wxWeb/api/exchangeShopHandler/markMessageRead"
[2018-12-14T09:20:05.088] [DEBUG] app - register handler method: "deleteMessage" on "/wxWeb/api/exchangeShopHandler/deleteMessage"
[2018-12-14T09:20:05.088] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/messageHandler.js"  ...
[2018-12-14T09:20:05.088] [DEBUG] app - register handler method: "getMessagePageCount" on "/wxWeb/api/messageHandler/getMessagePageCount"
[2018-12-14T09:20:05.089] [DEBUG] app - register handler method: "getMessagePage" on "/wxWeb/api/messageHandler/getMessagePage"
[2018-12-14T09:20:05.089] [DEBUG] app - register handler method: "sendMessage" on "/wxWeb/api/messageHandler/sendMessage"
[2018-12-14T09:20:05.089] [DEBUG] app - register handler method: "markMessageRead" on "/wxWeb/api/messageHandler/markMessageRead"
[2018-12-14T09:20:05.089] [DEBUG] app - register handler method: "deleteMessage" on "/wxWeb/api/messageHandler/deleteMessage"
[2018-12-14T09:20:05.089] [DEBUG] app - register handler method: "hasUnreadMessage" on "/wxWeb/api/messageHandler/hasUnreadMessage"
[2018-12-14T09:20:05.089] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/queryCdkeyUsage.js"  ...
[2018-12-14T09:20:05.090] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/queryCdkeyUsage.js" to "/wxWeb/api/queryCdkeyUsage"
[2018-12-14T09:20:05.090] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/queryUserStatus.js"  ...
[2018-12-14T09:20:05.096] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/queryUserStatus.js" to "/wxWeb/api/queryUserStatus"
[2018-12-14T09:20:05.096] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/smsHandler.js"  ...
[2018-12-14T09:20:05.097] [DEBUG] app - register handler method: "registerPhone" on "/wxWeb/api/smsHandler/registerPhone"
[2018-12-14T09:20:05.097] [DEBUG] app - register handler method: "getSmsCode" on "/wxWeb/api/smsHandler/getSmsCode"
[2018-12-14T09:20:05.097] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/taskHandler.js"  ...
[2018-12-14T09:20:05.098] [DEBUG] app - register handler method: "queryTaskList" on "/wxWeb/api/taskHandler/queryTaskList"
[2018-12-14T09:20:05.099] [DEBUG] app - register handler method: "rewardTask" on "/wxWeb/api/taskHandler/rewardTask"
[2018-12-14T09:20:05.099] [DEBUG] app - register handler method: "queryTaskInfo" on "/wxWeb/api/taskHandler/queryTaskInfo"
[2018-12-14T09:20:05.100] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/userHandler.js"  ...
[2018-12-14T09:20:05.101] [DEBUG] app - register handler method: "queryUserInfo" on "/wxWeb/api/userHandler/queryUserInfo"
[2018-12-14T09:20:05.101] [DEBUG] app - register handler method: "updateUserInfo" on "/wxWeb/api/userHandler/updateUserInfo"
[2018-12-14T09:20:05.101] [DEBUG] app - register handler method: "isAddressComplete" on "/wxWeb/api/userHandler/isAddressComplete"
[2018-12-14T09:20:05.101] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/scanActivity.js"  ...
[2018-12-14T09:20:05.102] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/scanActivity.js" to "/wxWeb/scanActivity"
[2018-12-14T09:20:05.102] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/wxAccess.js"  ...
[2018-12-14T09:20:05.103] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/wxAccess.js" to "/wxWeb/wxAccess"
[2018-12-14T09:20:05.104] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/wxLogin.js"  ...
[2018-12-14T09:20:05.104] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/wxLogin.js" to "/wxWeb/wxLogin"
[2018-12-14T09:20:05.106] [DEBUG] app - load dbJsonImpl "D:\\workspace\\koa2/dbJson/scanActivity.json" ...
[2018-12-14T09:20:05.107] [DEBUG] app - load dbJsonImpl "D:\\workspace\\koa2/dbJson/taskInfo.json" ...
[2018-12-14T09:20:05.108] [DEBUG] app - DummyService.start
[2018-12-14T09:20:05.112] [DEBUG] app - start scan activity
[2018-12-14T09:20:05.188] [DEBUG] app - register event: "login"
[2018-12-14T09:20:05.188] [DEBUG] app - register event: "completePersonInfo"
[2018-12-14T09:20:05.188] [DEBUG] app - register event: "share"
[2018-12-14T09:20:05.188] [DEBUG] app - register event: "acquirePoints"
[2018-12-14T09:20:05.188] [DEBUG] app - register event: "read"
[2018-12-14T09:20:05.194] [DEBUG] app - UserService.start
[2018-12-14T09:20:05.196] [DEBUG] app - WechatService.start
[2018-12-14T09:20:05.196] [DEBUG] app - DummyService.afterStart
[2018-12-14T09:20:05.196] [DEBUG] app - UserService.afterStart
[2018-12-14T09:20:05.196] [DEBUG] app - WechatService.afterStart
[2018-12-14T09:20:05.196] [INFO] app - app start from dir: "D:\\workspace\\koa2"
[2018-12-14T09:20:05.211] [INFO] app - redis "redis_cache" ready.
[2018-12-14T09:20:05.237] [INFO] app - mongoose connect successfully.
[2018-12-14T09:20:05.261] [DEBUG] app - assignTask:{"n":1,"nModified":1,"opTime":{"ts":"6634652469957754881","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634652469957754881","$clusterTime":{"clusterTime":"6634652469957754881","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-14T09:20:05.267] [DEBUG] app - query task for "abcdef", ret:{"progress":0,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}
[2018-12-14T09:20:05.268] [DEBUG] app - queryTaskList: {"code":0,"taskList":[{"taskId":1,"desc":"【任务描述】每日完成3次登录. taskGoal [taskType,param] , 指定任务类型及目标。任务有顺序，每次只有一个当前任务，完成了当前任务才能开启后续任务","goalSort":1,"goal":3,"resetDaily":true,"award":[1000,100,1200,100]},{"taskId":2,"desc":"【任务描述】 完成个人信息填写","goalSort":2,"goal":1,"resetDaily":false,"award":[1000,1000,1200,100]},{"taskId":3,"desc":"【任务描述】每日分享一次","goalSort":3,"goal":1,"resetDaily":true,"award":[1001,2,1200,100]},{"taskId":4,"desc":"【任务描述】获得积分超过600","goalSort":4,"goal":600,"resetDaily":true,"award":[1001,2,1200,100]},{"taskId":5,"desc":"【任务描述】获得积分超过1000","goalSort":4,"goal":1000,"resetDaily":true,"taskAward":[1001,2,1200,100]}],"currentTask":{"progress":0,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}}
[2018-12-14T09:20:05.271] [DEBUG] app - query task for "abcdef", ret:{"progress":0,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}
[2018-12-14T09:20:05.273] [DEBUG] app - user "abcdef" event "login" fired
[2018-12-14T09:20:05.275] [DEBUG] app - user "abcdef" event "login" fired
[2018-12-14T09:20:05.278] [DEBUG] app - query task for "abcdef", ret:{"progress":0,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}
[2018-12-14T09:20:05.278] [INFO] app - complete task {"progress":0,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1} with event "login"
[2018-12-14T09:20:05.280] [DEBUG] app - user "abcdef" event "login" fired
[2018-12-14T09:20:05.280] [DEBUG] app - query task for "abcdef", ret:{"progress":0,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}
[2018-12-14T09:20:05.280] [INFO] app - complete task {"progress":0,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1} with event "login"
[2018-12-14T09:20:05.283] [DEBUG] app - completeTask: {"n":1,"nModified":1,"opTime":{"ts":"6634652469957754882","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634652469957754882","$clusterTime":{"clusterTime":"6634652469957754882","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-14T09:20:05.285] [DEBUG] app - completeTask: {"n":1,"nModified":1,"opTime":{"ts":"6634652469957754883","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634652469957754883","$clusterTime":{"clusterTime":"6634652469957754883","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-14T09:20:05.287] [DEBUG] app - user "abcdef" event "login" fired
[2018-12-14T09:20:05.295] [DEBUG] app - query task for "abcdef", ret:{"progress":1,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}
[2018-12-14T09:20:05.295] [DEBUG] app - try complete full task. {"n":0,"nModified":0,"opTime":{"ts":"6634652469957754883","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634652469957754883","$clusterTime":{"clusterTime":"6634652469957754883","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-14T09:20:05.296] [INFO] app - complete task {"progress":1,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1} with event "login"
[2018-12-14T09:20:05.298] [DEBUG] app - try complete full task. {"n":0,"nModified":0,"opTime":{"ts":"6634652469957754883","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634652469957754883","$clusterTime":{"clusterTime":"6634652469957754883","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-14T09:20:05.299] [DEBUG] app - query task for "abcdef", ret:{"progress":2,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}
[2018-12-14T09:20:05.300] [DEBUG] app - completeTask: {"n":1,"nModified":1,"opTime":{"ts":"6634652469957754884","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634652469957754884","$clusterTime":{"clusterTime":"6634652469957754884","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-14T09:20:05.300] [INFO] app - complete task {"progress":2,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1} with event "login"
[2018-12-14T09:20:05.305] [DEBUG] app - completeTask: {"n":0,"nModified":0,"opTime":{"ts":"6634652469957754885","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634652469957754885","$clusterTime":{"clusterTime":"6634652469957754885","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-14T09:20:05.305] [DEBUG] app - try complete full task. {"n":1,"nModified":1,"opTime":{"ts":"6634652469957754885","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634652469957754885","$clusterTime":{"clusterTime":"6634652469957754885","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-14T09:20:05.306] [DEBUG] app - query task for "abcdef", ret:{"progress":-2,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}
[2018-12-14T09:20:05.308] [DEBUG] app - awardItems:[{"itemId":"1000","amount":100},{"itemId":"1200","amount":100}]
[2018-12-14T09:20:05.317] [DEBUG] app - awardItems insert return:[{"amount":100,"acquireTime":1544750405308,"expireTime":9007199254740991,"_id":"5c1305455e87af5200a909cc","openId":"abcdef","itemId":"1000","__v":0},{"amount":100,"acquireTime":1544750405308,"expireTime":9007199254740991,"_id":"5c1305455e87af5200a909cd","openId":"abcdef","itemId":"1200","__v":0}]
[2018-12-14T09:20:05.319] [DEBUG] app - assignTask:{"n":1,"nModified":1,"opTime":{"ts":"6634652469957754889","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634652469957754889","$clusterTime":{"clusterTime":"6634652469957754889","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-14T09:20:05.320] [DEBUG] app - go to next task. {"code":0}
[2018-12-14T09:20:05.994] [DEBUG] app - createMenu:{"errcode":0,"errmsg":"ok"}
[2018-12-14T15:56:50.053] [DEBUG] app - starting "koa2" ...
[2018-12-14T15:56:50.063] [INFO] app - init mongoose "127.0.0.1":27017/"usercenter" ...
[2018-12-14T15:56:50.063] [DEBUG] app - mongodb connStr:"mongodb://127.0.0.1:27017/usercenter"
[2018-12-14T15:56:50.072] [DEBUG] app - create redis instance for "redis_cache"
[2018-12-14T15:56:50.074] [DEBUG] app - initRedisSession
[2018-12-14T15:56:50.075] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/manage/cdkeyHandler.js"  ...
[2018-12-14T15:56:50.086] [DEBUG] app - register handler method: "importCdkey" on "/manage/cdkeyHandler/importCdkey"
[2018-12-14T15:56:50.087] [DEBUG] app - register handler method: "genQrCode" on "/manage/cdkeyHandler/genQrCode"
[2018-12-14T15:56:50.088] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/manage/login.js"  ...
[2018-12-14T15:56:50.088] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/manage/login.js" to "/manage/login"
[2018-12-14T15:56:50.089] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/post.js"  ...
[2018-12-14T15:56:50.089] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/post.js" to "/post"
[2018-12-14T15:56:50.089] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/qrcode.js"  ...
[2018-12-14T15:56:50.090] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/qrcode.js" to "/qrcode"
[2018-12-14T15:56:50.090] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/redis.js"  ...
[2018-12-14T15:56:50.091] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/redis.js" to "/redis"
[2018-12-14T15:56:50.091] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/root.js"  ...
[2018-12-14T15:56:50.091] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/root.js" to "/"
[2018-12-14T15:56:50.092] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/drawAward.js"  ...
[2018-12-14T15:56:50.092] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/drawAward.js" to "/wxWeb/api/drawAward"
[2018-12-14T15:56:50.092] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/exchangeShopHandler.js"  ...
[2018-12-14T15:56:50.093] [DEBUG] app - register handler method: "queryOnSaleItemCount" on "/wxWeb/api/exchangeShopHandler/queryOnSaleItemCount"
[2018-12-14T15:56:50.093] [DEBUG] app - register handler method: "queryOnSaleItems" on "/wxWeb/api/exchangeShopHandler/queryOnSaleItems"
[2018-12-14T15:56:50.093] [DEBUG] app - register handler method: "exchangeItem" on "/wxWeb/api/exchangeShopHandler/exchangeItem"
[2018-12-14T15:56:50.093] [DEBUG] app - register handler method: "sendMessage" on "/wxWeb/api/exchangeShopHandler/sendMessage"
[2018-12-14T15:56:50.094] [DEBUG] app - register handler method: "markMessageRead" on "/wxWeb/api/exchangeShopHandler/markMessageRead"
[2018-12-14T15:56:50.094] [DEBUG] app - register handler method: "deleteMessage" on "/wxWeb/api/exchangeShopHandler/deleteMessage"
[2018-12-14T15:56:50.094] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/messageHandler.js"  ...
[2018-12-14T15:56:50.094] [DEBUG] app - register handler method: "getMessagePageCount" on "/wxWeb/api/messageHandler/getMessagePageCount"
[2018-12-14T15:56:50.095] [DEBUG] app - register handler method: "getMessagePage" on "/wxWeb/api/messageHandler/getMessagePage"
[2018-12-14T15:56:50.095] [DEBUG] app - register handler method: "sendMessage" on "/wxWeb/api/messageHandler/sendMessage"
[2018-12-14T15:56:50.095] [DEBUG] app - register handler method: "markMessageRead" on "/wxWeb/api/messageHandler/markMessageRead"
[2018-12-14T15:56:50.095] [DEBUG] app - register handler method: "deleteMessage" on "/wxWeb/api/messageHandler/deleteMessage"
[2018-12-14T15:56:50.095] [DEBUG] app - register handler method: "hasUnreadMessage" on "/wxWeb/api/messageHandler/hasUnreadMessage"
[2018-12-14T15:56:50.095] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/queryCdkeyUsage.js"  ...
[2018-12-14T15:56:50.096] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/queryCdkeyUsage.js" to "/wxWeb/api/queryCdkeyUsage"
[2018-12-14T15:56:50.096] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/queryUserStatus.js"  ...
[2018-12-14T15:56:50.100] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/queryUserStatus.js" to "/wxWeb/api/queryUserStatus"
[2018-12-14T15:56:50.100] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/smsHandler.js"  ...
[2018-12-14T15:56:50.101] [DEBUG] app - register handler method: "registerPhone" on "/wxWeb/api/smsHandler/registerPhone"
[2018-12-14T15:56:50.101] [DEBUG] app - register handler method: "getSmsCode" on "/wxWeb/api/smsHandler/getSmsCode"
[2018-12-14T15:56:50.101] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/taskHandler.js"  ...
[2018-12-14T15:56:50.102] [DEBUG] app - register handler method: "queryTaskList" on "/wxWeb/api/taskHandler/queryTaskList"
[2018-12-14T15:56:50.102] [DEBUG] app - register handler method: "rewardTask" on "/wxWeb/api/taskHandler/rewardTask"
[2018-12-14T15:56:50.102] [DEBUG] app - register handler method: "queryTaskInfo" on "/wxWeb/api/taskHandler/queryTaskInfo"
[2018-12-14T15:56:50.102] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/userHandler.js"  ...
[2018-12-14T15:56:50.103] [DEBUG] app - register handler method: "queryUserInfo" on "/wxWeb/api/userHandler/queryUserInfo"
[2018-12-14T15:56:50.103] [DEBUG] app - register handler method: "updateUserInfo" on "/wxWeb/api/userHandler/updateUserInfo"
[2018-12-14T15:56:50.104] [DEBUG] app - register handler method: "isAddressComplete" on "/wxWeb/api/userHandler/isAddressComplete"
[2018-12-14T15:56:50.104] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/scanActivity.js"  ...
[2018-12-14T15:56:50.113] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/scanActivity.js" to "/wxWeb/scanActivity"
[2018-12-14T15:56:50.113] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/wxAccess.js"  ...
[2018-12-14T15:56:50.114] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/wxAccess.js" to "/wxWeb/wxAccess"
[2018-12-14T15:56:50.114] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/wxLogin.js"  ...
[2018-12-14T15:56:50.115] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/wxLogin.js" to "/wxWeb/wxLogin"
[2018-12-14T15:56:50.117] [DEBUG] app - load dbJsonImpl "D:\\workspace\\koa2/dbJson/scanActivity.json" ...
[2018-12-14T15:56:50.118] [DEBUG] app - load dbJsonImpl "D:\\workspace\\koa2/dbJson/taskInfo.json" ...
[2018-12-14T15:56:50.119] [DEBUG] app - load dbJsonImpl "D:\\workspace\\koa2/dbJson/vipLevel.json" ...
[2018-12-14T15:56:50.120] [DEBUG] app - DummyService.start
[2018-12-14T15:56:50.122] [DEBUG] app - start scan activity
[2018-12-14T15:56:50.196] [DEBUG] app - register event: "login"
[2018-12-14T15:56:50.196] [DEBUG] app - register event: "completePersonInfo"
[2018-12-14T15:56:50.197] [DEBUG] app - register event: "share"
[2018-12-14T15:56:50.197] [DEBUG] app - register event: "acquirePoints"
[2018-12-14T15:56:50.197] [DEBUG] app - register event: "read"
[2018-12-14T15:56:50.197] [DEBUG] app - register event: "exchange"
[2018-12-14T15:56:50.203] [DEBUG] app - UserService.start
[2018-12-14T15:56:50.204] [DEBUG] app - WechatService.start
[2018-12-14T15:56:50.204] [DEBUG] app - DummyService.afterStart
[2018-12-14T15:56:50.204] [DEBUG] app - UserService.afterStart
[2018-12-14T15:56:50.205] [DEBUG] app - WechatService.afterStart
[2018-12-14T15:56:50.205] [INFO] app - app start from dir: "D:\\workspace\\koa2"
[2018-12-14T15:56:50.222] [INFO] app - redis "redis_cache" ready.
[2018-12-14T15:56:50.240] [INFO] app - mongoose connect successfully.
[2018-12-14T15:56:50.263] [DEBUG] app - assignTask:{"n":1,"nModified":1,"opTime":{"ts":"6634754711654236161","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634754711654236161","$clusterTime":{"clusterTime":"6634754711654236161","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-14T15:56:50.268] [DEBUG] app - query task for "abcdef", ret:{"progress":0,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}
[2018-12-14T15:56:50.269] [DEBUG] app - queryTaskList: {"code":0,"taskList":[{"taskId":1,"desc":"【任务描述】每日完成3次登录. taskGoal [taskType,param] , 指定任务类型及目标。任务有顺序，每次只有一个当前任务，完成了当前任务才能开启后续任务","goalSort":1,"goal":3,"resetDaily":true,"award":[1000,100,1200,100]},{"taskId":2,"desc":"【任务描述】 完成个人信息填写","goalSort":2,"goal":1,"resetDaily":false,"award":[1000,1000,1200,100]},{"taskId":3,"desc":"【任务描述】每日分享一次","goalSort":3,"goal":1,"resetDaily":true,"award":[1001,2,1200,100]},{"taskId":4,"desc":"【任务描述】获得积分超过600","goalSort":4,"goal":600,"resetDaily":true,"award":[1001,2,1200,100]},{"taskId":5,"desc":"【任务描述】获得积分超过1000","goalSort":4,"goal":1000,"resetDaily":true,"taskAward":[1001,2,1200,100]}],"currentTask":{"progress":0,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}}
[2018-12-14T15:56:50.276] [DEBUG] app - query task for "abcdef", ret:{"progress":0,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}
[2018-12-14T15:56:50.277] [DEBUG] app - user "abcdef" event "login" fired
[2018-12-14T15:56:50.278] [DEBUG] app - user "abcdef" event "login" fired
[2018-12-14T15:56:50.279] [DEBUG] app - query task for "abcdef", ret:{"progress":0,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}
[2018-12-14T15:56:50.280] [INFO] app - complete task {"progress":0,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1} with event "login"
[2018-12-14T15:56:50.282] [DEBUG] app - user "abcdef" event "login" fired
[2018-12-14T15:56:50.282] [DEBUG] app - query task for "abcdef", ret:{"progress":0,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}
[2018-12-14T15:56:50.282] [INFO] app - complete task {"progress":0,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1} with event "login"
[2018-12-14T15:56:50.284] [DEBUG] app - completeTask: {"n":1,"nModified":1,"opTime":{"ts":"6634754711654236162","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634754711654236162","$clusterTime":{"clusterTime":"6634754711654236162","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-14T15:56:50.286] [DEBUG] app - completeTask: {"n":1,"nModified":1,"opTime":{"ts":"6634754711654236163","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634754711654236163","$clusterTime":{"clusterTime":"6634754711654236163","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-14T15:56:50.289] [DEBUG] app - user "abcdef" event "login" fired
[2018-12-14T15:56:50.290] [DEBUG] app - query task for "abcdef", ret:{"progress":1,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}
[2018-12-14T15:56:50.297] [DEBUG] app - try complete full task. {"n":0,"nModified":0,"opTime":{"ts":"6634754711654236163","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634754711654236163","$clusterTime":{"clusterTime":"6634754711654236163","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-14T15:56:50.298] [INFO] app - complete task {"progress":1,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1} with event "login"
[2018-12-14T15:56:50.300] [DEBUG] app - try complete full task. {"n":0,"nModified":0,"opTime":{"ts":"6634754711654236163","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634754711654236163","$clusterTime":{"clusterTime":"6634754711654236163","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-14T15:56:50.302] [DEBUG] app - completeTask: {"n":1,"nModified":1,"opTime":{"ts":"6634754711654236164","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634754711654236164","$clusterTime":{"clusterTime":"6634754711654236164","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-14T15:56:50.304] [DEBUG] app - query task for "abcdef", ret:{"progress":2,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}
[2018-12-14T15:56:50.304] [INFO] app - complete task {"progress":2,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1} with event "login"
[2018-12-14T15:56:50.306] [DEBUG] app - try complete full task. {"n":1,"nModified":1,"opTime":{"ts":"6634754711654236165","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634754711654236165","$clusterTime":{"clusterTime":"6634754711654236165","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-14T15:56:50.307] [DEBUG] app - completeTask: {"n":0,"nModified":0,"opTime":{"ts":"6634754711654236165","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634754711654236165","$clusterTime":{"clusterTime":"6634754711654236165","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-14T15:56:50.308] [DEBUG] app - query task for "abcdef", ret:{"progress":-2,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}
[2018-12-14T15:56:50.310] [DEBUG] app - awardItems:[{"itemId":"1000","amount":100},{"itemId":"1200","amount":100}]
[2018-12-14T15:56:50.319] [DEBUG] app - awardItems insert return:[{"amount":100,"acquireTime":1544774210310,"expireTime":9007199254740991,"_id":"5c136242f9df1a0a38ad6cca","openId":"abcdef","itemId":"1000","__v":0},{"amount":100,"acquireTime":1544774210310,"expireTime":9007199254740991,"_id":"5c136242f9df1a0a38ad6ccb","openId":"abcdef","itemId":"1200","__v":0}]
[2018-12-14T15:56:50.321] [DEBUG] app - assignTask:{"n":1,"nModified":1,"opTime":{"ts":"6634754711654236169","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634754711654236169","$clusterTime":{"clusterTime":"6634754711654236169","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-14T15:56:50.322] [DEBUG] app - go to next task. {"code":0}
[2018-12-14T15:56:51.087] [DEBUG] app - createMenu:{"errcode":0,"errmsg":"ok"}
[2018-12-14T16:07:36.627] [DEBUG] app - starting "koa2" ...
[2018-12-14T16:07:36.637] [INFO] app - init mongoose "127.0.0.1":27017/"usercenter" ...
[2018-12-14T16:07:36.637] [DEBUG] app - mongodb connStr:"mongodb://127.0.0.1:27017/usercenter"
[2018-12-14T16:07:36.646] [DEBUG] app - create redis instance for "redis_cache"
[2018-12-14T16:07:36.649] [DEBUG] app - initRedisSession
[2018-12-14T16:07:36.650] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/manage/cdkeyHandler.js"  ...
[2018-12-14T16:07:36.660] [DEBUG] app - register handler method: "importCdkey" on "/manage/cdkeyHandler/importCdkey"
[2018-12-14T16:07:36.661] [DEBUG] app - register handler method: "genQrCode" on "/manage/cdkeyHandler/genQrCode"
[2018-12-14T16:07:36.661] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/manage/login.js"  ...
[2018-12-14T16:07:36.662] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/manage/login.js" to "/manage/login"
[2018-12-14T16:07:36.663] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/post.js"  ...
[2018-12-14T16:07:36.663] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/post.js" to "/post"
[2018-12-14T16:07:36.663] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/qrcode.js"  ...
[2018-12-14T16:07:36.664] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/qrcode.js" to "/qrcode"
[2018-12-14T16:07:36.664] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/redis.js"  ...
[2018-12-14T16:07:36.665] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/redis.js" to "/redis"
[2018-12-14T16:07:36.665] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/root.js"  ...
[2018-12-14T16:07:36.665] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/root.js" to "/"
[2018-12-14T16:07:36.666] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/drawAward.js"  ...
[2018-12-14T16:07:36.666] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/drawAward.js" to "/wxWeb/api/drawAward"
[2018-12-14T16:07:36.666] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/exchangeShopHandler.js"  ...
[2018-12-14T16:07:36.668] [DEBUG] app - register handler method: "queryOnSaleItemCount" on "/wxWeb/api/exchangeShopHandler/queryOnSaleItemCount"
[2018-12-14T16:07:36.674] [DEBUG] app - register handler method: "queryOnSaleItems" on "/wxWeb/api/exchangeShopHandler/queryOnSaleItems"
[2018-12-14T16:07:36.674] [DEBUG] app - register handler method: "exchangeItem" on "/wxWeb/api/exchangeShopHandler/exchangeItem"
[2018-12-14T16:07:36.674] [DEBUG] app - register handler method: "sendMessage" on "/wxWeb/api/exchangeShopHandler/sendMessage"
[2018-12-14T16:07:36.675] [DEBUG] app - register handler method: "markMessageRead" on "/wxWeb/api/exchangeShopHandler/markMessageRead"
[2018-12-14T16:07:36.675] [DEBUG] app - register handler method: "deleteMessage" on "/wxWeb/api/exchangeShopHandler/deleteMessage"
[2018-12-14T16:07:36.675] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/messageHandler.js"  ...
[2018-12-14T16:07:36.676] [DEBUG] app - register handler method: "getMessagePageCount" on "/wxWeb/api/messageHandler/getMessagePageCount"
[2018-12-14T16:07:36.676] [DEBUG] app - register handler method: "getMessagePage" on "/wxWeb/api/messageHandler/getMessagePage"
[2018-12-14T16:07:36.676] [DEBUG] app - register handler method: "sendMessage" on "/wxWeb/api/messageHandler/sendMessage"
[2018-12-14T16:07:36.676] [DEBUG] app - register handler method: "markMessageRead" on "/wxWeb/api/messageHandler/markMessageRead"
[2018-12-14T16:07:36.676] [DEBUG] app - register handler method: "deleteMessage" on "/wxWeb/api/messageHandler/deleteMessage"
[2018-12-14T16:07:36.676] [DEBUG] app - register handler method: "hasUnreadMessage" on "/wxWeb/api/messageHandler/hasUnreadMessage"
[2018-12-14T16:07:36.677] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/queryCdkeyUsage.js"  ...
[2018-12-14T16:07:36.677] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/queryCdkeyUsage.js" to "/wxWeb/api/queryCdkeyUsage"
[2018-12-14T16:07:36.677] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/queryUserStatus.js"  ...
[2018-12-14T16:07:36.678] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/queryUserStatus.js" to "/wxWeb/api/queryUserStatus"
[2018-12-14T16:07:36.678] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/smsHandler.js"  ...
[2018-12-14T16:07:36.679] [DEBUG] app - register handler method: "registerPhone" on "/wxWeb/api/smsHandler/registerPhone"
[2018-12-14T16:07:36.679] [DEBUG] app - register handler method: "getSmsCode" on "/wxWeb/api/smsHandler/getSmsCode"
[2018-12-14T16:07:36.679] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/taskHandler.js"  ...
[2018-12-14T16:07:36.680] [DEBUG] app - register handler method: "queryTaskList" on "/wxWeb/api/taskHandler/queryTaskList"
[2018-12-14T16:07:36.680] [DEBUG] app - register handler method: "rewardTask" on "/wxWeb/api/taskHandler/rewardTask"
[2018-12-14T16:07:36.680] [DEBUG] app - register handler method: "queryTaskInfo" on "/wxWeb/api/taskHandler/queryTaskInfo"
[2018-12-14T16:07:36.681] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/userHandler.js"  ...
[2018-12-14T16:07:36.681] [DEBUG] app - register handler method: "queryUserInfo" on "/wxWeb/api/userHandler/queryUserInfo"
[2018-12-14T16:07:36.681] [DEBUG] app - register handler method: "updateUserInfo" on "/wxWeb/api/userHandler/updateUserInfo"
[2018-12-14T16:07:36.681] [DEBUG] app - register handler method: "isAddressComplete" on "/wxWeb/api/userHandler/isAddressComplete"
[2018-12-14T16:07:36.682] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/scanActivity.js"  ...
[2018-12-14T16:07:36.683] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/scanActivity.js" to "/wxWeb/scanActivity"
[2018-12-14T16:07:36.683] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/wxAccess.js"  ...
[2018-12-14T16:07:36.684] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/wxAccess.js" to "/wxWeb/wxAccess"
[2018-12-14T16:07:36.684] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/wxLogin.js"  ...
[2018-12-14T16:07:36.685] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/wxLogin.js" to "/wxWeb/wxLogin"
[2018-12-14T16:07:36.687] [DEBUG] app - load dbJsonImpl "D:\\workspace\\koa2/dbJson/scanActivity.json" ...
[2018-12-14T16:07:36.688] [DEBUG] app - load dbJsonImpl "D:\\workspace\\koa2/dbJson/taskInfo.json" ...
[2018-12-14T16:07:36.689] [DEBUG] app - load dbJsonImpl "D:\\workspace\\koa2/dbJson/vipLevel.json" ...
[2018-12-14T16:07:36.690] [DEBUG] app - DummyService.start
[2018-12-14T16:07:36.692] [DEBUG] app - start scan activity
[2018-12-14T16:07:36.730] [DEBUG] app - register event: "login"
[2018-12-14T16:07:36.731] [DEBUG] app - register event: "completePersonInfo"
[2018-12-14T16:07:36.731] [DEBUG] app - register event: "share"
[2018-12-14T16:07:36.731] [DEBUG] app - register event: "acquirePoints"
[2018-12-14T16:07:36.731] [DEBUG] app - register event: "read"
[2018-12-14T16:07:36.731] [DEBUG] app - register event: "exchange"
[2018-12-14T16:07:36.737] [DEBUG] app - UserService.start
[2018-12-14T16:07:36.738] [DEBUG] app - WechatService.start
[2018-12-14T16:07:36.738] [DEBUG] app - DummyService.afterStart
[2018-12-14T16:07:36.739] [DEBUG] app - UserService.afterStart
[2018-12-14T16:07:36.739] [DEBUG] app - WechatService.afterStart
[2018-12-14T16:07:36.739] [INFO] app - app start from dir: "D:\\workspace\\koa2"
[2018-12-14T16:07:36.757] [INFO] app - redis "redis_cache" ready.
[2018-12-14T16:07:36.783] [INFO] app - mongoose connect successfully.
[2018-12-14T16:07:36.789] [DEBUG] app - createUser:{"openId":"abcdef","nickName":"haha","sex":1}
[2018-12-14T16:07:36.876] [INFO] app - createUser: "abcdef","haha",1
[2018-12-14T16:07:37.940] [DEBUG] app - createMenu:{"errcode":0,"errmsg":"ok"}
[2018-12-14T16:08:10.843] [DEBUG] app - starting "koa2" ...
[2018-12-14T16:08:10.854] [INFO] app - init mongoose "127.0.0.1":27017/"usercenter" ...
[2018-12-14T16:08:10.854] [DEBUG] app - mongodb connStr:"mongodb://127.0.0.1:27017/usercenter"
[2018-12-14T16:08:10.863] [DEBUG] app - create redis instance for "redis_cache"
[2018-12-14T16:08:10.865] [DEBUG] app - initRedisSession
[2018-12-14T16:08:10.867] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/manage/cdkeyHandler.js"  ...
[2018-12-14T16:08:10.876] [DEBUG] app - register handler method: "importCdkey" on "/manage/cdkeyHandler/importCdkey"
[2018-12-14T16:08:10.877] [DEBUG] app - register handler method: "genQrCode" on "/manage/cdkeyHandler/genQrCode"
[2018-12-14T16:08:10.878] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/manage/login.js"  ...
[2018-12-14T16:08:10.878] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/manage/login.js" to "/manage/login"
[2018-12-14T16:08:10.878] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/post.js"  ...
[2018-12-14T16:08:10.879] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/post.js" to "/post"
[2018-12-14T16:08:10.879] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/qrcode.js"  ...
[2018-12-14T16:08:10.880] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/qrcode.js" to "/qrcode"
[2018-12-14T16:08:10.880] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/redis.js"  ...
[2018-12-14T16:08:10.881] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/redis.js" to "/redis"
[2018-12-14T16:08:10.881] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/root.js"  ...
[2018-12-14T16:08:10.881] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/root.js" to "/"
[2018-12-14T16:08:10.882] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/drawAward.js"  ...
[2018-12-14T16:08:10.882] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/drawAward.js" to "/wxWeb/api/drawAward"
[2018-12-14T16:08:10.883] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/exchangeShopHandler.js"  ...
[2018-12-14T16:08:10.883] [DEBUG] app - register handler method: "queryOnSaleItemCount" on "/wxWeb/api/exchangeShopHandler/queryOnSaleItemCount"
[2018-12-14T16:08:10.884] [DEBUG] app - register handler method: "queryOnSaleItems" on "/wxWeb/api/exchangeShopHandler/queryOnSaleItems"
[2018-12-14T16:08:10.884] [DEBUG] app - register handler method: "exchangeItem" on "/wxWeb/api/exchangeShopHandler/exchangeItem"
[2018-12-14T16:08:10.884] [DEBUG] app - register handler method: "sendMessage" on "/wxWeb/api/exchangeShopHandler/sendMessage"
[2018-12-14T16:08:10.884] [DEBUG] app - register handler method: "markMessageRead" on "/wxWeb/api/exchangeShopHandler/markMessageRead"
[2018-12-14T16:08:10.885] [DEBUG] app - register handler method: "deleteMessage" on "/wxWeb/api/exchangeShopHandler/deleteMessage"
[2018-12-14T16:08:10.885] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/messageHandler.js"  ...
[2018-12-14T16:08:10.886] [DEBUG] app - register handler method: "getMessagePageCount" on "/wxWeb/api/messageHandler/getMessagePageCount"
[2018-12-14T16:08:10.886] [DEBUG] app - register handler method: "getMessagePage" on "/wxWeb/api/messageHandler/getMessagePage"
[2018-12-14T16:08:10.886] [DEBUG] app - register handler method: "sendMessage" on "/wxWeb/api/messageHandler/sendMessage"
[2018-12-14T16:08:10.886] [DEBUG] app - register handler method: "markMessageRead" on "/wxWeb/api/messageHandler/markMessageRead"
[2018-12-14T16:08:10.886] [DEBUG] app - register handler method: "deleteMessage" on "/wxWeb/api/messageHandler/deleteMessage"
[2018-12-14T16:08:10.886] [DEBUG] app - register handler method: "hasUnreadMessage" on "/wxWeb/api/messageHandler/hasUnreadMessage"
[2018-12-14T16:08:10.887] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/queryCdkeyUsage.js"  ...
[2018-12-14T16:08:10.888] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/queryCdkeyUsage.js" to "/wxWeb/api/queryCdkeyUsage"
[2018-12-14T16:08:10.888] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/queryUserStatus.js"  ...
[2018-12-14T16:08:10.888] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/queryUserStatus.js" to "/wxWeb/api/queryUserStatus"
[2018-12-14T16:08:10.889] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/smsHandler.js"  ...
[2018-12-14T16:08:10.889] [DEBUG] app - register handler method: "registerPhone" on "/wxWeb/api/smsHandler/registerPhone"
[2018-12-14T16:08:10.889] [DEBUG] app - register handler method: "getSmsCode" on "/wxWeb/api/smsHandler/getSmsCode"
[2018-12-14T16:08:10.889] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/taskHandler.js"  ...
[2018-12-14T16:08:10.890] [DEBUG] app - register handler method: "queryTaskList" on "/wxWeb/api/taskHandler/queryTaskList"
[2018-12-14T16:08:10.890] [DEBUG] app - register handler method: "rewardTask" on "/wxWeb/api/taskHandler/rewardTask"
[2018-12-14T16:08:10.890] [DEBUG] app - register handler method: "queryTaskInfo" on "/wxWeb/api/taskHandler/queryTaskInfo"
[2018-12-14T16:08:10.890] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/userHandler.js"  ...
[2018-12-14T16:08:10.891] [DEBUG] app - register handler method: "queryUserInfo" on "/wxWeb/api/userHandler/queryUserInfo"
[2018-12-14T16:08:10.891] [DEBUG] app - register handler method: "updateUserInfo" on "/wxWeb/api/userHandler/updateUserInfo"
[2018-12-14T16:08:10.891] [DEBUG] app - register handler method: "isAddressComplete" on "/wxWeb/api/userHandler/isAddressComplete"
[2018-12-14T16:08:10.891] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/scanActivity.js"  ...
[2018-12-14T16:08:10.892] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/scanActivity.js" to "/wxWeb/scanActivity"
[2018-12-14T16:08:10.892] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/wxAccess.js"  ...
[2018-12-14T16:08:10.893] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/wxAccess.js" to "/wxWeb/wxAccess"
[2018-12-14T16:08:10.893] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/wxLogin.js"  ...
[2018-12-14T16:08:10.894] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/wxLogin.js" to "/wxWeb/wxLogin"
[2018-12-14T16:08:10.895] [DEBUG] app - load dbJsonImpl "D:\\workspace\\koa2/dbJson/scanActivity.json" ...
[2018-12-14T16:08:10.896] [DEBUG] app - load dbJsonImpl "D:\\workspace\\koa2/dbJson/taskInfo.json" ...
[2018-12-14T16:08:10.897] [DEBUG] app - load dbJsonImpl "D:\\workspace\\koa2/dbJson/vipLevel.json" ...
[2018-12-14T16:08:10.898] [DEBUG] app - DummyService.start
[2018-12-14T16:08:10.900] [DEBUG] app - start scan activity
[2018-12-14T16:08:10.944] [DEBUG] app - register event: "login"
[2018-12-14T16:08:10.945] [DEBUG] app - register event: "completePersonInfo"
[2018-12-14T16:08:10.945] [DEBUG] app - register event: "share"
[2018-12-14T16:08:10.945] [DEBUG] app - register event: "acquirePoints"
[2018-12-14T16:08:10.946] [DEBUG] app - register event: "read"
[2018-12-14T16:08:10.946] [DEBUG] app - register event: "exchange"
[2018-12-14T16:08:10.952] [DEBUG] app - UserService.start
[2018-12-14T16:08:10.953] [DEBUG] app - WechatService.start
[2018-12-14T16:08:10.953] [DEBUG] app - DummyService.afterStart
[2018-12-14T16:08:10.954] [DEBUG] app - UserService.afterStart
[2018-12-14T16:08:10.954] [DEBUG] app - WechatService.afterStart
[2018-12-14T16:08:10.954] [INFO] app - app start from dir: "D:\\workspace\\koa2"
[2018-12-14T16:08:10.976] [INFO] app - redis "redis_cache" ready.
[2018-12-14T16:08:11.004] [DEBUG] app - createUser:{"openId":"abcdef","nickName":"haha","sex":1}
[2018-12-14T16:08:11.014] [INFO] app - mongoose connect successfully.
[2018-12-14T16:08:11.680] [DEBUG] app - createMenu:{"errcode":0,"errmsg":"ok"}
[2018-12-14T16:10:08.092] [DEBUG] app - starting "koa2" ...
[2018-12-14T16:10:08.104] [INFO] app - init mongoose "127.0.0.1":27017/"usercenter" ...
[2018-12-14T16:10:08.105] [DEBUG] app - mongodb connStr:"mongodb://127.0.0.1:27017/usercenter"
[2018-12-14T16:10:08.114] [DEBUG] app - create redis instance for "redis_cache"
[2018-12-14T16:10:08.116] [DEBUG] app - initRedisSession
[2018-12-14T16:10:08.117] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/manage/cdkeyHandler.js"  ...
[2018-12-14T16:10:08.128] [DEBUG] app - register handler method: "importCdkey" on "/manage/cdkeyHandler/importCdkey"
[2018-12-14T16:10:08.129] [DEBUG] app - register handler method: "genQrCode" on "/manage/cdkeyHandler/genQrCode"
[2018-12-14T16:10:08.130] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/manage/login.js"  ...
[2018-12-14T16:10:08.130] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/manage/login.js" to "/manage/login"
[2018-12-14T16:10:08.131] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/post.js"  ...
[2018-12-14T16:10:08.131] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/post.js" to "/post"
[2018-12-14T16:10:08.131] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/qrcode.js"  ...
[2018-12-14T16:10:08.132] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/qrcode.js" to "/qrcode"
[2018-12-14T16:10:08.133] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/redis.js"  ...
[2018-12-14T16:10:08.133] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/redis.js" to "/redis"
[2018-12-14T16:10:08.133] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/root.js"  ...
[2018-12-14T16:10:08.134] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/root.js" to "/"
[2018-12-14T16:10:08.134] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/drawAward.js"  ...
[2018-12-14T16:10:08.135] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/drawAward.js" to "/wxWeb/api/drawAward"
[2018-12-14T16:10:08.135] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/exchangeShopHandler.js"  ...
[2018-12-14T16:10:08.136] [DEBUG] app - register handler method: "queryOnSaleItemCount" on "/wxWeb/api/exchangeShopHandler/queryOnSaleItemCount"
[2018-12-14T16:10:08.136] [DEBUG] app - register handler method: "queryOnSaleItems" on "/wxWeb/api/exchangeShopHandler/queryOnSaleItems"
[2018-12-14T16:10:08.136] [DEBUG] app - register handler method: "exchangeItem" on "/wxWeb/api/exchangeShopHandler/exchangeItem"
[2018-12-14T16:10:08.136] [DEBUG] app - register handler method: "sendMessage" on "/wxWeb/api/exchangeShopHandler/sendMessage"
[2018-12-14T16:10:08.137] [DEBUG] app - register handler method: "markMessageRead" on "/wxWeb/api/exchangeShopHandler/markMessageRead"
[2018-12-14T16:10:08.137] [DEBUG] app - register handler method: "deleteMessage" on "/wxWeb/api/exchangeShopHandler/deleteMessage"
[2018-12-14T16:10:08.137] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/messageHandler.js"  ...
[2018-12-14T16:10:08.138] [DEBUG] app - register handler method: "getMessagePageCount" on "/wxWeb/api/messageHandler/getMessagePageCount"
[2018-12-14T16:10:08.138] [DEBUG] app - register handler method: "getMessagePage" on "/wxWeb/api/messageHandler/getMessagePage"
[2018-12-14T16:10:08.139] [DEBUG] app - register handler method: "sendMessage" on "/wxWeb/api/messageHandler/sendMessage"
[2018-12-14T16:10:08.139] [DEBUG] app - register handler method: "markMessageRead" on "/wxWeb/api/messageHandler/markMessageRead"
[2018-12-14T16:10:08.139] [DEBUG] app - register handler method: "deleteMessage" on "/wxWeb/api/messageHandler/deleteMessage"
[2018-12-14T16:10:08.139] [DEBUG] app - register handler method: "hasUnreadMessage" on "/wxWeb/api/messageHandler/hasUnreadMessage"
[2018-12-14T16:10:08.139] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/queryCdkeyUsage.js"  ...
[2018-12-14T16:10:08.140] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/queryCdkeyUsage.js" to "/wxWeb/api/queryCdkeyUsage"
[2018-12-14T16:10:08.140] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/queryUserStatus.js"  ...
[2018-12-14T16:10:08.141] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/queryUserStatus.js" to "/wxWeb/api/queryUserStatus"
[2018-12-14T16:10:08.141] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/smsHandler.js"  ...
[2018-12-14T16:10:08.141] [DEBUG] app - register handler method: "registerPhone" on "/wxWeb/api/smsHandler/registerPhone"
[2018-12-14T16:10:08.142] [DEBUG] app - register handler method: "getSmsCode" on "/wxWeb/api/smsHandler/getSmsCode"
[2018-12-14T16:10:08.142] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/taskHandler.js"  ...
[2018-12-14T16:10:08.142] [DEBUG] app - register handler method: "queryTaskList" on "/wxWeb/api/taskHandler/queryTaskList"
[2018-12-14T16:10:08.143] [DEBUG] app - register handler method: "rewardTask" on "/wxWeb/api/taskHandler/rewardTask"
[2018-12-14T16:10:08.143] [DEBUG] app - register handler method: "queryTaskInfo" on "/wxWeb/api/taskHandler/queryTaskInfo"
[2018-12-14T16:10:08.143] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/userHandler.js"  ...
[2018-12-14T16:10:08.143] [DEBUG] app - register handler method: "queryUserInfo" on "/wxWeb/api/userHandler/queryUserInfo"
[2018-12-14T16:10:08.144] [DEBUG] app - register handler method: "updateUserInfo" on "/wxWeb/api/userHandler/updateUserInfo"
[2018-12-14T16:10:08.144] [DEBUG] app - register handler method: "isAddressComplete" on "/wxWeb/api/userHandler/isAddressComplete"
[2018-12-14T16:10:08.144] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/scanActivity.js"  ...
[2018-12-14T16:10:08.145] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/scanActivity.js" to "/wxWeb/scanActivity"
[2018-12-14T16:10:08.146] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/wxAccess.js"  ...
[2018-12-14T16:10:08.148] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/wxAccess.js" to "/wxWeb/wxAccess"
[2018-12-14T16:10:08.148] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/wxLogin.js"  ...
[2018-12-14T16:10:08.149] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/wxLogin.js" to "/wxWeb/wxLogin"
[2018-12-14T16:10:08.150] [DEBUG] app - load dbJsonImpl "D:\\workspace\\koa2/dbJson/scanActivity.json" ...
[2018-12-14T16:10:08.152] [DEBUG] app - load dbJsonImpl "D:\\workspace\\koa2/dbJson/taskInfo.json" ...
[2018-12-14T16:10:08.153] [DEBUG] app - load dbJsonImpl "D:\\workspace\\koa2/dbJson/vipLevel.json" ...
[2018-12-14T16:10:08.154] [DEBUG] app - DummyService.start
[2018-12-14T16:10:08.156] [DEBUG] app - start scan activity
[2018-12-14T16:10:08.202] [DEBUG] app - register event: "login"
[2018-12-14T16:10:08.202] [DEBUG] app - register event: "completePersonInfo"
[2018-12-14T16:10:08.202] [DEBUG] app - register event: "share"
[2018-12-14T16:10:08.202] [DEBUG] app - register event: "acquirePoints"
[2018-12-14T16:10:08.202] [DEBUG] app - register event: "read"
[2018-12-14T16:10:08.203] [DEBUG] app - register event: "exchange"
[2018-12-14T16:10:08.209] [DEBUG] app - UserService.start
[2018-12-14T16:10:08.210] [DEBUG] app - WechatService.start
[2018-12-14T16:10:08.210] [DEBUG] app - DummyService.afterStart
[2018-12-14T16:10:08.217] [DEBUG] app - UserService.afterStart
[2018-12-14T16:10:08.217] [DEBUG] app - WechatService.afterStart
[2018-12-14T16:10:08.218] [INFO] app - app start from dir: "D:\\workspace\\koa2"
[2018-12-14T16:10:08.236] [INFO] app - redis "redis_cache" ready.
[2018-12-14T16:10:08.260] [INFO] app - mongoose connect successfully.
[2018-12-14T16:10:08.267] [DEBUG] app - createUser:{"openId":"abcdef","nickName":"haha","sex":1}
[2018-12-14T16:10:08.973] [DEBUG] app - createMenu:{"errcode":0,"errmsg":"ok"}
[2018-12-14T16:10:54.113] [DEBUG] app - starting "koa2" ...
[2018-12-14T16:10:54.123] [INFO] app - init mongoose "127.0.0.1":27017/"usercenter" ...
[2018-12-14T16:10:54.123] [DEBUG] app - mongodb connStr:"mongodb://127.0.0.1:27017/usercenter"
[2018-12-14T16:10:54.141] [DEBUG] app - create redis instance for "redis_cache"
[2018-12-14T16:10:54.142] [DEBUG] app - initRedisSession
[2018-12-14T16:10:54.144] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/manage/cdkeyHandler.js"  ...
[2018-12-14T16:10:54.153] [DEBUG] app - register handler method: "importCdkey" on "/manage/cdkeyHandler/importCdkey"
[2018-12-14T16:10:54.154] [DEBUG] app - register handler method: "genQrCode" on "/manage/cdkeyHandler/genQrCode"
[2018-12-14T16:10:54.155] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/manage/login.js"  ...
[2018-12-14T16:10:54.155] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/manage/login.js" to "/manage/login"
[2018-12-14T16:10:54.155] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/post.js"  ...
[2018-12-14T16:10:54.156] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/post.js" to "/post"
[2018-12-14T16:10:54.156] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/qrcode.js"  ...
[2018-12-14T16:10:54.157] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/qrcode.js" to "/qrcode"
[2018-12-14T16:10:54.157] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/redis.js"  ...
[2018-12-14T16:10:54.158] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/redis.js" to "/redis"
[2018-12-14T16:10:54.158] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/root.js"  ...
[2018-12-14T16:10:54.158] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/root.js" to "/"
[2018-12-14T16:10:54.159] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/drawAward.js"  ...
[2018-12-14T16:10:54.159] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/drawAward.js" to "/wxWeb/api/drawAward"
[2018-12-14T16:10:54.159] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/exchangeShopHandler.js"  ...
[2018-12-14T16:10:54.160] [DEBUG] app - register handler method: "queryOnSaleItemCount" on "/wxWeb/api/exchangeShopHandler/queryOnSaleItemCount"
[2018-12-14T16:10:54.160] [DEBUG] app - register handler method: "queryOnSaleItems" on "/wxWeb/api/exchangeShopHandler/queryOnSaleItems"
[2018-12-14T16:10:54.160] [DEBUG] app - register handler method: "exchangeItem" on "/wxWeb/api/exchangeShopHandler/exchangeItem"
[2018-12-14T16:10:54.161] [DEBUG] app - register handler method: "sendMessage" on "/wxWeb/api/exchangeShopHandler/sendMessage"
[2018-12-14T16:10:54.161] [DEBUG] app - register handler method: "markMessageRead" on "/wxWeb/api/exchangeShopHandler/markMessageRead"
[2018-12-14T16:10:54.161] [DEBUG] app - register handler method: "deleteMessage" on "/wxWeb/api/exchangeShopHandler/deleteMessage"
[2018-12-14T16:10:54.161] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/messageHandler.js"  ...
[2018-12-14T16:10:54.162] [DEBUG] app - register handler method: "getMessagePageCount" on "/wxWeb/api/messageHandler/getMessagePageCount"
[2018-12-14T16:10:54.162] [DEBUG] app - register handler method: "getMessagePage" on "/wxWeb/api/messageHandler/getMessagePage"
[2018-12-14T16:10:54.163] [DEBUG] app - register handler method: "sendMessage" on "/wxWeb/api/messageHandler/sendMessage"
[2018-12-14T16:10:54.163] [DEBUG] app - register handler method: "markMessageRead" on "/wxWeb/api/messageHandler/markMessageRead"
[2018-12-14T16:10:54.163] [DEBUG] app - register handler method: "deleteMessage" on "/wxWeb/api/messageHandler/deleteMessage"
[2018-12-14T16:10:54.163] [DEBUG] app - register handler method: "hasUnreadMessage" on "/wxWeb/api/messageHandler/hasUnreadMessage"
[2018-12-14T16:10:54.164] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/queryCdkeyUsage.js"  ...
[2018-12-14T16:10:54.164] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/queryCdkeyUsage.js" to "/wxWeb/api/queryCdkeyUsage"
[2018-12-14T16:10:54.164] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/queryUserStatus.js"  ...
[2018-12-14T16:10:54.165] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/queryUserStatus.js" to "/wxWeb/api/queryUserStatus"
[2018-12-14T16:10:54.165] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/smsHandler.js"  ...
[2018-12-14T16:10:54.166] [DEBUG] app - register handler method: "registerPhone" on "/wxWeb/api/smsHandler/registerPhone"
[2018-12-14T16:10:54.166] [DEBUG] app - register handler method: "getSmsCode" on "/wxWeb/api/smsHandler/getSmsCode"
[2018-12-14T16:10:54.166] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/taskHandler.js"  ...
[2018-12-14T16:10:54.173] [DEBUG] app - register handler method: "queryTaskList" on "/wxWeb/api/taskHandler/queryTaskList"
[2018-12-14T16:10:54.174] [DEBUG] app - register handler method: "rewardTask" on "/wxWeb/api/taskHandler/rewardTask"
[2018-12-14T16:10:54.174] [DEBUG] app - register handler method: "queryTaskInfo" on "/wxWeb/api/taskHandler/queryTaskInfo"
[2018-12-14T16:10:54.174] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/userHandler.js"  ...
[2018-12-14T16:10:54.174] [DEBUG] app - register handler method: "queryUserInfo" on "/wxWeb/api/userHandler/queryUserInfo"
[2018-12-14T16:10:54.175] [DEBUG] app - register handler method: "updateUserInfo" on "/wxWeb/api/userHandler/updateUserInfo"
[2018-12-14T16:10:54.175] [DEBUG] app - register handler method: "isAddressComplete" on "/wxWeb/api/userHandler/isAddressComplete"
[2018-12-14T16:10:54.175] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/scanActivity.js"  ...
[2018-12-14T16:10:54.176] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/scanActivity.js" to "/wxWeb/scanActivity"
[2018-12-14T16:10:54.176] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/wxAccess.js"  ...
[2018-12-14T16:10:54.177] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/wxAccess.js" to "/wxWeb/wxAccess"
[2018-12-14T16:10:54.177] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/wxLogin.js"  ...
[2018-12-14T16:10:54.178] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/wxLogin.js" to "/wxWeb/wxLogin"
[2018-12-14T16:10:54.179] [DEBUG] app - load dbJsonImpl "D:\\workspace\\koa2/dbJson/scanActivity.json" ...
[2018-12-14T16:10:54.180] [DEBUG] app - load dbJsonImpl "D:\\workspace\\koa2/dbJson/taskInfo.json" ...
[2018-12-14T16:10:54.181] [DEBUG] app - load dbJsonImpl "D:\\workspace\\koa2/dbJson/vipLevel.json" ...
[2018-12-14T16:10:54.182] [DEBUG] app - DummyService.start
[2018-12-14T16:10:54.184] [DEBUG] app - start scan activity
[2018-12-14T16:10:54.223] [DEBUG] app - register event: "login"
[2018-12-14T16:10:54.224] [DEBUG] app - register event: "completePersonInfo"
[2018-12-14T16:10:54.224] [DEBUG] app - register event: "share"
[2018-12-14T16:10:54.225] [DEBUG] app - register event: "acquirePoints"
[2018-12-14T16:10:54.226] [DEBUG] app - register event: "read"
[2018-12-14T16:10:54.233] [DEBUG] app - register event: "exchange"
[2018-12-14T16:10:54.239] [DEBUG] app - UserService.start
[2018-12-14T16:10:54.240] [DEBUG] app - WechatService.start
[2018-12-14T16:10:54.241] [DEBUG] app - DummyService.afterStart
[2018-12-14T16:10:54.241] [DEBUG] app - UserService.afterStart
[2018-12-14T16:10:54.241] [DEBUG] app - WechatService.afterStart
[2018-12-14T16:10:54.242] [INFO] app - app start from dir: "D:\\workspace\\koa2"
[2018-12-14T16:10:54.260] [INFO] app - redis "redis_cache" ready.
[2018-12-14T16:10:54.286] [INFO] app - mongoose connect successfully.
[2018-12-14T16:10:54.292] [DEBUG] app - createUser:{"openId":"abcdef","nickName":"haha","sex":1}
[2018-12-14T16:10:54.332] [DEBUG] app - awardItems:[{"itemId":"1000","amount":300}]
[2018-12-14T16:10:54.338] [DEBUG] app - awardItems insert return:[{"amount":300,"acquireTime":1544775054332,"expireTime":9007199254740991,"_id":"5c13658e95117a0d409c1765","openId":"abcdef","itemId":"1000","__v":0}]
[2018-12-14T16:10:54.443] [DEBUG] app - getUserPoints openId:"abcdef", ret:[{"_id":null,"points":1200}]
[2018-12-14T16:10:54.974] [DEBUG] app - createMenu:{"errcode":0,"errmsg":"ok"}
[2018-12-14T16:11:31.784] [DEBUG] app - starting "koa2" ...
[2018-12-14T16:11:31.793] [INFO] app - init mongoose "127.0.0.1":27017/"usercenter" ...
[2018-12-14T16:11:31.794] [DEBUG] app - mongodb connStr:"mongodb://127.0.0.1:27017/usercenter"
[2018-12-14T16:11:31.803] [DEBUG] app - create redis instance for "redis_cache"
[2018-12-14T16:11:31.805] [DEBUG] app - initRedisSession
[2018-12-14T16:11:31.807] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/manage/cdkeyHandler.js"  ...
[2018-12-14T16:11:31.816] [DEBUG] app - register handler method: "importCdkey" on "/manage/cdkeyHandler/importCdkey"
[2018-12-14T16:11:31.817] [DEBUG] app - register handler method: "genQrCode" on "/manage/cdkeyHandler/genQrCode"
[2018-12-14T16:11:31.817] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/manage/login.js"  ...
[2018-12-14T16:11:31.818] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/manage/login.js" to "/manage/login"
[2018-12-14T16:11:31.818] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/post.js"  ...
[2018-12-14T16:11:31.819] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/post.js" to "/post"
[2018-12-14T16:11:31.819] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/qrcode.js"  ...
[2018-12-14T16:11:31.820] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/qrcode.js" to "/qrcode"
[2018-12-14T16:11:31.820] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/redis.js"  ...
[2018-12-14T16:11:31.821] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/redis.js" to "/redis"
[2018-12-14T16:11:31.822] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/root.js"  ...
[2018-12-14T16:11:31.829] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/root.js" to "/"
[2018-12-14T16:11:31.829] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/drawAward.js"  ...
[2018-12-14T16:11:31.830] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/drawAward.js" to "/wxWeb/api/drawAward"
[2018-12-14T16:11:31.830] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/exchangeShopHandler.js"  ...
[2018-12-14T16:11:31.831] [DEBUG] app - register handler method: "queryOnSaleItemCount" on "/wxWeb/api/exchangeShopHandler/queryOnSaleItemCount"
[2018-12-14T16:11:31.831] [DEBUG] app - register handler method: "queryOnSaleItems" on "/wxWeb/api/exchangeShopHandler/queryOnSaleItems"
[2018-12-14T16:11:31.831] [DEBUG] app - register handler method: "exchangeItem" on "/wxWeb/api/exchangeShopHandler/exchangeItem"
[2018-12-14T16:11:31.831] [DEBUG] app - register handler method: "sendMessage" on "/wxWeb/api/exchangeShopHandler/sendMessage"
[2018-12-14T16:11:31.831] [DEBUG] app - register handler method: "markMessageRead" on "/wxWeb/api/exchangeShopHandler/markMessageRead"
[2018-12-14T16:11:31.832] [DEBUG] app - register handler method: "deleteMessage" on "/wxWeb/api/exchangeShopHandler/deleteMessage"
[2018-12-14T16:11:31.832] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/messageHandler.js"  ...
[2018-12-14T16:11:31.832] [DEBUG] app - register handler method: "getMessagePageCount" on "/wxWeb/api/messageHandler/getMessagePageCount"
[2018-12-14T16:11:31.833] [DEBUG] app - register handler method: "getMessagePage" on "/wxWeb/api/messageHandler/getMessagePage"
[2018-12-14T16:11:31.833] [DEBUG] app - register handler method: "sendMessage" on "/wxWeb/api/messageHandler/sendMessage"
[2018-12-14T16:11:31.833] [DEBUG] app - register handler method: "markMessageRead" on "/wxWeb/api/messageHandler/markMessageRead"
[2018-12-14T16:11:31.834] [DEBUG] app - register handler method: "deleteMessage" on "/wxWeb/api/messageHandler/deleteMessage"
[2018-12-14T16:11:31.834] [DEBUG] app - register handler method: "hasUnreadMessage" on "/wxWeb/api/messageHandler/hasUnreadMessage"
[2018-12-14T16:11:31.834] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/queryCdkeyUsage.js"  ...
[2018-12-14T16:11:31.835] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/queryCdkeyUsage.js" to "/wxWeb/api/queryCdkeyUsage"
[2018-12-14T16:11:31.835] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/queryUserStatus.js"  ...
[2018-12-14T16:11:31.836] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/queryUserStatus.js" to "/wxWeb/api/queryUserStatus"
[2018-12-14T16:11:31.836] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/smsHandler.js"  ...
[2018-12-14T16:11:31.836] [DEBUG] app - register handler method: "registerPhone" on "/wxWeb/api/smsHandler/registerPhone"
[2018-12-14T16:11:31.836] [DEBUG] app - register handler method: "getSmsCode" on "/wxWeb/api/smsHandler/getSmsCode"
[2018-12-14T16:11:31.837] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/taskHandler.js"  ...
[2018-12-14T16:11:31.837] [DEBUG] app - register handler method: "queryTaskList" on "/wxWeb/api/taskHandler/queryTaskList"
[2018-12-14T16:11:31.838] [DEBUG] app - register handler method: "rewardTask" on "/wxWeb/api/taskHandler/rewardTask"
[2018-12-14T16:11:31.838] [DEBUG] app - register handler method: "queryTaskInfo" on "/wxWeb/api/taskHandler/queryTaskInfo"
[2018-12-14T16:11:31.838] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/userHandler.js"  ...
[2018-12-14T16:11:31.839] [DEBUG] app - register handler method: "queryUserInfo" on "/wxWeb/api/userHandler/queryUserInfo"
[2018-12-14T16:11:31.839] [DEBUG] app - register handler method: "updateUserInfo" on "/wxWeb/api/userHandler/updateUserInfo"
[2018-12-14T16:11:31.839] [DEBUG] app - register handler method: "isAddressComplete" on "/wxWeb/api/userHandler/isAddressComplete"
[2018-12-14T16:11:31.839] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/scanActivity.js"  ...
[2018-12-14T16:11:31.841] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/scanActivity.js" to "/wxWeb/scanActivity"
[2018-12-14T16:11:31.841] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/wxAccess.js"  ...
[2018-12-14T16:11:31.842] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/wxAccess.js" to "/wxWeb/wxAccess"
[2018-12-14T16:11:31.842] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/wxLogin.js"  ...
[2018-12-14T16:11:31.843] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/wxLogin.js" to "/wxWeb/wxLogin"
[2018-12-14T16:11:31.844] [DEBUG] app - load dbJsonImpl "D:\\workspace\\koa2/dbJson/scanActivity.json" ...
[2018-12-14T16:11:31.845] [DEBUG] app - load dbJsonImpl "D:\\workspace\\koa2/dbJson/taskInfo.json" ...
[2018-12-14T16:11:31.846] [DEBUG] app - load dbJsonImpl "D:\\workspace\\koa2/dbJson/vipLevel.json" ...
[2018-12-14T16:11:31.847] [DEBUG] app - DummyService.start
[2018-12-14T16:11:31.849] [DEBUG] app - start scan activity
[2018-12-14T16:11:31.888] [DEBUG] app - register event: "login"
[2018-12-14T16:11:31.888] [DEBUG] app - register event: "completePersonInfo"
[2018-12-14T16:11:31.888] [DEBUG] app - register event: "share"
[2018-12-14T16:11:31.889] [DEBUG] app - register event: "acquirePoints"
[2018-12-14T16:11:31.889] [DEBUG] app - register event: "read"
[2018-12-14T16:11:31.889] [DEBUG] app - register event: "exchange"
[2018-12-14T16:11:31.895] [DEBUG] app - UserService.start
[2018-12-14T16:11:31.896] [DEBUG] app - WechatService.start
[2018-12-14T16:11:31.896] [DEBUG] app - DummyService.afterStart
[2018-12-14T16:11:31.896] [DEBUG] app - UserService.afterStart
[2018-12-14T16:11:31.897] [DEBUG] app - WechatService.afterStart
[2018-12-14T16:11:31.897] [INFO] app - app start from dir: "D:\\workspace\\koa2"
[2018-12-14T16:11:31.916] [INFO] app - redis "redis_cache" ready.
[2018-12-14T16:11:31.936] [DEBUG] app - createUser:{"openId":"abcdef","nickName":"haha","sex":1}
[2018-12-14T16:11:31.945] [INFO] app - mongoose connect successfully.
[2018-12-14T16:11:31.970] [DEBUG] app - awardItems:[{"itemId":"1000","amount":300}]
[2018-12-14T16:11:31.976] [DEBUG] app - awardItems insert return:[{"amount":300,"acquireTime":1544775091970,"expireTime":9007199254740991,"_id":"5c1365b338533945c075e739","openId":"abcdef","itemId":"1000","__v":0}]
[2018-12-14T16:11:31.982] [DEBUG] app - getUserPoints openId:"abcdef", ret:[{"_id":null,"points":1500}]
[2018-12-14T16:11:32.677] [DEBUG] app - createMenu:{"errcode":0,"errmsg":"ok"}
[2018-12-14T16:29:22.856] [DEBUG] app - starting "koa2" ...
[2018-12-14T16:29:22.872] [INFO] app - init mongoose "127.0.0.1":27017/"usercenter" ...
[2018-12-14T16:29:22.872] [DEBUG] app - mongodb connStr:"mongodb://127.0.0.1:27017/usercenter"
[2018-12-14T16:29:22.881] [DEBUG] app - create redis instance for "redis_cache"
[2018-12-14T16:29:22.883] [DEBUG] app - initRedisSession
[2018-12-14T16:29:22.885] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/manage/cdkeyHandler.js"  ...
[2018-12-14T16:29:22.895] [DEBUG] app - register handler method: "importCdkey" on "/manage/cdkeyHandler/importCdkey"
[2018-12-14T16:29:22.896] [DEBUG] app - register handler method: "genQrCode" on "/manage/cdkeyHandler/genQrCode"
[2018-12-14T16:29:22.896] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/manage/login.js"  ...
[2018-12-14T16:29:22.897] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/manage/login.js" to "/manage/login"
[2018-12-14T16:29:22.897] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/post.js"  ...
[2018-12-14T16:29:22.897] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/post.js" to "/post"
[2018-12-14T16:29:22.898] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/qrcode.js"  ...
[2018-12-14T16:29:22.898] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/qrcode.js" to "/qrcode"
[2018-12-14T16:29:22.898] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/redis.js"  ...
[2018-12-14T16:29:22.899] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/redis.js" to "/redis"
[2018-12-14T16:29:22.899] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/root.js"  ...
[2018-12-14T16:29:22.900] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/root.js" to "/"
[2018-12-14T16:29:22.900] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/drawAward.js"  ...
[2018-12-14T16:29:22.901] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/drawAward.js" to "/wxWeb/api/drawAward"
[2018-12-14T16:29:22.901] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/exchangeShopHandler.js"  ...
[2018-12-14T16:29:22.902] [DEBUG] app - register handler method: "queryOnSaleItemCount" on "/wxWeb/api/exchangeShopHandler/queryOnSaleItemCount"
[2018-12-14T16:29:22.903] [DEBUG] app - register handler method: "queryOnSaleItems" on "/wxWeb/api/exchangeShopHandler/queryOnSaleItems"
[2018-12-14T16:29:22.903] [DEBUG] app - register handler method: "exchangeItem" on "/wxWeb/api/exchangeShopHandler/exchangeItem"
[2018-12-14T16:29:22.909] [DEBUG] app - register handler method: "sendMessage" on "/wxWeb/api/exchangeShopHandler/sendMessage"
[2018-12-14T16:29:22.909] [DEBUG] app - register handler method: "markMessageRead" on "/wxWeb/api/exchangeShopHandler/markMessageRead"
[2018-12-14T16:29:22.910] [DEBUG] app - register handler method: "deleteMessage" on "/wxWeb/api/exchangeShopHandler/deleteMessage"
[2018-12-14T16:29:22.910] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/messageHandler.js"  ...
[2018-12-14T16:29:22.910] [DEBUG] app - register handler method: "getMessagePageCount" on "/wxWeb/api/messageHandler/getMessagePageCount"
[2018-12-14T16:29:22.911] [DEBUG] app - register handler method: "getMessagePage" on "/wxWeb/api/messageHandler/getMessagePage"
[2018-12-14T16:29:22.911] [DEBUG] app - register handler method: "sendMessage" on "/wxWeb/api/messageHandler/sendMessage"
[2018-12-14T16:29:22.911] [DEBUG] app - register handler method: "markMessageRead" on "/wxWeb/api/messageHandler/markMessageRead"
[2018-12-14T16:29:22.912] [DEBUG] app - register handler method: "deleteMessage" on "/wxWeb/api/messageHandler/deleteMessage"
[2018-12-14T16:29:22.912] [DEBUG] app - register handler method: "hasUnreadMessage" on "/wxWeb/api/messageHandler/hasUnreadMessage"
[2018-12-14T16:29:22.912] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/queryCdkeyUsage.js"  ...
[2018-12-14T16:29:22.913] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/queryCdkeyUsage.js" to "/wxWeb/api/queryCdkeyUsage"
[2018-12-14T16:29:22.913] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/queryUserStatus.js"  ...
[2018-12-14T16:29:22.914] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/queryUserStatus.js" to "/wxWeb/api/queryUserStatus"
[2018-12-14T16:29:22.914] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/smsHandler.js"  ...
[2018-12-14T16:29:22.914] [DEBUG] app - register handler method: "registerPhone" on "/wxWeb/api/smsHandler/registerPhone"
[2018-12-14T16:29:22.915] [DEBUG] app - register handler method: "getSmsCode" on "/wxWeb/api/smsHandler/getSmsCode"
[2018-12-14T16:29:22.915] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/taskHandler.js"  ...
[2018-12-14T16:29:22.915] [DEBUG] app - register handler method: "queryTaskList" on "/wxWeb/api/taskHandler/queryTaskList"
[2018-12-14T16:29:22.915] [DEBUG] app - register handler method: "rewardTask" on "/wxWeb/api/taskHandler/rewardTask"
[2018-12-14T16:29:22.916] [DEBUG] app - register handler method: "queryTaskInfo" on "/wxWeb/api/taskHandler/queryTaskInfo"
[2018-12-14T16:29:22.916] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/userHandler.js"  ...
[2018-12-14T16:29:22.916] [DEBUG] app - register handler method: "queryUserInfo" on "/wxWeb/api/userHandler/queryUserInfo"
[2018-12-14T16:29:22.917] [DEBUG] app - register handler method: "updateUserInfo" on "/wxWeb/api/userHandler/updateUserInfo"
[2018-12-14T16:29:22.917] [DEBUG] app - register handler method: "isAddressComplete" on "/wxWeb/api/userHandler/isAddressComplete"
[2018-12-14T16:29:22.917] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/scanActivity.js"  ...
[2018-12-14T16:29:22.918] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/scanActivity.js" to "/wxWeb/scanActivity"
[2018-12-14T16:29:22.918] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/wxAccess.js"  ...
[2018-12-14T16:29:22.919] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/wxAccess.js" to "/wxWeb/wxAccess"
[2018-12-14T16:29:22.920] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/wxLogin.js"  ...
[2018-12-14T16:29:22.920] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/wxLogin.js" to "/wxWeb/wxLogin"
[2018-12-14T16:29:22.922] [DEBUG] app - load dbJsonImpl "D:\\workspace\\koa2/dbJson/scanActivity.json" ...
[2018-12-14T16:29:22.923] [DEBUG] app - load dbJsonImpl "D:\\workspace\\koa2/dbJson/taskInfo.json" ...
[2018-12-14T16:29:22.924] [DEBUG] app - load dbJsonImpl "D:\\workspace\\koa2/dbJson/vipLevel.json" ...
[2018-12-14T16:29:22.925] [DEBUG] app - DummyService.start
[2018-12-14T16:29:22.927] [DEBUG] app - start scan activity
[2018-12-14T16:29:22.964] [DEBUG] app - register event: "login"
[2018-12-14T16:29:22.965] [DEBUG] app - register event: "completePersonInfo"
[2018-12-14T16:29:22.965] [DEBUG] app - register event: "share"
[2018-12-14T16:29:22.965] [DEBUG] app - register event: "acquirePoints"
[2018-12-14T16:29:22.965] [DEBUG] app - register event: "read"
[2018-12-14T16:29:22.965] [DEBUG] app - register event: "exchange"
[2018-12-14T16:29:22.971] [DEBUG] app - UserService.start
[2018-12-14T16:29:22.972] [DEBUG] app - WechatService.start
[2018-12-14T16:29:22.972] [DEBUG] app - DummyService.afterStart
[2018-12-14T16:29:22.972] [DEBUG] app - UserService.afterStart
[2018-12-14T16:29:22.973] [DEBUG] app - WechatService.afterStart
[2018-12-14T16:29:22.973] [INFO] app - app start from dir: "D:\\workspace\\koa2"
[2018-12-14T16:29:22.991] [INFO] app - redis "redis_cache" ready.
[2018-12-14T16:29:23.018] [INFO] app - mongoose connect successfully.
[2018-12-14T16:29:23.026] [DEBUG] app - createUser:{"openId":"abcdef","nickName":"haha","sex":1}
[2018-12-14T16:29:23.052] [INFO] app - createUser: "abcdef","haha",1
[2018-12-14T16:29:23.052] [INFO] app - on create user "abcdef"
[2018-12-14T16:29:23.054] [DEBUG] app - createResult:{"nickName":"haha","sex":1,"totalPoints":0,"lastAccess":0,"phoneNumber":"","babyBirthDay":0,"babySex":0,"consignee":"","province":"","city":"","address":"","postCode":"","_id":"5c1369e3a837d850d40a60e9","openId":"abcdef","__v":0}
[2018-12-14T16:29:23.067] [DEBUG] app - assignTask:{"n":1,"nModified":1,"opTime":{"ts":"6634763099725365250","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634763099725365250","$clusterTime":{"clusterTime":"6634763099725365250","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-14T16:29:23.069] [DEBUG] app - userCenter queryUserInfo :"abcdef"
[2018-12-14T16:29:23.074] [DEBUG] app - getUserPoints openId:"abcdef", ret:[{"_id":null,"points":1500}]
[2018-12-14T16:29:23.075] [DEBUG] app - user "abcdef" event "login" fired
[2018-12-14T16:29:23.078] [DEBUG] app - awardItems:[{"itemId":"1000","amount":300}]
[2018-12-14T16:29:23.082] [DEBUG] app - query task for "abcdef", ret:{"progress":0,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1}
[2018-12-14T16:29:23.082] [INFO] app - complete task {"progress":0,"_id":"5c123348ac2eea0183a35d87","openId":"abcdef","__v":0,"resetDaily":true,"taskId":1} with event "login"
[2018-12-14T16:29:23.085] [DEBUG] app - awardItems insert return:[{"amount":300,"acquireTime":1544776163078,"expireTime":9007199254740991,"_id":"5c1369e3a837d850d40a60ea","openId":"abcdef","itemId":"1000","__v":0}]
[2018-12-14T16:29:23.087] [DEBUG] app - completeTask: {"n":1,"nModified":1,"opTime":{"ts":"6634763099725365252","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634763099725365252","$clusterTime":{"clusterTime":"6634763099725365252","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-14T16:29:23.089] [DEBUG] app - getUserPoints openId:"abcdef", ret:[{"_id":null,"points":1800}]
[2018-12-14T16:29:23.090] [DEBUG] app - try complete full task. {"n":0,"nModified":0,"opTime":{"ts":"6634763099725365252","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634763099725365252","$clusterTime":{"clusterTime":"6634763099725365252","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-14T16:29:23.866] [DEBUG] app - createMenu:{"errcode":0,"errmsg":"ok"}
[2018-12-14T16:32:49.373] [DEBUG] app - starting "koa2" ...
[2018-12-14T16:32:49.382] [INFO] app - init mongoose "127.0.0.1":27017/"usercenter" ...
[2018-12-14T16:32:49.383] [DEBUG] app - mongodb connStr:"mongodb://127.0.0.1:27017/usercenter"
[2018-12-14T16:32:49.392] [DEBUG] app - create redis instance for "redis_cache"
[2018-12-14T16:32:49.394] [DEBUG] app - initRedisSession
[2018-12-14T16:32:49.395] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/manage/cdkeyHandler.js"  ...
[2018-12-14T16:32:49.406] [DEBUG] app - register handler method: "importCdkey" on "/manage/cdkeyHandler/importCdkey"
[2018-12-14T16:32:49.407] [DEBUG] app - register handler method: "genQrCode" on "/manage/cdkeyHandler/genQrCode"
[2018-12-14T16:32:49.407] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/manage/login.js"  ...
[2018-12-14T16:32:49.408] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/manage/login.js" to "/manage/login"
[2018-12-14T16:32:49.408] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/post.js"  ...
[2018-12-14T16:32:49.408] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/post.js" to "/post"
[2018-12-14T16:32:49.409] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/qrcode.js"  ...
[2018-12-14T16:32:49.409] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/qrcode.js" to "/qrcode"
[2018-12-14T16:32:49.410] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/redis.js"  ...
[2018-12-14T16:32:49.410] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/redis.js" to "/redis"
[2018-12-14T16:32:49.410] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/root.js"  ...
[2018-12-14T16:32:49.411] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/root.js" to "/"
[2018-12-14T16:32:49.411] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/drawAward.js"  ...
[2018-12-14T16:32:49.412] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/drawAward.js" to "/wxWeb/api/drawAward"
[2018-12-14T16:32:49.412] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/exchangeShopHandler.js"  ...
[2018-12-14T16:32:49.414] [DEBUG] app - register handler method: "queryOnSaleItemCount" on "/wxWeb/api/exchangeShopHandler/queryOnSaleItemCount"
[2018-12-14T16:32:49.414] [DEBUG] app - register handler method: "queryOnSaleItems" on "/wxWeb/api/exchangeShopHandler/queryOnSaleItems"
[2018-12-14T16:32:49.421] [DEBUG] app - register handler method: "exchangeItem" on "/wxWeb/api/exchangeShopHandler/exchangeItem"
[2018-12-14T16:32:49.421] [DEBUG] app - register handler method: "sendMessage" on "/wxWeb/api/exchangeShopHandler/sendMessage"
[2018-12-14T16:32:49.421] [DEBUG] app - register handler method: "markMessageRead" on "/wxWeb/api/exchangeShopHandler/markMessageRead"
[2018-12-14T16:32:49.421] [DEBUG] app - register handler method: "deleteMessage" on "/wxWeb/api/exchangeShopHandler/deleteMessage"
[2018-12-14T16:32:49.422] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/messageHandler.js"  ...
[2018-12-14T16:32:49.422] [DEBUG] app - register handler method: "getMessagePageCount" on "/wxWeb/api/messageHandler/getMessagePageCount"
[2018-12-14T16:32:49.422] [DEBUG] app - register handler method: "getMessagePage" on "/wxWeb/api/messageHandler/getMessagePage"
[2018-12-14T16:32:49.423] [DEBUG] app - register handler method: "sendMessage" on "/wxWeb/api/messageHandler/sendMessage"
[2018-12-14T16:32:49.423] [DEBUG] app - register handler method: "markMessageRead" on "/wxWeb/api/messageHandler/markMessageRead"
[2018-12-14T16:32:49.423] [DEBUG] app - register handler method: "deleteMessage" on "/wxWeb/api/messageHandler/deleteMessage"
[2018-12-14T16:32:49.423] [DEBUG] app - register handler method: "hasUnreadMessage" on "/wxWeb/api/messageHandler/hasUnreadMessage"
[2018-12-14T16:32:49.423] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/queryCdkeyUsage.js"  ...
[2018-12-14T16:32:49.424] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/queryCdkeyUsage.js" to "/wxWeb/api/queryCdkeyUsage"
[2018-12-14T16:32:49.424] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/queryUserStatus.js"  ...
[2018-12-14T16:32:49.425] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/queryUserStatus.js" to "/wxWeb/api/queryUserStatus"
[2018-12-14T16:32:49.425] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/smsHandler.js"  ...
[2018-12-14T16:32:49.426] [DEBUG] app - register handler method: "registerPhone" on "/wxWeb/api/smsHandler/registerPhone"
[2018-12-14T16:32:49.426] [DEBUG] app - register handler method: "getSmsCode" on "/wxWeb/api/smsHandler/getSmsCode"
[2018-12-14T16:32:49.426] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/taskHandler.js"  ...
[2018-12-14T16:32:49.426] [DEBUG] app - register handler method: "queryTaskList" on "/wxWeb/api/taskHandler/queryTaskList"
[2018-12-14T16:32:49.427] [DEBUG] app - register handler method: "rewardTask" on "/wxWeb/api/taskHandler/rewardTask"
[2018-12-14T16:32:49.427] [DEBUG] app - register handler method: "queryTaskInfo" on "/wxWeb/api/taskHandler/queryTaskInfo"
[2018-12-14T16:32:49.427] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/userHandler.js"  ...
[2018-12-14T16:32:49.428] [DEBUG] app - register handler method: "queryUserInfo" on "/wxWeb/api/userHandler/queryUserInfo"
[2018-12-14T16:32:49.428] [DEBUG] app - register handler method: "updateUserInfo" on "/wxWeb/api/userHandler/updateUserInfo"
[2018-12-14T16:32:49.428] [DEBUG] app - register handler method: "isAddressComplete" on "/wxWeb/api/userHandler/isAddressComplete"
[2018-12-14T16:32:49.428] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/scanActivity.js"  ...
[2018-12-14T16:32:49.429] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/scanActivity.js" to "/wxWeb/scanActivity"
[2018-12-14T16:32:49.430] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/wxAccess.js"  ...
[2018-12-14T16:32:49.430] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/wxAccess.js" to "/wxWeb/wxAccess"
[2018-12-14T16:32:49.431] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/wxLogin.js"  ...
[2018-12-14T16:32:49.431] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/wxLogin.js" to "/wxWeb/wxLogin"
[2018-12-14T16:32:49.433] [DEBUG] app - load dbJsonImpl "D:\\workspace\\koa2/dbJson/scanActivity.json" ...
[2018-12-14T16:32:49.434] [DEBUG] app - load dbJsonImpl "D:\\workspace\\koa2/dbJson/taskInfo.json" ...
[2018-12-14T16:32:49.434] [DEBUG] app - load dbJsonImpl "D:\\workspace\\koa2/dbJson/vipLevel.json" ...
[2018-12-14T16:32:49.435] [DEBUG] app - DummyService.start
[2018-12-14T16:32:49.437] [DEBUG] app - start scan activity
[2018-12-14T16:32:49.477] [DEBUG] app - register event: "login"
[2018-12-14T16:32:49.477] [DEBUG] app - register event: "completePersonInfo"
[2018-12-14T16:32:49.477] [DEBUG] app - register event: "share"
[2018-12-14T16:32:49.477] [DEBUG] app - register event: "acquirePoints"
[2018-12-14T16:32:49.478] [DEBUG] app - register event: "read"
[2018-12-14T16:32:49.478] [DEBUG] app - register event: "exchange"
[2018-12-14T16:32:49.485] [DEBUG] app - UserService.start
[2018-12-14T16:32:49.487] [DEBUG] app - WechatService.start
[2018-12-14T16:32:49.488] [DEBUG] app - DummyService.afterStart
[2018-12-14T16:32:49.488] [DEBUG] app - UserService.afterStart
[2018-12-14T16:32:49.488] [DEBUG] app - WechatService.afterStart
[2018-12-14T16:32:49.488] [INFO] app - app start from dir: "D:\\workspace\\koa2"
[2018-12-14T16:32:49.507] [INFO] app - redis "redis_cache" ready.
[2018-12-14T16:32:49.528] [INFO] app - mongoose connect successfully.
[2018-12-14T16:32:49.532] [DEBUG] app - createUser:{"openId":"abc","nickName":"haha","sex":1}
[2018-12-14T16:32:49.562] [INFO] app - createUser: "abc","haha",1
[2018-12-14T16:32:49.562] [INFO] app - on create user "abc"
[2018-12-14T16:32:49.564] [DEBUG] app - createResult:{"nickName":"haha","sex":1,"totalPoints":0,"lastAccess":0,"phoneNumber":"","babyBirthDay":0,"babySex":0,"consignee":"","province":"","city":"","address":"","postCode":"","_id":"5c136ab122a68f179458f68e","openId":"abc","__v":0}
[2018-12-14T16:32:49.568] [DEBUG] app - assignTask:{"n":1,"nModified":0,"upserted":[{"index":0,"_id":"5c136ab1ac2eea0183a77ae7"}],"opTime":{"ts":"6634763984488628226","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634763984488628226","$clusterTime":{"clusterTime":"6634763984488628226","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-14T16:32:49.571] [DEBUG] app - userCenter queryUserInfo :"abc"
[2018-12-14T16:32:49.576] [DEBUG] app - getUserPoints openId:"abc", ret:[]
[2018-12-14T16:32:49.576] [DEBUG] app - user "abc" event "login" fired
[2018-12-14T16:32:49.586] [DEBUG] app - awardItems:[{"itemId":"1000","amount":300}]
[2018-12-14T16:32:49.591] [DEBUG] app - query task for "abc", ret:{"progress":0,"_id":"5c136ab1ac2eea0183a77ae7","openId":"abc","__v":0,"resetDaily":true,"taskId":1}
[2018-12-14T16:32:49.591] [INFO] app - complete task {"progress":0,"_id":"5c136ab1ac2eea0183a77ae7","openId":"abc","__v":0,"resetDaily":true,"taskId":1} with event "login"
[2018-12-14T16:32:49.594] [DEBUG] app - awardItems insert return:[{"amount":300,"acquireTime":1544776369587,"expireTime":9007199254740991,"_id":"5c136ab122a68f179458f68f","openId":"abcdef","itemId":"1000","__v":0}]
[2018-12-14T16:32:49.596] [DEBUG] app - completeTask: {"n":1,"nModified":1,"opTime":{"ts":"6634763984488628228","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634763984488628228","$clusterTime":{"clusterTime":"6634763984488628228","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-14T16:32:49.598] [DEBUG] app - getUserPoints openId:"abcdef", ret:[{"_id":null,"points":2100}]
[2018-12-14T16:32:49.599] [DEBUG] app - try complete full task. {"n":0,"nModified":0,"opTime":{"ts":"6634763984488628228","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634763984488628228","$clusterTime":{"clusterTime":"6634763984488628228","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-14T16:32:50.288] [DEBUG] app - createMenu:{"errcode":0,"errmsg":"ok"}
[2018-12-14T16:44:41.656] [DEBUG] app - starting "koa2" ...
[2018-12-14T16:44:41.666] [INFO] app - init mongoose "127.0.0.1":27017/"usercenter" ...
[2018-12-14T16:44:41.667] [DEBUG] app - mongodb connStr:"mongodb://127.0.0.1:27017/usercenter"
[2018-12-14T16:44:41.675] [DEBUG] app - create redis instance for "redis_cache"
[2018-12-14T16:44:41.678] [DEBUG] app - initRedisSession
[2018-12-14T16:44:41.679] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/manage/cdkeyHandler.js"  ...
[2018-12-14T16:44:41.688] [DEBUG] app - register handler method: "importCdkey" on "/manage/cdkeyHandler/importCdkey"
[2018-12-14T16:44:41.689] [DEBUG] app - register handler method: "genQrCode" on "/manage/cdkeyHandler/genQrCode"
[2018-12-14T16:44:41.690] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/manage/login.js"  ...
[2018-12-14T16:44:41.690] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/manage/login.js" to "/manage/login"
[2018-12-14T16:44:41.690] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/post.js"  ...
[2018-12-14T16:44:41.691] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/post.js" to "/post"
[2018-12-14T16:44:41.691] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/qrcode.js"  ...
[2018-12-14T16:44:41.692] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/qrcode.js" to "/qrcode"
[2018-12-14T16:44:41.692] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/redis.js"  ...
[2018-12-14T16:44:41.693] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/redis.js" to "/redis"
[2018-12-14T16:44:41.693] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/root.js"  ...
[2018-12-14T16:44:41.694] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/root.js" to "/"
[2018-12-14T16:44:41.694] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/drawAward.js"  ...
[2018-12-14T16:44:41.694] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/drawAward.js" to "/wxWeb/api/drawAward"
[2018-12-14T16:44:41.695] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/exchangeShopHandler.js"  ...
[2018-12-14T16:44:41.695] [DEBUG] app - register handler method: "queryOnSaleItemCount" on "/wxWeb/api/exchangeShopHandler/queryOnSaleItemCount"
[2018-12-14T16:44:41.695] [DEBUG] app - register handler method: "queryOnSaleItems" on "/wxWeb/api/exchangeShopHandler/queryOnSaleItems"
[2018-12-14T16:44:41.696] [DEBUG] app - register handler method: "exchangeItem" on "/wxWeb/api/exchangeShopHandler/exchangeItem"
[2018-12-14T16:44:41.696] [DEBUG] app - register handler method: "sendMessage" on "/wxWeb/api/exchangeShopHandler/sendMessage"
[2018-12-14T16:44:41.696] [DEBUG] app - register handler method: "markMessageRead" on "/wxWeb/api/exchangeShopHandler/markMessageRead"
[2018-12-14T16:44:41.696] [DEBUG] app - register handler method: "deleteMessage" on "/wxWeb/api/exchangeShopHandler/deleteMessage"
[2018-12-14T16:44:41.696] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/messageHandler.js"  ...
[2018-12-14T16:44:41.697] [DEBUG] app - register handler method: "getMessagePageCount" on "/wxWeb/api/messageHandler/getMessagePageCount"
[2018-12-14T16:44:41.697] [DEBUG] app - register handler method: "getMessagePage" on "/wxWeb/api/messageHandler/getMessagePage"
[2018-12-14T16:44:41.697] [DEBUG] app - register handler method: "sendMessage" on "/wxWeb/api/messageHandler/sendMessage"
[2018-12-14T16:44:41.698] [DEBUG] app - register handler method: "markMessageRead" on "/wxWeb/api/messageHandler/markMessageRead"
[2018-12-14T16:44:41.698] [DEBUG] app - register handler method: "deleteMessage" on "/wxWeb/api/messageHandler/deleteMessage"
[2018-12-14T16:44:41.698] [DEBUG] app - register handler method: "hasUnreadMessage" on "/wxWeb/api/messageHandler/hasUnreadMessage"
[2018-12-14T16:44:41.698] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/queryCdkeyUsage.js"  ...
[2018-12-14T16:44:41.699] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/queryCdkeyUsage.js" to "/wxWeb/api/queryCdkeyUsage"
[2018-12-14T16:44:41.699] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/queryUserStatus.js"  ...
[2018-12-14T16:44:41.700] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/queryUserStatus.js" to "/wxWeb/api/queryUserStatus"
[2018-12-14T16:44:41.700] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/smsHandler.js"  ...
[2018-12-14T16:44:41.700] [DEBUG] app - register handler method: "registerPhone" on "/wxWeb/api/smsHandler/registerPhone"
[2018-12-14T16:44:41.700] [DEBUG] app - register handler method: "getSmsCode" on "/wxWeb/api/smsHandler/getSmsCode"
[2018-12-14T16:44:41.701] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/taskHandler.js"  ...
[2018-12-14T16:44:41.701] [DEBUG] app - register handler method: "queryTaskList" on "/wxWeb/api/taskHandler/queryTaskList"
[2018-12-14T16:44:41.701] [DEBUG] app - register handler method: "rewardTask" on "/wxWeb/api/taskHandler/rewardTask"
[2018-12-14T16:44:41.701] [DEBUG] app - register handler method: "queryTaskInfo" on "/wxWeb/api/taskHandler/queryTaskInfo"
[2018-12-14T16:44:41.701] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/userHandler.js"  ...
[2018-12-14T16:44:41.703] [DEBUG] app - register handler method: "queryUserInfo" on "/wxWeb/api/userHandler/queryUserInfo"
[2018-12-14T16:44:41.703] [DEBUG] app - register handler method: "updateUserInfo" on "/wxWeb/api/userHandler/updateUserInfo"
[2018-12-14T16:44:41.703] [DEBUG] app - register handler method: "isAddressComplete" on "/wxWeb/api/userHandler/isAddressComplete"
[2018-12-14T16:44:41.704] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/scanActivity.js"  ...
[2018-12-14T16:44:41.705] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/scanActivity.js" to "/wxWeb/scanActivity"
[2018-12-14T16:44:41.705] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/wxAccess.js"  ...
[2018-12-14T16:44:41.706] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/wxAccess.js" to "/wxWeb/wxAccess"
[2018-12-14T16:44:41.706] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/wxLogin.js"  ...
[2018-12-14T16:44:41.706] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/wxLogin.js" to "/wxWeb/wxLogin"
[2018-12-14T16:44:41.708] [DEBUG] app - load dbJsonImpl "D:\\workspace\\koa2/dbJson/scanActivity.json" ...
[2018-12-14T16:44:41.709] [DEBUG] app - load dbJsonImpl "D:\\workspace\\koa2/dbJson/taskInfo.json" ...
[2018-12-14T16:44:41.710] [DEBUG] app - load dbJsonImpl "D:\\workspace\\koa2/dbJson/vipLevel.json" ...
[2018-12-14T16:44:41.711] [DEBUG] app - DummyService.start
[2018-12-14T16:44:41.713] [DEBUG] app - start scan activity
[2018-12-14T16:44:41.752] [DEBUG] app - register event: "login"
[2018-12-14T16:44:41.752] [DEBUG] app - register event: "completePersonInfo"
[2018-12-14T16:44:41.753] [DEBUG] app - register event: "share"
[2018-12-14T16:44:41.754] [DEBUG] app - register event: "acquirePoints"
[2018-12-14T16:44:41.754] [DEBUG] app - register event: "read"
[2018-12-14T16:44:41.754] [DEBUG] app - register event: "exchange"
[2018-12-14T16:44:41.760] [DEBUG] app - UserService.start
[2018-12-14T16:44:41.761] [DEBUG] app - WechatService.start
[2018-12-14T16:44:41.761] [DEBUG] app - DummyService.afterStart
[2018-12-14T16:44:41.761] [DEBUG] app - UserService.afterStart
[2018-12-14T16:44:41.762] [DEBUG] app - WechatService.afterStart
[2018-12-14T16:44:41.762] [INFO] app - app start from dir: "D:\\workspace\\koa2"
[2018-12-14T16:44:41.780] [INFO] app - redis "redis_cache" ready.
[2018-12-14T16:44:41.800] [INFO] app - mongoose connect successfully.
[2018-12-14T16:44:41.804] [DEBUG] app - createUser:{"openId":"abc","nickName":"haha","sex":1}
[2018-12-14T16:44:41.836] [DEBUG] app - userCenter queryUserInfo :"abc"
[2018-12-14T16:44:41.847] [DEBUG] app - getUserPoints openId:"abc", ret:[]
[2018-12-14T16:44:41.847] [DEBUG] app - user "abc" event "login" fired
[2018-12-14T16:44:41.850] [DEBUG] app - awardItems:[{"itemId":"1000","amount":300}]
[2018-12-14T16:44:41.855] [DEBUG] app - query task for "abc", ret:{"progress":0,"_id":"5c136ab1ac2eea0183a77ae7","openId":"abc","__v":0,"resetDaily":true,"taskId":1}
[2018-12-14T16:44:41.856] [INFO] app - complete task {"progress":0,"_id":"5c136ab1ac2eea0183a77ae7","openId":"abc","__v":0,"resetDaily":true,"taskId":1} with event "login"
[2018-12-14T16:44:41.860] [DEBUG] app - awardItems insert return:[{"amount":300,"acquireTime":1544777081850,"expireTime":9007199254740991,"_id":"5c136d7937647f4cc812cc1e","openId":"abcdef","itemId":"1000","__v":0}]
[2018-12-14T16:44:41.862] [DEBUG] app - completeTask: {"n":1,"nModified":1,"opTime":{"ts":"6634767042505342979","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634767042505342979","$clusterTime":{"clusterTime":"6634767042505342979","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-14T16:44:41.865] [DEBUG] app - try complete full task. {"n":0,"nModified":0,"opTime":{"ts":"6634767042505342980","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634767042505342980","$clusterTime":{"clusterTime":"6634767042505342980","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-14T16:44:42.496] [DEBUG] app - createMenu:{"errcode":0,"errmsg":"ok"}
[2018-12-14T16:45:59.688] [DEBUG] app - starting "koa2" ...
[2018-12-14T16:45:59.698] [INFO] app - init mongoose "127.0.0.1":27017/"usercenter" ...
[2018-12-14T16:45:59.699] [DEBUG] app - mongodb connStr:"mongodb://127.0.0.1:27017/usercenter"
[2018-12-14T16:45:59.707] [DEBUG] app - create redis instance for "redis_cache"
[2018-12-14T16:45:59.709] [DEBUG] app - initRedisSession
[2018-12-14T16:45:59.710] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/manage/cdkeyHandler.js"  ...
[2018-12-14T16:45:59.720] [DEBUG] app - register handler method: "importCdkey" on "/manage/cdkeyHandler/importCdkey"
[2018-12-14T16:45:59.721] [DEBUG] app - register handler method: "genQrCode" on "/manage/cdkeyHandler/genQrCode"
[2018-12-14T16:45:59.721] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/manage/login.js"  ...
[2018-12-14T16:45:59.722] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/manage/login.js" to "/manage/login"
[2018-12-14T16:45:59.722] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/post.js"  ...
[2018-12-14T16:45:59.722] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/post.js" to "/post"
[2018-12-14T16:45:59.722] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/qrcode.js"  ...
[2018-12-14T16:45:59.723] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/qrcode.js" to "/qrcode"
[2018-12-14T16:45:59.723] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/redis.js"  ...
[2018-12-14T16:45:59.724] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/redis.js" to "/redis"
[2018-12-14T16:45:59.724] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/root.js"  ...
[2018-12-14T16:45:59.725] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/root.js" to "/"
[2018-12-14T16:45:59.726] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/drawAward.js"  ...
[2018-12-14T16:45:59.727] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/drawAward.js" to "/wxWeb/api/drawAward"
[2018-12-14T16:45:59.727] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/exchangeShopHandler.js"  ...
[2018-12-14T16:45:59.728] [DEBUG] app - register handler method: "queryOnSaleItemCount" on "/wxWeb/api/exchangeShopHandler/queryOnSaleItemCount"
[2018-12-14T16:45:59.728] [DEBUG] app - register handler method: "queryOnSaleItems" on "/wxWeb/api/exchangeShopHandler/queryOnSaleItems"
[2018-12-14T16:45:59.728] [DEBUG] app - register handler method: "exchangeItem" on "/wxWeb/api/exchangeShopHandler/exchangeItem"
[2018-12-14T16:45:59.728] [DEBUG] app - register handler method: "sendMessage" on "/wxWeb/api/exchangeShopHandler/sendMessage"
[2018-12-14T16:45:59.728] [DEBUG] app - register handler method: "markMessageRead" on "/wxWeb/api/exchangeShopHandler/markMessageRead"
[2018-12-14T16:45:59.728] [DEBUG] app - register handler method: "deleteMessage" on "/wxWeb/api/exchangeShopHandler/deleteMessage"
[2018-12-14T16:45:59.729] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/messageHandler.js"  ...
[2018-12-14T16:45:59.729] [DEBUG] app - register handler method: "getMessagePageCount" on "/wxWeb/api/messageHandler/getMessagePageCount"
[2018-12-14T16:45:59.729] [DEBUG] app - register handler method: "getMessagePage" on "/wxWeb/api/messageHandler/getMessagePage"
[2018-12-14T16:45:59.729] [DEBUG] app - register handler method: "sendMessage" on "/wxWeb/api/messageHandler/sendMessage"
[2018-12-14T16:45:59.730] [DEBUG] app - register handler method: "markMessageRead" on "/wxWeb/api/messageHandler/markMessageRead"
[2018-12-14T16:45:59.730] [DEBUG] app - register handler method: "deleteMessage" on "/wxWeb/api/messageHandler/deleteMessage"
[2018-12-14T16:45:59.730] [DEBUG] app - register handler method: "hasUnreadMessage" on "/wxWeb/api/messageHandler/hasUnreadMessage"
[2018-12-14T16:45:59.730] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/queryCdkeyUsage.js"  ...
[2018-12-14T16:45:59.731] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/queryCdkeyUsage.js" to "/wxWeb/api/queryCdkeyUsage"
[2018-12-14T16:45:59.731] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/queryUserStatus.js"  ...
[2018-12-14T16:45:59.731] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/queryUserStatus.js" to "/wxWeb/api/queryUserStatus"
[2018-12-14T16:45:59.731] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/smsHandler.js"  ...
[2018-12-14T16:45:59.732] [DEBUG] app - register handler method: "registerPhone" on "/wxWeb/api/smsHandler/registerPhone"
[2018-12-14T16:45:59.732] [DEBUG] app - register handler method: "getSmsCode" on "/wxWeb/api/smsHandler/getSmsCode"
[2018-12-14T16:45:59.732] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/taskHandler.js"  ...
[2018-12-14T16:45:59.733] [DEBUG] app - register handler method: "queryTaskList" on "/wxWeb/api/taskHandler/queryTaskList"
[2018-12-14T16:45:59.733] [DEBUG] app - register handler method: "rewardTask" on "/wxWeb/api/taskHandler/rewardTask"
[2018-12-14T16:45:59.733] [DEBUG] app - register handler method: "queryTaskInfo" on "/wxWeb/api/taskHandler/queryTaskInfo"
[2018-12-14T16:45:59.733] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/userHandler.js"  ...
[2018-12-14T16:45:59.734] [DEBUG] app - register handler method: "queryUserInfo" on "/wxWeb/api/userHandler/queryUserInfo"
[2018-12-14T16:45:59.734] [DEBUG] app - register handler method: "updateUserInfo" on "/wxWeb/api/userHandler/updateUserInfo"
[2018-12-14T16:45:59.734] [DEBUG] app - register handler method: "isAddressComplete" on "/wxWeb/api/userHandler/isAddressComplete"
[2018-12-14T16:45:59.734] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/scanActivity.js"  ...
[2018-12-14T16:45:59.735] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/scanActivity.js" to "/wxWeb/scanActivity"
[2018-12-14T16:45:59.735] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/wxAccess.js"  ...
[2018-12-14T16:45:59.736] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/wxAccess.js" to "/wxWeb/wxAccess"
[2018-12-14T16:45:59.737] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/wxLogin.js"  ...
[2018-12-14T16:45:59.737] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/wxLogin.js" to "/wxWeb/wxLogin"
[2018-12-14T16:45:59.739] [DEBUG] app - load dbJsonImpl "D:\\workspace\\koa2/dbJson/scanActivity.json" ...
[2018-12-14T16:45:59.739] [DEBUG] app - load dbJsonImpl "D:\\workspace\\koa2/dbJson/taskInfo.json" ...
[2018-12-14T16:45:59.740] [DEBUG] app - load dbJsonImpl "D:\\workspace\\koa2/dbJson/vipLevel.json" ...
[2018-12-14T16:45:59.742] [DEBUG] app - DummyService.start
[2018-12-14T16:45:59.750] [DEBUG] app - start scan activity
[2018-12-14T16:45:59.789] [DEBUG] app - register event: "login"
[2018-12-14T16:45:59.789] [DEBUG] app - register event: "completePersonInfo"
[2018-12-14T16:45:59.790] [DEBUG] app - register event: "share"
[2018-12-14T16:45:59.790] [DEBUG] app - register event: "acquirePoints"
[2018-12-14T16:45:59.790] [DEBUG] app - register event: "read"
[2018-12-14T16:45:59.790] [DEBUG] app - register event: "exchange"
[2018-12-14T16:45:59.796] [DEBUG] app - UserService.start
[2018-12-14T16:45:59.797] [DEBUG] app - WechatService.start
[2018-12-14T16:45:59.797] [DEBUG] app - DummyService.afterStart
[2018-12-14T16:45:59.797] [DEBUG] app - UserService.afterStart
[2018-12-14T16:45:59.798] [DEBUG] app - WechatService.afterStart
[2018-12-14T16:45:59.798] [INFO] app - app start from dir: "D:\\workspace\\koa2"
[2018-12-14T16:45:59.816] [INFO] app - redis "redis_cache" ready.
[2018-12-14T16:45:59.838] [INFO] app - mongoose connect successfully.
[2018-12-14T16:45:59.843] [DEBUG] app - createUser:{"openId":"ab","nickName":"haha","sex":1}
[2018-12-14T16:45:59.873] [INFO] app - createUser: "ab","haha",1
[2018-12-14T16:45:59.873] [INFO] app - on create user "ab"
[2018-12-14T16:45:59.874] [DEBUG] app - createResult:{"nickName":"haha","sex":1,"totalPoints":0,"lastAccess":0,"phoneNumber":"","babyBirthDay":0,"babySex":0,"consignee":"","province":"","city":"","address":"","postCode":"","_id":"5c136dc773bc162b904fe7a6","openId":"ab","__v":0}
[2018-12-14T16:45:59.880] [DEBUG] app - assignTask:{"n":1,"nModified":0,"upserted":[{"index":0,"_id":"5c136dc7ac2eea0183a7843a"}],"opTime":{"ts":"6634767377512792066","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634767377512792066","$clusterTime":{"clusterTime":"6634767377512792066","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-14T16:45:59.882] [DEBUG] app - userCenter queryUserInfo :"ab"
[2018-12-14T16:45:59.888] [DEBUG] app - getUserPoints openId:"ab", ret:[]
[2018-12-14T16:45:59.888] [DEBUG] app - user "ab" event "login" fired
[2018-12-14T16:45:59.890] [DEBUG] app - awardItems:[{"itemId":"1000","amount":300}]
[2018-12-14T16:45:59.896] [DEBUG] app - query task for "ab", ret:{"progress":0,"_id":"5c136dc7ac2eea0183a7843a","openId":"ab","__v":0,"resetDaily":true,"taskId":1}
[2018-12-14T16:45:59.896] [DEBUG] app - awardItems insert return:[{"amount":300,"acquireTime":1544777159891,"expireTime":9007199254740991,"_id":"5c136dc773bc162b904fe7a7","openId":"ab","itemId":"1000","__v":0}]
[2018-12-14T16:45:59.897] [INFO] app - complete task {"progress":0,"_id":"5c136dc7ac2eea0183a7843a","openId":"ab","__v":0,"resetDaily":true,"taskId":1} with event "login"
[2018-12-14T16:45:59.900] [DEBUG] app - completeTask: {"n":1,"nModified":1,"opTime":{"ts":"6634767377512792068","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634767377512792068","$clusterTime":{"clusterTime":"6634767377512792069","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-14T16:45:59.904] [DEBUG] app - try complete full task. {"n":0,"nModified":0,"opTime":{"ts":"6634767377512792069","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634767377512792069","$clusterTime":{"clusterTime":"6634767377512792069","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-14T16:46:00.547] [DEBUG] app - createMenu:{"errcode":0,"errmsg":"ok"}
[2018-12-14T16:47:05.703] [DEBUG] app - starting "koa2" ...
[2018-12-14T16:47:05.713] [INFO] app - init mongoose "127.0.0.1":27017/"usercenter" ...
[2018-12-14T16:47:05.713] [DEBUG] app - mongodb connStr:"mongodb://127.0.0.1:27017/usercenter"
[2018-12-14T16:47:05.722] [DEBUG] app - create redis instance for "redis_cache"
[2018-12-14T16:47:05.724] [DEBUG] app - initRedisSession
[2018-12-14T16:47:05.726] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/manage/cdkeyHandler.js"  ...
[2018-12-14T16:47:05.736] [DEBUG] app - register handler method: "importCdkey" on "/manage/cdkeyHandler/importCdkey"
[2018-12-14T16:47:05.737] [DEBUG] app - register handler method: "genQrCode" on "/manage/cdkeyHandler/genQrCode"
[2018-12-14T16:47:05.738] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/manage/login.js"  ...
[2018-12-14T16:47:05.738] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/manage/login.js" to "/manage/login"
[2018-12-14T16:47:05.738] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/post.js"  ...
[2018-12-14T16:47:05.739] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/post.js" to "/post"
[2018-12-14T16:47:05.739] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/qrcode.js"  ...
[2018-12-14T16:47:05.740] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/qrcode.js" to "/qrcode"
[2018-12-14T16:47:05.740] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/redis.js"  ...
[2018-12-14T16:47:05.741] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/redis.js" to "/redis"
[2018-12-14T16:47:05.741] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/root.js"  ...
[2018-12-14T16:47:05.742] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/root.js" to "/"
[2018-12-14T16:47:05.742] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/drawAward.js"  ...
[2018-12-14T16:47:05.742] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/drawAward.js" to "/wxWeb/api/drawAward"
[2018-12-14T16:47:05.743] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/exchangeShopHandler.js"  ...
[2018-12-14T16:47:05.743] [DEBUG] app - register handler method: "queryOnSaleItemCount" on "/wxWeb/api/exchangeShopHandler/queryOnSaleItemCount"
[2018-12-14T16:47:05.743] [DEBUG] app - register handler method: "queryOnSaleItems" on "/wxWeb/api/exchangeShopHandler/queryOnSaleItems"
[2018-12-14T16:47:05.744] [DEBUG] app - register handler method: "exchangeItem" on "/wxWeb/api/exchangeShopHandler/exchangeItem"
[2018-12-14T16:47:05.744] [DEBUG] app - register handler method: "sendMessage" on "/wxWeb/api/exchangeShopHandler/sendMessage"
[2018-12-14T16:47:05.744] [DEBUG] app - register handler method: "markMessageRead" on "/wxWeb/api/exchangeShopHandler/markMessageRead"
[2018-12-14T16:47:05.745] [DEBUG] app - register handler method: "deleteMessage" on "/wxWeb/api/exchangeShopHandler/deleteMessage"
[2018-12-14T16:47:05.745] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/messageHandler.js"  ...
[2018-12-14T16:47:05.746] [DEBUG] app - register handler method: "getMessagePageCount" on "/wxWeb/api/messageHandler/getMessagePageCount"
[2018-12-14T16:47:05.752] [DEBUG] app - register handler method: "getMessagePage" on "/wxWeb/api/messageHandler/getMessagePage"
[2018-12-14T16:47:05.752] [DEBUG] app - register handler method: "sendMessage" on "/wxWeb/api/messageHandler/sendMessage"
[2018-12-14T16:47:05.752] [DEBUG] app - register handler method: "markMessageRead" on "/wxWeb/api/messageHandler/markMessageRead"
[2018-12-14T16:47:05.752] [DEBUG] app - register handler method: "deleteMessage" on "/wxWeb/api/messageHandler/deleteMessage"
[2018-12-14T16:47:05.752] [DEBUG] app - register handler method: "hasUnreadMessage" on "/wxWeb/api/messageHandler/hasUnreadMessage"
[2018-12-14T16:47:05.752] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/queryCdkeyUsage.js"  ...
[2018-12-14T16:47:05.753] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/queryCdkeyUsage.js" to "/wxWeb/api/queryCdkeyUsage"
[2018-12-14T16:47:05.753] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/queryUserStatus.js"  ...
[2018-12-14T16:47:05.754] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/queryUserStatus.js" to "/wxWeb/api/queryUserStatus"
[2018-12-14T16:47:05.754] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/smsHandler.js"  ...
[2018-12-14T16:47:05.755] [DEBUG] app - register handler method: "registerPhone" on "/wxWeb/api/smsHandler/registerPhone"
[2018-12-14T16:47:05.756] [DEBUG] app - register handler method: "getSmsCode" on "/wxWeb/api/smsHandler/getSmsCode"
[2018-12-14T16:47:05.756] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/taskHandler.js"  ...
[2018-12-14T16:47:05.757] [DEBUG] app - register handler method: "queryTaskList" on "/wxWeb/api/taskHandler/queryTaskList"
[2018-12-14T16:47:05.757] [DEBUG] app - register handler method: "rewardTask" on "/wxWeb/api/taskHandler/rewardTask"
[2018-12-14T16:47:05.757] [DEBUG] app - register handler method: "queryTaskInfo" on "/wxWeb/api/taskHandler/queryTaskInfo"
[2018-12-14T16:47:05.757] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/userHandler.js"  ...
[2018-12-14T16:47:05.758] [DEBUG] app - register handler method: "queryUserInfo" on "/wxWeb/api/userHandler/queryUserInfo"
[2018-12-14T16:47:05.758] [DEBUG] app - register handler method: "updateUserInfo" on "/wxWeb/api/userHandler/updateUserInfo"
[2018-12-14T16:47:05.758] [DEBUG] app - register handler method: "isAddressComplete" on "/wxWeb/api/userHandler/isAddressComplete"
[2018-12-14T16:47:05.758] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/scanActivity.js"  ...
[2018-12-14T16:47:05.759] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/scanActivity.js" to "/wxWeb/scanActivity"
[2018-12-14T16:47:05.759] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/wxAccess.js"  ...
[2018-12-14T16:47:05.760] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/wxAccess.js" to "/wxWeb/wxAccess"
[2018-12-14T16:47:05.760] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/wxLogin.js"  ...
[2018-12-14T16:47:05.761] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/wxLogin.js" to "/wxWeb/wxLogin"
[2018-12-14T16:47:05.762] [DEBUG] app - load dbJsonImpl "D:\\workspace\\koa2/dbJson/scanActivity.json" ...
[2018-12-14T16:47:05.763] [DEBUG] app - load dbJsonImpl "D:\\workspace\\koa2/dbJson/taskInfo.json" ...
[2018-12-14T16:47:05.764] [DEBUG] app - load dbJsonImpl "D:\\workspace\\koa2/dbJson/vipLevel.json" ...
[2018-12-14T16:47:05.765] [DEBUG] app - DummyService.start
[2018-12-14T16:47:05.767] [DEBUG] app - start scan activity
[2018-12-14T16:47:05.807] [DEBUG] app - register event: "login"
[2018-12-14T16:47:05.807] [DEBUG] app - register event: "completePersonInfo"
[2018-12-14T16:47:05.808] [DEBUG] app - register event: "share"
[2018-12-14T16:47:05.808] [DEBUG] app - register event: "acquirePoints"
[2018-12-14T16:47:05.808] [DEBUG] app - register event: "read"
[2018-12-14T16:47:05.809] [DEBUG] app - register event: "exchange"
[2018-12-14T16:47:05.814] [DEBUG] app - UserService.start
[2018-12-14T16:47:05.816] [DEBUG] app - WechatService.start
[2018-12-14T16:47:05.816] [DEBUG] app - DummyService.afterStart
[2018-12-14T16:47:05.816] [DEBUG] app - UserService.afterStart
[2018-12-14T16:47:05.816] [DEBUG] app - WechatService.afterStart
[2018-12-14T16:47:05.816] [INFO] app - app start from dir: "D:\\workspace\\koa2"
[2018-12-14T16:47:05.857] [INFO] app - redis "redis_cache" ready.
[2018-12-14T16:47:05.858] [INFO] app - mongoose connect successfully.
[2018-12-14T16:47:05.862] [DEBUG] app - createUser:{"openId":"ab1","nickName":"haha","sex":1}
[2018-12-14T16:47:05.894] [INFO] app - createUser: "ab1","haha",1
[2018-12-14T16:47:05.894] [INFO] app - on create user "ab1"
[2018-12-14T16:47:05.896] [DEBUG] app - createResult:{"nickName":"haha","sex":1,"totalPoints":0,"lastAccess":0,"phoneNumber":"","babyBirthDay":0,"babySex":0,"consignee":"","province":"","city":"","address":"","postCode":"","_id":"5c136e09ce596242d88eb6c6","openId":"ab1","__v":0}
[2018-12-14T16:47:05.900] [DEBUG] app - assignTask:{"n":1,"nModified":0,"upserted":[{"index":0,"_id":"5c136e09ac2eea0183a7852f"}],"opTime":{"ts":"6634767660980633602","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634767660980633602","$clusterTime":{"clusterTime":"6634767660980633602","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-14T16:47:05.902] [DEBUG] app - awardItems:[{"itemId":"1000","amount":300}]
[2018-12-14T16:47:05.907] [DEBUG] app - awardItems insert return:[{"amount":300,"acquireTime":1544777225902,"expireTime":9007199254740991,"_id":"5c136e09ce596242d88eb6c7","openId":"ab1","itemId":"1000","__v":0}]
[2018-12-14T16:47:05.910] [DEBUG] app - userCenter queryUserInfo :"ab1"
[2018-12-14T16:47:05.914] [DEBUG] app - getUserPoints openId:"ab1", ret:[{"_id":null,"points":300}]
[2018-12-14T16:47:05.915] [DEBUG] app - user "ab1" event "login" fired
[2018-12-14T16:47:05.920] [DEBUG] app - query task for "ab1", ret:{"progress":0,"_id":"5c136e09ac2eea0183a7852f","openId":"ab1","__v":0,"resetDaily":true,"taskId":1}
[2018-12-14T16:47:05.920] [INFO] app - complete task {"progress":0,"_id":"5c136e09ac2eea0183a7852f","openId":"ab1","__v":0,"resetDaily":true,"taskId":1} with event "login"
[2018-12-14T16:47:05.922] [DEBUG] app - completeTask: {"n":1,"nModified":1,"opTime":{"ts":"6634767660980633605","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634767660980633605","$clusterTime":{"clusterTime":"6634767660980633605","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-14T16:47:05.924] [DEBUG] app - try complete full task. {"n":0,"nModified":0,"opTime":{"ts":"6634767660980633605","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634767660980633605","$clusterTime":{"clusterTime":"6634767660980633605","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-14T16:47:06.554] [DEBUG] app - createMenu:{"errcode":0,"errmsg":"ok"}
[2018-12-14T16:57:24.605] [DEBUG] app - starting "koa2" ...
[2018-12-14T16:57:24.614] [INFO] app - init mongoose "127.0.0.1":27017/"usercenter" ...
[2018-12-14T16:57:24.615] [DEBUG] app - mongodb connStr:"mongodb://127.0.0.1:27017/usercenter"
[2018-12-14T16:57:24.624] [DEBUG] app - create redis instance for "redis_cache"
[2018-12-14T16:57:24.625] [DEBUG] app - initRedisSession
[2018-12-14T16:57:24.626] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/manage/cdkeyHandler.js"  ...
[2018-12-14T16:57:24.637] [DEBUG] app - register handler method: "importCdkey" on "/manage/cdkeyHandler/importCdkey"
[2018-12-14T16:57:24.638] [DEBUG] app - register handler method: "genQrCode" on "/manage/cdkeyHandler/genQrCode"
[2018-12-14T16:57:24.638] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/manage/login.js"  ...
[2018-12-14T16:57:24.639] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/manage/login.js" to "/manage/login"
[2018-12-14T16:57:24.639] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/post.js"  ...
[2018-12-14T16:57:24.639] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/post.js" to "/post"
[2018-12-14T16:57:24.640] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/qrcode.js"  ...
[2018-12-14T16:57:24.640] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/qrcode.js" to "/qrcode"
[2018-12-14T16:57:24.640] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/redis.js"  ...
[2018-12-14T16:57:24.641] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/redis.js" to "/redis"
[2018-12-14T16:57:24.641] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/root.js"  ...
[2018-12-14T16:57:24.642] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/root.js" to "/"
[2018-12-14T16:57:24.642] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/drawAward.js"  ...
[2018-12-14T16:57:24.643] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/drawAward.js" to "/wxWeb/api/drawAward"
[2018-12-14T16:57:24.643] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/exchangeShopHandler.js"  ...
[2018-12-14T16:57:24.643] [DEBUG] app - register handler method: "queryOnSaleItemCount" on "/wxWeb/api/exchangeShopHandler/queryOnSaleItemCount"
[2018-12-14T16:57:24.644] [DEBUG] app - register handler method: "queryOnSaleItems" on "/wxWeb/api/exchangeShopHandler/queryOnSaleItems"
[2018-12-14T16:57:24.644] [DEBUG] app - register handler method: "exchangeItem" on "/wxWeb/api/exchangeShopHandler/exchangeItem"
[2018-12-14T16:57:24.644] [DEBUG] app - register handler method: "sendMessage" on "/wxWeb/api/exchangeShopHandler/sendMessage"
[2018-12-14T16:57:24.644] [DEBUG] app - register handler method: "markMessageRead" on "/wxWeb/api/exchangeShopHandler/markMessageRead"
[2018-12-14T16:57:24.644] [DEBUG] app - register handler method: "deleteMessage" on "/wxWeb/api/exchangeShopHandler/deleteMessage"
[2018-12-14T16:57:24.645] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/messageHandler.js"  ...
[2018-12-14T16:57:24.645] [DEBUG] app - register handler method: "getMessagePageCount" on "/wxWeb/api/messageHandler/getMessagePageCount"
[2018-12-14T16:57:24.645] [DEBUG] app - register handler method: "getMessagePage" on "/wxWeb/api/messageHandler/getMessagePage"
[2018-12-14T16:57:24.645] [DEBUG] app - register handler method: "sendMessage" on "/wxWeb/api/messageHandler/sendMessage"
[2018-12-14T16:57:24.646] [DEBUG] app - register handler method: "markMessageRead" on "/wxWeb/api/messageHandler/markMessageRead"
[2018-12-14T16:57:24.646] [DEBUG] app - register handler method: "deleteMessage" on "/wxWeb/api/messageHandler/deleteMessage"
[2018-12-14T16:57:24.646] [DEBUG] app - register handler method: "hasUnreadMessage" on "/wxWeb/api/messageHandler/hasUnreadMessage"
[2018-12-14T16:57:24.647] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/queryCdkeyUsage.js"  ...
[2018-12-14T16:57:24.647] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/queryCdkeyUsage.js" to "/wxWeb/api/queryCdkeyUsage"
[2018-12-14T16:57:24.648] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/queryUserStatus.js"  ...
[2018-12-14T16:57:24.648] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/queryUserStatus.js" to "/wxWeb/api/queryUserStatus"
[2018-12-14T16:57:24.649] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/smsHandler.js"  ...
[2018-12-14T16:57:24.649] [DEBUG] app - register handler method: "registerPhone" on "/wxWeb/api/smsHandler/registerPhone"
[2018-12-14T16:57:24.649] [DEBUG] app - register handler method: "getSmsCode" on "/wxWeb/api/smsHandler/getSmsCode"
[2018-12-14T16:57:24.649] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/taskHandler.js"  ...
[2018-12-14T16:57:24.650] [DEBUG] app - register handler method: "queryTaskList" on "/wxWeb/api/taskHandler/queryTaskList"
[2018-12-14T16:57:24.650] [DEBUG] app - register handler method: "rewardTask" on "/wxWeb/api/taskHandler/rewardTask"
[2018-12-14T16:57:24.650] [DEBUG] app - register handler method: "queryTaskInfo" on "/wxWeb/api/taskHandler/queryTaskInfo"
[2018-12-14T16:57:24.650] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/userHandler.js"  ...
[2018-12-14T16:57:24.651] [DEBUG] app - register handler method: "queryUserInfo" on "/wxWeb/api/userHandler/queryUserInfo"
[2018-12-14T16:57:24.651] [DEBUG] app - register handler method: "updateUserInfo" on "/wxWeb/api/userHandler/updateUserInfo"
[2018-12-14T16:57:24.651] [DEBUG] app - register handler method: "isAddressComplete" on "/wxWeb/api/userHandler/isAddressComplete"
[2018-12-14T16:57:24.651] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/scanActivity.js"  ...
[2018-12-14T16:57:24.652] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/scanActivity.js" to "/wxWeb/scanActivity"
[2018-12-14T16:57:24.652] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/wxAccess.js"  ...
[2018-12-14T16:57:24.653] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/wxAccess.js" to "/wxWeb/wxAccess"
[2018-12-14T16:57:24.654] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/wxLogin.js"  ...
[2018-12-14T16:57:24.654] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/wxLogin.js" to "/wxWeb/wxLogin"
[2018-12-14T16:57:24.662] [DEBUG] app - load dbJsonImpl "D:\\workspace\\koa2/dbJson/scanActivity.json" ...
[2018-12-14T16:57:24.663] [DEBUG] app - load dbJsonImpl "D:\\workspace\\koa2/dbJson/taskInfo.json" ...
[2018-12-14T16:57:24.664] [DEBUG] app - load dbJsonImpl "D:\\workspace\\koa2/dbJson/vipLevel.json" ...
[2018-12-14T16:57:24.665] [DEBUG] app - DummyService.start
[2018-12-14T16:57:24.667] [DEBUG] app - start scan activity
[2018-12-14T16:57:24.706] [DEBUG] app - register event: "login"
[2018-12-14T16:57:24.706] [DEBUG] app - register event: "completePersonInfo"
[2018-12-14T16:57:24.706] [DEBUG] app - register event: "share"
[2018-12-14T16:57:24.707] [DEBUG] app - register event: "acquirePoints"
[2018-12-14T16:57:24.707] [DEBUG] app - register event: "read"
[2018-12-14T16:57:24.707] [DEBUG] app - register event: "exchange"
[2018-12-14T16:57:24.714] [DEBUG] app - UserService.start
[2018-12-14T16:57:24.715] [DEBUG] app - WechatService.start
[2018-12-14T16:57:24.715] [DEBUG] app - DummyService.afterStart
[2018-12-14T16:57:24.715] [DEBUG] app - UserService.afterStart
[2018-12-14T16:57:24.715] [DEBUG] app - WechatService.afterStart
[2018-12-14T16:57:24.716] [INFO] app - app start from dir: "D:\\workspace\\koa2"
[2018-12-14T16:57:24.734] [INFO] app - redis "redis_cache" ready.
[2018-12-14T16:57:24.755] [INFO] app - mongoose connect successfully.
[2018-12-14T16:57:24.759] [DEBUG] app - createUser:{"openId":"ab12","nickName":"haha","sex":1}
[2018-12-14T16:57:24.789] [INFO] app - createUser: "ab12","haha",1
[2018-12-14T16:57:24.790] [INFO] app - on create user "ab12"
[2018-12-14T16:57:24.792] [DEBUG] app - createResult:{"nickName":"haha","sex":1,"totalPoints":0,"lastAccess":0,"phoneNumber":"","babyBirthDay":0,"babySex":0,"consignee":"","province":"","city":"","address":"","postCode":"","_id":"5c137074adb17147c0800b1b","openId":"ab12","__v":0}
[2018-12-14T16:57:24.804] [DEBUG] app - assignTask:{"n":1,"nModified":0,"upserted":[{"index":0,"_id":"5c137074ac2eea0183a78c6f"}],"opTime":{"ts":"6634770319565389826","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634770319565389826","$clusterTime":{"clusterTime":"6634770319565389826","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-14T16:57:24.806] [DEBUG] app - awardItems:[{"itemId":"1000","amount":300}]
[2018-12-14T16:57:24.812] [DEBUG] app - awardItems insert return:[{"amount":300,"acquireTime":1544777844807,"expireTime":9007199254740991,"_id":"5c137074adb17147c0800b1d","openId":"ab12","itemId":"1000","__v":0}]
[2018-12-14T16:57:24.814] [DEBUG] app - userCenter queryUserInfo :"ab12"
[2018-12-14T16:57:24.818] [DEBUG] app - getUserPoints openId:"ab12", ret:[{"_id":null,"points":300}]
[2018-12-14T16:57:24.819] [DEBUG] app - user "ab12" event "login" fired
[2018-12-14T16:57:24.823] [DEBUG] app - query task for "ab12", ret:{"progress":0,"_id":"5c137074ac2eea0183a78c6f","openId":"ab12","__v":0,"resetDaily":true,"taskId":1}
[2018-12-14T16:57:24.829] [INFO] app - complete task {"progress":0,"_id":"5c137074ac2eea0183a78c6f","openId":"ab12","__v":0,"resetDaily":true,"taskId":1} with event "login"
[2018-12-14T16:57:24.832] [DEBUG] app - completeTask: {"n":1,"nModified":1,"opTime":{"ts":"6634770319565389830","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634770319565389830","$clusterTime":{"clusterTime":"6634770319565389830","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-14T16:57:24.833] [DEBUG] app - try complete full task. {"n":0,"nModified":0,"opTime":{"ts":"6634770319565389830","t":2},"electionId":"7fffffff0000000000000002","ok":1,"operationTime":"6634770319565389830","$clusterTime":{"clusterTime":"6634770319565389830","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-14T16:57:24.873] [DEBUG] app - userCenter sendMessage. title:"欢迎新用户",content:"欢迎关注公众号", ret:true
[2018-12-14T16:57:25.524] [DEBUG] app - createMenu:{"errcode":0,"errmsg":"ok"}
[2018-12-26T11:58:05.515] [DEBUG] app - starting "koa2" ...
[2018-12-26T11:58:05.528] [INFO] app - init mongoose "127.0.0.1":27017/"usercenter" ...
[2018-12-26T11:58:05.529] [DEBUG] app - mongodb connStr:"mongodb://127.0.0.1:27017/usercenter"
[2018-12-26T11:58:05.538] [DEBUG] app - create redis instance for "redis_cache"
[2018-12-26T11:58:05.540] [DEBUG] app - initRedisSession
[2018-12-26T11:58:05.544] [DEBUG] app - loading statsd here {"host":"39.98.164.58","port":8125,"debug":false,"tags":{},"prefix":""}
[2018-12-26T11:58:05.545] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/manage/cdkeyHandler.js"  ...
[2018-12-26T11:58:05.557] [DEBUG] app - register handler method: "importCdkey" on "/manage/cdkeyHandler/importCdkey"
[2018-12-26T11:58:05.558] [DEBUG] app - register handler method: "genQrCode" on "/manage/cdkeyHandler/genQrCode"
[2018-12-26T11:58:05.558] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/manage/login.js"  ...
[2018-12-26T11:58:05.559] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/manage/login.js" to "/manage/login"
[2018-12-26T11:58:05.559] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/post.js"  ...
[2018-12-26T11:58:05.560] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/post.js" to "/post"
[2018-12-26T11:58:05.561] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/qrcode.js"  ...
[2018-12-26T11:58:05.562] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/qrcode.js" to "/qrcode"
[2018-12-26T11:58:05.562] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/redis.js"  ...
[2018-12-26T11:58:05.564] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/redis.js" to "/redis"
[2018-12-26T11:58:05.565] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/root.js"  ...
[2018-12-26T11:58:05.566] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/root.js" to "/"
[2018-12-26T11:58:05.566] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/drawAward.js"  ...
[2018-12-26T11:58:05.567] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/drawAward.js" to "/wxWeb/api/drawAward"
[2018-12-26T11:58:05.567] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/exchangeShopHandler.js"  ...
[2018-12-26T11:58:05.568] [DEBUG] app - register handler method: "queryOnSaleItemCount" on "/wxWeb/api/exchangeShopHandler/queryOnSaleItemCount"
[2018-12-26T11:58:05.568] [DEBUG] app - register handler method: "queryOnSaleItems" on "/wxWeb/api/exchangeShopHandler/queryOnSaleItems"
[2018-12-26T11:58:05.569] [DEBUG] app - register handler method: "exchangeItem" on "/wxWeb/api/exchangeShopHandler/exchangeItem"
[2018-12-26T11:58:05.569] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/messageHandler.js"  ...
[2018-12-26T11:58:05.570] [DEBUG] app - register handler method: "getMessagePageCount" on "/wxWeb/api/messageHandler/getMessagePageCount"
[2018-12-26T11:58:05.570] [DEBUG] app - register handler method: "getMessagePage" on "/wxWeb/api/messageHandler/getMessagePage"
[2018-12-26T11:58:05.570] [DEBUG] app - register handler method: "sendMessage" on "/wxWeb/api/messageHandler/sendMessage"
[2018-12-26T11:58:05.571] [DEBUG] app - register handler method: "markMessageRead" on "/wxWeb/api/messageHandler/markMessageRead"
[2018-12-26T11:58:05.571] [DEBUG] app - register handler method: "deleteMessage" on "/wxWeb/api/messageHandler/deleteMessage"
[2018-12-26T11:58:05.571] [DEBUG] app - register handler method: "hasUnreadMessage" on "/wxWeb/api/messageHandler/hasUnreadMessage"
[2018-12-26T11:58:05.572] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/queryCdkeyUsage.js"  ...
[2018-12-26T11:58:05.573] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/queryCdkeyUsage.js" to "/wxWeb/api/queryCdkeyUsage"
[2018-12-26T11:58:05.573] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/queryUserStatus.js"  ...
[2018-12-26T11:58:05.574] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/queryUserStatus.js" to "/wxWeb/api/queryUserStatus"
[2018-12-26T11:58:05.574] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/smsHandler.js"  ...
[2018-12-26T11:58:05.575] [DEBUG] app - register handler method: "registerPhone" on "/wxWeb/api/smsHandler/registerPhone"
[2018-12-26T11:58:05.575] [DEBUG] app - register handler method: "getSmsCode" on "/wxWeb/api/smsHandler/getSmsCode"
[2018-12-26T11:58:05.576] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/taskHandler.js"  ...
[2018-12-26T11:58:05.577] [DEBUG] app - register handler method: "queryTaskList" on "/wxWeb/api/taskHandler/queryTaskList"
[2018-12-26T11:58:05.577] [DEBUG] app - register handler method: "rewardCurrentTask" on "/wxWeb/api/taskHandler/rewardCurrentTask"
[2018-12-26T11:58:05.577] [DEBUG] app - register handler method: "queryCurrentTaskInfo" on "/wxWeb/api/taskHandler/queryCurrentTaskInfo"
[2018-12-26T11:58:05.577] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/userHandler.js"  ...
[2018-12-26T11:58:05.578] [DEBUG] app - register handler method: "queryUserInfo" on "/wxWeb/api/userHandler/queryUserInfo"
[2018-12-26T11:58:05.578] [DEBUG] app - register handler method: "updateUserInfo" on "/wxWeb/api/userHandler/updateUserInfo"
[2018-12-26T11:58:05.579] [DEBUG] app - register handler method: "isAddressComplete" on "/wxWeb/api/userHandler/isAddressComplete"
[2018-12-26T11:58:05.579] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/scanActivity.js"  ...
[2018-12-26T11:58:05.581] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/scanActivity.js" to "/wxWeb/scanActivity"
[2018-12-26T11:58:05.581] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/wxAccess.js"  ...
[2018-12-26T11:58:05.583] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/wxAccess.js" to "/wxWeb/wxAccess"
[2018-12-26T11:58:05.584] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/wxGetAuthorizeUrl.js"  ...
[2018-12-26T11:58:05.585] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/wxGetAuthorizeUrl.js" to "/wxWeb/wxGetAuthorizeUrl"
[2018-12-26T11:58:05.585] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/wxLogin.js"  ...
[2018-12-26T11:58:05.586] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/wxLogin.js" to "/wxWeb/wxLogin"
[2018-12-26T11:58:05.587] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/wxLoginCallback.js"  ...
[2018-12-26T11:58:05.587] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/wxLoginCallback.js" to "/wxWeb/wxLoginCallback"
[2018-12-26T11:58:05.590] [DEBUG] app - load dbJsonImpl "D:\\workspace\\koa2/dbJson/scanActivity.json" ...
[2018-12-26T11:58:05.591] [DEBUG] app - load dbJsonImpl "D:\\workspace\\koa2/dbJson/taskInfo.json" ...
[2018-12-26T11:58:05.593] [DEBUG] app - load dbJsonImpl "D:\\workspace\\koa2/dbJson/vipLevel.json" ...
[2018-12-26T11:58:05.594] [DEBUG] app - DummyService.start
[2018-12-26T11:58:05.598] [DEBUG] app - start scan activity
[2018-12-26T11:58:05.646] [DEBUG] app - register event: "login"
[2018-12-26T11:58:05.647] [DEBUG] app - register event: "completePersonInfo"
[2018-12-26T11:58:05.647] [DEBUG] app - register event: "share"
[2018-12-26T11:58:05.647] [DEBUG] app - register event: "acquirePoints"
[2018-12-26T11:58:05.648] [DEBUG] app - register event: "read"
[2018-12-26T11:58:05.648] [DEBUG] app - register event: "exchange"
[2018-12-26T11:58:05.654] [DEBUG] app - UserService.start
[2018-12-26T11:58:05.656] [DEBUG] app - WechatService.start
[2018-12-26T11:58:05.656] [DEBUG] app - DummyService.afterStart
[2018-12-26T11:58:05.657] [DEBUG] app - UserService.afterStart
[2018-12-26T11:58:05.657] [DEBUG] app - WechatService.afterStart
[2018-12-26T11:58:05.657] [INFO] app - app start from dir: "D:\\workspace\\koa2"
[2018-12-26T11:58:05.677] [INFO] app - redis "redis_cache" ready.
[2018-12-26T11:58:05.700] [INFO] app - mongoose connect successfully.
[2018-12-26T11:58:05.710] [DEBUG] app - createUser:{"openId":"ab12","nickName":"haha","sex":1}
[2018-12-26T11:58:05.744] [DEBUG] app - awardItems:[{"itemId":"1000","amount":300}]
[2018-12-26T11:58:05.768] [DEBUG] app - awardItems insert return:[{"amount":300,"acquireTime":1545796685744,"expireTime":9007199254740991,"_id":"5c22fc4db27ee03424c16bee","openId":"ab12","itemId":"1000","__v":0}]
[2018-12-26T11:58:05.774] [DEBUG] app - userCenter queryUserInfo :"ab12"
[2018-12-26T11:58:05.778] [DEBUG] app - getUserPoints openId:"ab12", ret:[{"_id":null,"points":600}]
[2018-12-26T11:58:05.779] [DEBUG] app - user "ab12" event "login" fired
[2018-12-26T11:58:05.849] [DEBUG] app - query task for "ab12", ret:{"progress":0,"_id":"5c137074ac2eea0183a78c6f","openId":"ab12","__v":0,"resetDaily":true,"taskId":1}
[2018-12-26T11:58:05.850] [INFO] app - complete task {"progress":0,"_id":"5c137074ac2eea0183a78c6f","openId":"ab12","__v":0,"resetDaily":true,"taskId":1} with event "login"
[2018-12-26T11:58:05.922] [DEBUG] app - completeTaskPiece: {"n":1,"nModified":1,"opTime":{"ts":"6639146208340213766","t":5},"electionId":"7fffffff0000000000000005","ok":1,"operationTime":"6639146208340213766","$clusterTime":{"clusterTime":"6639146208340213766","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-26T11:58:05.926] [DEBUG] app - try complete full task. {"n":0,"nModified":0,"opTime":{"ts":"6639146208340213766","t":5},"electionId":"7fffffff0000000000000005","ok":1,"operationTime":"6639146208340213766","$clusterTime":{"clusterTime":"6639146208340213766","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-26T11:58:06.553] [DEBUG] app - createMenu:{"errcode":0,"errmsg":"ok"}
[2018-12-26T11:59:50.083] [DEBUG] app - starting "koa2" ...
[2018-12-26T11:59:50.098] [INFO] app - init mongoose "127.0.0.1":27017/"usercenter" ...
[2018-12-26T11:59:50.098] [DEBUG] app - mongodb connStr:"mongodb://127.0.0.1:27017/usercenter"
[2018-12-26T11:59:50.109] [DEBUG] app - create redis instance for "redis_cache"
[2018-12-26T11:59:50.112] [DEBUG] app - initRedisSession
[2018-12-26T11:59:50.116] [DEBUG] app - loading statsd here {"host":"39.98.164.58","port":8125,"debug":false,"tags":{},"prefix":""}
[2018-12-26T11:59:50.117] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/manage/cdkeyHandler.js"  ...
[2018-12-26T11:59:50.129] [DEBUG] app - register handler method: "importCdkey" on "/manage/cdkeyHandler/importCdkey"
[2018-12-26T11:59:50.131] [DEBUG] app - register handler method: "genQrCode" on "/manage/cdkeyHandler/genQrCode"
[2018-12-26T11:59:50.132] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/manage/login.js"  ...
[2018-12-26T11:59:50.133] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/manage/login.js" to "/manage/login"
[2018-12-26T11:59:50.133] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/post.js"  ...
[2018-12-26T11:59:50.134] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/post.js" to "/post"
[2018-12-26T11:59:50.135] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/qrcode.js"  ...
[2018-12-26T11:59:50.136] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/qrcode.js" to "/qrcode"
[2018-12-26T11:59:50.136] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/redis.js"  ...
[2018-12-26T11:59:50.138] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/redis.js" to "/redis"
[2018-12-26T11:59:50.138] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/root.js"  ...
[2018-12-26T11:59:50.139] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/root.js" to "/"
[2018-12-26T11:59:50.139] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/drawAward.js"  ...
[2018-12-26T11:59:50.141] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/drawAward.js" to "/wxWeb/api/drawAward"
[2018-12-26T11:59:50.141] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/exchangeShopHandler.js"  ...
[2018-12-26T11:59:50.143] [DEBUG] app - register handler method: "queryOnSaleItemCount" on "/wxWeb/api/exchangeShopHandler/queryOnSaleItemCount"
[2018-12-26T11:59:50.143] [DEBUG] app - register handler method: "queryOnSaleItems" on "/wxWeb/api/exchangeShopHandler/queryOnSaleItems"
[2018-12-26T11:59:50.143] [DEBUG] app - register handler method: "exchangeItem" on "/wxWeb/api/exchangeShopHandler/exchangeItem"
[2018-12-26T11:59:50.144] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/messageHandler.js"  ...
[2018-12-26T11:59:50.146] [DEBUG] app - register handler method: "getMessagePageCount" on "/wxWeb/api/messageHandler/getMessagePageCount"
[2018-12-26T11:59:50.146] [DEBUG] app - register handler method: "getMessagePage" on "/wxWeb/api/messageHandler/getMessagePage"
[2018-12-26T11:59:50.146] [DEBUG] app - register handler method: "sendMessage" on "/wxWeb/api/messageHandler/sendMessage"
[2018-12-26T11:59:50.147] [DEBUG] app - register handler method: "markMessageRead" on "/wxWeb/api/messageHandler/markMessageRead"
[2018-12-26T11:59:50.147] [DEBUG] app - register handler method: "deleteMessage" on "/wxWeb/api/messageHandler/deleteMessage"
[2018-12-26T11:59:50.147] [DEBUG] app - register handler method: "hasUnreadMessage" on "/wxWeb/api/messageHandler/hasUnreadMessage"
[2018-12-26T11:59:50.148] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/queryCdkeyUsage.js"  ...
[2018-12-26T11:59:50.149] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/queryCdkeyUsage.js" to "/wxWeb/api/queryCdkeyUsage"
[2018-12-26T11:59:50.149] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/queryUserStatus.js"  ...
[2018-12-26T11:59:50.150] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/queryUserStatus.js" to "/wxWeb/api/queryUserStatus"
[2018-12-26T11:59:50.151] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/smsHandler.js"  ...
[2018-12-26T11:59:50.152] [DEBUG] app - register handler method: "registerPhone" on "/wxWeb/api/smsHandler/registerPhone"
[2018-12-26T11:59:50.152] [DEBUG] app - register handler method: "getSmsCode" on "/wxWeb/api/smsHandler/getSmsCode"
[2018-12-26T11:59:50.152] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/taskHandler.js"  ...
[2018-12-26T11:59:50.153] [DEBUG] app - register handler method: "queryTaskList" on "/wxWeb/api/taskHandler/queryTaskList"
[2018-12-26T11:59:50.153] [DEBUG] app - register handler method: "rewardCurrentTask" on "/wxWeb/api/taskHandler/rewardCurrentTask"
[2018-12-26T11:59:50.154] [DEBUG] app - register handler method: "queryCurrentTaskInfo" on "/wxWeb/api/taskHandler/queryCurrentTaskInfo"
[2018-12-26T11:59:50.154] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/userHandler.js"  ...
[2018-12-26T11:59:50.155] [DEBUG] app - register handler method: "queryUserInfo" on "/wxWeb/api/userHandler/queryUserInfo"
[2018-12-26T11:59:50.155] [DEBUG] app - register handler method: "updateUserInfo" on "/wxWeb/api/userHandler/updateUserInfo"
[2018-12-26T11:59:50.155] [DEBUG] app - register handler method: "isAddressComplete" on "/wxWeb/api/userHandler/isAddressComplete"
[2018-12-26T11:59:50.156] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/scanActivity.js"  ...
[2018-12-26T11:59:50.157] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/scanActivity.js" to "/wxWeb/scanActivity"
[2018-12-26T11:59:50.158] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/wxAccess.js"  ...
[2018-12-26T11:59:50.159] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/wxAccess.js" to "/wxWeb/wxAccess"
[2018-12-26T11:59:50.160] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/wxGetAuthorizeUrl.js"  ...
[2018-12-26T11:59:50.161] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/wxGetAuthorizeUrl.js" to "/wxWeb/wxGetAuthorizeUrl"
[2018-12-26T11:59:50.161] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/wxLogin.js"  ...
[2018-12-26T11:59:50.162] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/wxLogin.js" to "/wxWeb/wxLogin"
[2018-12-26T11:59:50.162] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/wxLoginCallback.js"  ...
[2018-12-26T11:59:50.164] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/wxLoginCallback.js" to "/wxWeb/wxLoginCallback"
[2018-12-26T11:59:50.167] [DEBUG] app - load dbJsonImpl "D:\\workspace\\koa2/dbJson/scanActivity.json" ...
[2018-12-26T11:59:50.168] [DEBUG] app - load dbJsonImpl "D:\\workspace\\koa2/dbJson/taskInfo.json" ...
[2018-12-26T11:59:50.170] [DEBUG] app - load dbJsonImpl "D:\\workspace\\koa2/dbJson/vipLevel.json" ...
[2018-12-26T11:59:50.172] [DEBUG] app - DummyService.start
[2018-12-26T11:59:50.175] [DEBUG] app - start scan activity
[2018-12-26T11:59:50.225] [DEBUG] app - register event: "login"
[2018-12-26T11:59:50.225] [DEBUG] app - register event: "completePersonInfo"
[2018-12-26T11:59:50.226] [DEBUG] app - register event: "share"
[2018-12-26T11:59:50.226] [DEBUG] app - register event: "acquirePoints"
[2018-12-26T11:59:50.227] [DEBUG] app - register event: "read"
[2018-12-26T11:59:50.227] [DEBUG] app - register event: "exchange"
[2018-12-26T11:59:50.234] [DEBUG] app - UserService.start
[2018-12-26T11:59:50.236] [DEBUG] app - WechatService.start
[2018-12-26T11:59:50.237] [DEBUG] app - DummyService.afterStart
[2018-12-26T11:59:50.237] [DEBUG] app - UserService.afterStart
[2018-12-26T11:59:50.237] [DEBUG] app - WechatService.afterStart
[2018-12-26T11:59:50.238] [INFO] app - app start from dir: "D:\\workspace\\koa2"
[2018-12-26T11:59:50.280] [INFO] app - redis "redis_cache" ready.
[2018-12-26T11:59:50.281] [INFO] app - mongoose connect successfully.
[2018-12-26T11:59:50.289] [DEBUG] app - createUser:{"openId":"ab12","nickName":"haha","sex":1}
[2018-12-26T11:59:50.322] [DEBUG] app - awardItems:[{"itemId":"1000","amount":300}]
[2018-12-26T11:59:50.328] [DEBUG] app - awardItems insert return:[{"amount":300,"acquireTime":1545796790322,"expireTime":9007199254740991,"_id":"5c22fcb6598394363002501d","openId":"ab12","itemId":"1000","__v":0}]
[2018-12-26T11:59:50.337] [DEBUG] app - userCenter queryUserInfo :"ab12"
[2018-12-26T11:59:50.341] [DEBUG] app - getUserPoints openId:"ab12", ret:[{"_id":null,"points":900}]
[2018-12-26T11:59:50.342] [DEBUG] app - user "ab12" event "login" fired
[2018-12-26T11:59:50.349] [DEBUG] app - query task for "ab12", ret:{"progress":1,"_id":"5c137074ac2eea0183a78c6f","openId":"ab12","__v":0,"resetDaily":true,"taskId":1}
[2018-12-26T11:59:50.350] [INFO] app - complete task {"progress":1,"_id":"5c137074ac2eea0183a78c6f","openId":"ab12","__v":0,"resetDaily":true,"taskId":1} with event "login"
[2018-12-26T11:59:50.353] [DEBUG] app - completeTaskPiece: {"n":1,"nModified":1,"opTime":{"ts":"6639146659311779845","t":5},"electionId":"7fffffff0000000000000005","ok":1,"operationTime":"6639146659311779845","$clusterTime":{"clusterTime":"6639146659311779845","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-26T11:59:50.358] [DEBUG] app - try complete full task. {"n":0,"nModified":0,"opTime":{"ts":"6639146659311779845","t":5},"electionId":"7fffffff0000000000000005","ok":1,"operationTime":"6639146659311779845","$clusterTime":{"clusterTime":"6639146659311779845","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-26T11:59:51.042] [DEBUG] app - createMenu:{"errcode":0,"errmsg":"ok"}
[2018-12-26T12:06:05.556] [DEBUG] app - starting "koa2" ...
[2018-12-26T12:06:05.570] [INFO] app - init mongoose "127.0.0.1":27017/"usercenter" ...
[2018-12-26T12:06:05.570] [DEBUG] app - mongodb connStr:"mongodb://127.0.0.1:27017/usercenter"
[2018-12-26T12:06:05.580] [DEBUG] app - create redis instance for "redis_cache"
[2018-12-26T12:06:05.582] [DEBUG] app - initRedisSession
[2018-12-26T12:06:05.584] [DEBUG] app - loading statsd here {"host":"39.98.164.58","port":8125,"debug":false,"tags":{},"prefix":""}
[2018-12-26T12:06:05.585] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/manage/cdkeyHandler.js"  ...
[2018-12-26T12:06:05.597] [DEBUG] app - register handler method: "importCdkey" on "/manage/cdkeyHandler/importCdkey"
[2018-12-26T12:06:05.598] [DEBUG] app - register handler method: "genQrCode" on "/manage/cdkeyHandler/genQrCode"
[2018-12-26T12:06:05.599] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/manage/login.js"  ...
[2018-12-26T12:06:05.600] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/manage/login.js" to "/manage/login"
[2018-12-26T12:06:05.600] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/post.js"  ...
[2018-12-26T12:06:05.601] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/post.js" to "/post"
[2018-12-26T12:06:05.602] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/qrcode.js"  ...
[2018-12-26T12:06:05.604] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/qrcode.js" to "/qrcode"
[2018-12-26T12:06:05.604] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/redis.js"  ...
[2018-12-26T12:06:05.606] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/redis.js" to "/redis"
[2018-12-26T12:06:05.607] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/root.js"  ...
[2018-12-26T12:06:05.608] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/root.js" to "/"
[2018-12-26T12:06:05.608] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/drawAward.js"  ...
[2018-12-26T12:06:05.609] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/drawAward.js" to "/wxWeb/api/drawAward"
[2018-12-26T12:06:05.610] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/exchangeShopHandler.js"  ...
[2018-12-26T12:06:05.610] [DEBUG] app - register handler method: "queryOnSaleItemCount" on "/wxWeb/api/exchangeShopHandler/queryOnSaleItemCount"
[2018-12-26T12:06:05.611] [DEBUG] app - register handler method: "queryOnSaleItems" on "/wxWeb/api/exchangeShopHandler/queryOnSaleItems"
[2018-12-26T12:06:05.611] [DEBUG] app - register handler method: "exchangeItem" on "/wxWeb/api/exchangeShopHandler/exchangeItem"
[2018-12-26T12:06:05.611] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/messageHandler.js"  ...
[2018-12-26T12:06:05.612] [DEBUG] app - register handler method: "getMessagePageCount" on "/wxWeb/api/messageHandler/getMessagePageCount"
[2018-12-26T12:06:05.612] [DEBUG] app - register handler method: "getMessagePage" on "/wxWeb/api/messageHandler/getMessagePage"
[2018-12-26T12:06:05.613] [DEBUG] app - register handler method: "sendMessage" on "/wxWeb/api/messageHandler/sendMessage"
[2018-12-26T12:06:05.613] [DEBUG] app - register handler method: "markMessageRead" on "/wxWeb/api/messageHandler/markMessageRead"
[2018-12-26T12:06:05.613] [DEBUG] app - register handler method: "deleteMessage" on "/wxWeb/api/messageHandler/deleteMessage"
[2018-12-26T12:06:05.614] [DEBUG] app - register handler method: "hasUnreadMessage" on "/wxWeb/api/messageHandler/hasUnreadMessage"
[2018-12-26T12:06:05.614] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/queryCdkeyUsage.js"  ...
[2018-12-26T12:06:05.616] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/queryCdkeyUsage.js" to "/wxWeb/api/queryCdkeyUsage"
[2018-12-26T12:06:05.616] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/queryUserStatus.js"  ...
[2018-12-26T12:06:05.618] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/queryUserStatus.js" to "/wxWeb/api/queryUserStatus"
[2018-12-26T12:06:05.619] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/smsHandler.js"  ...
[2018-12-26T12:06:05.620] [DEBUG] app - register handler method: "registerPhone" on "/wxWeb/api/smsHandler/registerPhone"
[2018-12-26T12:06:05.620] [DEBUG] app - register handler method: "getSmsCode" on "/wxWeb/api/smsHandler/getSmsCode"
[2018-12-26T12:06:05.620] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/taskHandler.js"  ...
[2018-12-26T12:06:05.621] [DEBUG] app - register handler method: "queryTaskList" on "/wxWeb/api/taskHandler/queryTaskList"
[2018-12-26T12:06:05.621] [DEBUG] app - register handler method: "rewardCurrentTask" on "/wxWeb/api/taskHandler/rewardCurrentTask"
[2018-12-26T12:06:05.622] [DEBUG] app - register handler method: "queryCurrentTaskInfo" on "/wxWeb/api/taskHandler/queryCurrentTaskInfo"
[2018-12-26T12:06:05.622] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/userHandler.js"  ...
[2018-12-26T12:06:05.623] [DEBUG] app - register handler method: "queryUserInfo" on "/wxWeb/api/userHandler/queryUserInfo"
[2018-12-26T12:06:05.623] [DEBUG] app - register handler method: "updateUserInfo" on "/wxWeb/api/userHandler/updateUserInfo"
[2018-12-26T12:06:05.623] [DEBUG] app - register handler method: "isAddressComplete" on "/wxWeb/api/userHandler/isAddressComplete"
[2018-12-26T12:06:05.623] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/scanActivity.js"  ...
[2018-12-26T12:06:05.625] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/scanActivity.js" to "/wxWeb/scanActivity"
[2018-12-26T12:06:05.625] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/wxAccess.js"  ...
[2018-12-26T12:06:05.627] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/wxAccess.js" to "/wxWeb/wxAccess"
[2018-12-26T12:06:05.627] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/wxGetAuthorizeUrl.js"  ...
[2018-12-26T12:06:05.628] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/wxGetAuthorizeUrl.js" to "/wxWeb/wxGetAuthorizeUrl"
[2018-12-26T12:06:05.629] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/wxLogin.js"  ...
[2018-12-26T12:06:05.630] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/wxLogin.js" to "/wxWeb/wxLogin"
[2018-12-26T12:06:05.631] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/wxLoginCallback.js"  ...
[2018-12-26T12:06:05.632] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/wxLoginCallback.js" to "/wxWeb/wxLoginCallback"
[2018-12-26T12:06:05.634] [DEBUG] app - load dbJsonImpl "D:\\workspace\\koa2/dbJson/scanActivity.json" ...
[2018-12-26T12:06:05.636] [DEBUG] app - load dbJsonImpl "D:\\workspace\\koa2/dbJson/taskInfo.json" ...
[2018-12-26T12:06:05.637] [DEBUG] app - load dbJsonImpl "D:\\workspace\\koa2/dbJson/vipLevel.json" ...
[2018-12-26T12:06:05.639] [DEBUG] app - DummyService.start
[2018-12-26T12:06:05.643] [DEBUG] app - start scan activity
[2018-12-26T12:06:05.693] [DEBUG] app - register event: "login"
[2018-12-26T12:06:05.693] [DEBUG] app - register event: "completePersonInfo"
[2018-12-26T12:06:05.693] [DEBUG] app - register event: "share"
[2018-12-26T12:06:05.694] [DEBUG] app - register event: "acquirePoints"
[2018-12-26T12:06:05.694] [DEBUG] app - register event: "read"
[2018-12-26T12:06:05.694] [DEBUG] app - register event: "exchange"
[2018-12-26T12:06:05.702] [DEBUG] app - UserService.start
[2018-12-26T12:06:05.704] [DEBUG] app - WechatService.start
[2018-12-26T12:06:05.704] [DEBUG] app - DummyService.afterStart
[2018-12-26T12:06:05.704] [DEBUG] app - UserService.afterStart
[2018-12-26T12:06:05.704] [DEBUG] app - WechatService.afterStart
[2018-12-26T12:06:05.705] [INFO] app - app start from dir: "D:\\workspace\\koa2"
[2018-12-26T12:06:05.745] [INFO] app - redis "redis_cache" ready.
[2018-12-26T12:06:05.747] [INFO] app - mongoose connect successfully.
[2018-12-26T12:06:05.755] [DEBUG] app - createUser:{"openId":"ab12","nickName":"haha","sex":1}
[2018-12-26T12:06:05.787] [DEBUG] app - awardItems:[{"itemId":"1000","amount":300}]
[2018-12-26T12:06:05.794] [DEBUG] app - awardItems insert return:[{"amount":300,"acquireTime":1545797165788,"expireTime":9007199254740991,"_id":"5c22fe2dde4b8637d495d5b3","openId":"ab12","itemId":"1000","__v":0}]
[2018-12-26T12:06:05.803] [DEBUG] app - userCenter queryUserInfo :"ab12"
[2018-12-26T12:06:05.808] [DEBUG] app - getUserPoints openId:"ab12", ret:[{"_id":null,"points":1200}]
[2018-12-26T12:06:05.808] [DEBUG] app - user "ab12" event "login" fired
[2018-12-26T12:06:05.814] [DEBUG] app - query task for "ab12", ret:{"progress":2,"_id":"5c137074ac2eea0183a78c6f","openId":"ab12","__v":0,"resetDaily":true,"taskId":1}
[2018-12-26T12:06:05.816] [INFO] app - complete task {"progress":2,"_id":"5c137074ac2eea0183a78c6f","openId":"ab12","__v":0,"resetDaily":true,"taskId":1} with event "login"
[2018-12-26T12:06:05.820] [DEBUG] app - completeTaskPiece: {"n":1,"nModified":1,"opTime":{"ts":"6639148269924515845","t":5},"electionId":"7fffffff0000000000000005","ok":1,"operationTime":"6639148269924515845","$clusterTime":{"clusterTime":"6639148269924515845","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-26T12:06:05.824] [DEBUG] app - try complete full task. {"n":1,"nModified":1,"opTime":{"ts":"6639148269924515846","t":5},"electionId":"7fffffff0000000000000005","ok":1,"operationTime":"6639148269924515846","$clusterTime":{"clusterTime":"6639148269924515846","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-26T12:06:06.560] [DEBUG] app - createMenu:{"errcode":0,"errmsg":"ok"}
[2018-12-26T12:11:31.301] [DEBUG] app - starting "koa2" ...
[2018-12-26T12:11:31.315] [INFO] app - init mongoose "127.0.0.1":27017/"usercenter" ...
[2018-12-26T12:11:31.315] [DEBUG] app - mongodb connStr:"mongodb://127.0.0.1:27017/usercenter"
[2018-12-26T12:11:31.325] [DEBUG] app - create redis instance for "redis_cache"
[2018-12-26T12:11:31.329] [DEBUG] app - initRedisSession
[2018-12-26T12:11:31.333] [DEBUG] app - loading statsd here {"host":"39.98.164.58","port":8125,"debug":false,"tags":{},"prefix":""}
[2018-12-26T12:11:31.335] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/manage/cdkeyHandler.js"  ...
[2018-12-26T12:11:31.349] [DEBUG] app - register handler method: "importCdkey" on "/manage/cdkeyHandler/importCdkey"
[2018-12-26T12:11:31.350] [DEBUG] app - register handler method: "genQrCode" on "/manage/cdkeyHandler/genQrCode"
[2018-12-26T12:11:31.351] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/manage/login.js"  ...
[2018-12-26T12:11:31.352] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/manage/login.js" to "/manage/login"
[2018-12-26T12:11:31.352] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/post.js"  ...
[2018-12-26T12:11:31.353] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/post.js" to "/post"
[2018-12-26T12:11:31.354] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/qrcode.js"  ...
[2018-12-26T12:11:31.355] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/qrcode.js" to "/qrcode"
[2018-12-26T12:11:31.355] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/redis.js"  ...
[2018-12-26T12:11:31.357] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/redis.js" to "/redis"
[2018-12-26T12:11:31.357] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/root.js"  ...
[2018-12-26T12:11:31.358] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/root.js" to "/"
[2018-12-26T12:11:31.358] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/drawAward.js"  ...
[2018-12-26T12:11:31.360] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/drawAward.js" to "/wxWeb/api/drawAward"
[2018-12-26T12:11:31.361] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/exchangeShopHandler.js"  ...
[2018-12-26T12:11:31.363] [DEBUG] app - register handler method: "queryOnSaleItemCount" on "/wxWeb/api/exchangeShopHandler/queryOnSaleItemCount"
[2018-12-26T12:11:31.363] [DEBUG] app - register handler method: "queryOnSaleItems" on "/wxWeb/api/exchangeShopHandler/queryOnSaleItems"
[2018-12-26T12:11:31.364] [DEBUG] app - register handler method: "exchangeItem" on "/wxWeb/api/exchangeShopHandler/exchangeItem"
[2018-12-26T12:11:31.364] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/messageHandler.js"  ...
[2018-12-26T12:11:31.366] [DEBUG] app - register handler method: "getMessagePageCount" on "/wxWeb/api/messageHandler/getMessagePageCount"
[2018-12-26T12:11:31.366] [DEBUG] app - register handler method: "getMessagePage" on "/wxWeb/api/messageHandler/getMessagePage"
[2018-12-26T12:11:31.366] [DEBUG] app - register handler method: "sendMessage" on "/wxWeb/api/messageHandler/sendMessage"
[2018-12-26T12:11:31.367] [DEBUG] app - register handler method: "markMessageRead" on "/wxWeb/api/messageHandler/markMessageRead"
[2018-12-26T12:11:31.367] [DEBUG] app - register handler method: "deleteMessage" on "/wxWeb/api/messageHandler/deleteMessage"
[2018-12-26T12:11:31.367] [DEBUG] app - register handler method: "hasUnreadMessage" on "/wxWeb/api/messageHandler/hasUnreadMessage"
[2018-12-26T12:11:31.367] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/queryCdkeyUsage.js"  ...
[2018-12-26T12:11:31.369] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/queryCdkeyUsage.js" to "/wxWeb/api/queryCdkeyUsage"
[2018-12-26T12:11:31.369] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/queryUserStatus.js"  ...
[2018-12-26T12:11:31.370] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/api/queryUserStatus.js" to "/wxWeb/api/queryUserStatus"
[2018-12-26T12:11:31.370] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/smsHandler.js"  ...
[2018-12-26T12:11:31.371] [DEBUG] app - register handler method: "registerPhone" on "/wxWeb/api/smsHandler/registerPhone"
[2018-12-26T12:11:31.371] [DEBUG] app - register handler method: "getSmsCode" on "/wxWeb/api/smsHandler/getSmsCode"
[2018-12-26T12:11:31.372] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/taskHandler.js"  ...
[2018-12-26T12:11:31.374] [DEBUG] app - register handler method: "queryTaskList" on "/wxWeb/api/taskHandler/queryTaskList"
[2018-12-26T12:11:31.374] [DEBUG] app - register handler method: "rewardCurrentTask" on "/wxWeb/api/taskHandler/rewardCurrentTask"
[2018-12-26T12:11:31.375] [DEBUG] app - register handler method: "queryCurrentTaskInfo" on "/wxWeb/api/taskHandler/queryCurrentTaskInfo"
[2018-12-26T12:11:31.375] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/api/userHandler.js"  ...
[2018-12-26T12:11:31.376] [DEBUG] app - register handler method: "queryUserInfo" on "/wxWeb/api/userHandler/queryUserInfo"
[2018-12-26T12:11:31.376] [DEBUG] app - register handler method: "updateUserInfo" on "/wxWeb/api/userHandler/updateUserInfo"
[2018-12-26T12:11:31.376] [DEBUG] app - register handler method: "isAddressComplete" on "/wxWeb/api/userHandler/isAddressComplete"
[2018-12-26T12:11:31.377] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/scanActivity.js"  ...
[2018-12-26T12:11:31.379] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/scanActivity.js" to "/wxWeb/scanActivity"
[2018-12-26T12:11:31.379] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/wxAccess.js"  ...
[2018-12-26T12:11:31.383] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/wxAccess.js" to "/wxWeb/wxAccess"
[2018-12-26T12:11:31.384] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/wxGetAuthorizeUrl.js"  ...
[2018-12-26T12:11:31.385] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/wxGetAuthorizeUrl.js" to "/wxWeb/wxGetAuthorizeUrl"
[2018-12-26T12:11:31.385] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/wxLogin.js"  ...
[2018-12-26T12:11:31.386] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/wxLogin.js" to "/wxWeb/wxLogin"
[2018-12-26T12:11:31.386] [DEBUG] app - loading "D:\\workspace\\koa2\\controllers/wxWeb/wxLoginCallback.js"  ...
[2018-12-26T12:11:31.387] [DEBUG] app - mounting "D:\\workspace\\koa2\\controllers/wxWeb/wxLoginCallback.js" to "/wxWeb/wxLoginCallback"
[2018-12-26T12:11:31.389] [DEBUG] app - load dbJsonImpl "D:\\workspace\\koa2/dbJson/scanActivity.json" ...
[2018-12-26T12:11:31.391] [DEBUG] app - load dbJsonImpl "D:\\workspace\\koa2/dbJson/taskInfo.json" ...
[2018-12-26T12:11:31.392] [DEBUG] app - load dbJsonImpl "D:\\workspace\\koa2/dbJson/vipLevel.json" ...
[2018-12-26T12:11:31.394] [DEBUG] app - DummyService.start
[2018-12-26T12:11:31.399] [DEBUG] app - start scan activity
[2018-12-26T12:11:31.450] [DEBUG] app - register event: "login"
[2018-12-26T12:11:31.450] [DEBUG] app - register event: "completePersonInfo"
[2018-12-26T12:11:31.451] [DEBUG] app - register event: "share"
[2018-12-26T12:11:31.451] [DEBUG] app - register event: "acquirePoints"
[2018-12-26T12:11:31.451] [DEBUG] app - register event: "read"
[2018-12-26T12:11:31.451] [DEBUG] app - register event: "exchange"
[2018-12-26T12:11:31.458] [DEBUG] app - UserService.start
[2018-12-26T12:11:31.460] [DEBUG] app - WechatService.start
[2018-12-26T12:11:31.460] [DEBUG] app - DummyService.afterStart
[2018-12-26T12:11:31.461] [DEBUG] app - UserService.afterStart
[2018-12-26T12:11:31.462] [DEBUG] app - WechatService.afterStart
[2018-12-26T12:11:31.465] [INFO] app - app start from dir: "D:\\workspace\\koa2"
[2018-12-26T12:11:31.483] [INFO] app - redis "redis_cache" ready.
[2018-12-26T12:11:31.509] [INFO] app - mongoose connect successfully.
[2018-12-26T12:11:31.515] [DEBUG] app - createUser:{"openId":"ab12","nickName":"haha","sex":1}
[2018-12-26T12:11:31.551] [DEBUG] app - awardItems:[{"itemId":"1000","amount":300}]
[2018-12-26T12:11:31.557] [DEBUG] app - awardItems insert return:[{"amount":300,"acquireTime":1545797491552,"expireTime":9007199254740991,"_id":"5c22ff73cb9b9e3020c039a5","openId":"ab12","itemId":"1000","__v":0}]
[2018-12-26T12:11:31.565] [DEBUG] app - userCenter queryUserInfo :"ab12"
[2018-12-26T12:11:31.571] [DEBUG] app - getUserPoints openId:"ab12", ret:[{"_id":null,"points":1500}]
[2018-12-26T12:11:31.572] [DEBUG] app - user "ab12" event "login" fired
[2018-12-26T12:11:31.577] [DEBUG] app - query task for "ab12", ret:{"progress":-2,"_id":"5c137074ac2eea0183a78c6f","openId":"ab12","__v":0,"resetDaily":true,"taskId":1}
[2018-12-26T12:11:31.577] [INFO] app - complete task {"progress":-2,"_id":"5c137074ac2eea0183a78c6f","openId":"ab12","__v":0,"resetDaily":true,"taskId":1} with event "login"
[2018-12-26T12:11:31.581] [DEBUG] app - completeTaskPiece: {"n":0,"nModified":0,"opTime":{"ts":"6639149670083854340","t":5},"electionId":"7fffffff0000000000000005","ok":1,"operationTime":"6639149670083854340","$clusterTime":{"clusterTime":"6639149670083854340","signature":{"hash":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","keyId":0}}}
[2018-12-26T12:11:32.248] [DEBUG] app - createMenu:{"errcode":0,"errmsg":"ok"}
