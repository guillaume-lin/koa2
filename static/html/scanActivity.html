<!DOCTYPE html>
<html>
   <head>
      
          <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
          <meta http-equiv="Pragma" content="no-cache" />
          <meta http-equiv="Expires" content="0" />


      <title>扫码参加活动</title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <!-- 引入 Bootstrap -->
      <!-- 新 Bootstrap 核心 CSS 文件 -->
    <link href="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
 
      <!-- HTML5 Shiv 和 Respond.js 用于让 IE8 支持 HTML5元素和媒体查询 -->
      <!-- 注意： 如果通过 file://  引入 Respond.js 文件，则该文件无法起效果 -->
      <!--[if lt IE 9]>
         <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
         <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
      <![endif]-->
      <!-- jQuery文件。务必在bootstrap.min.js 之前引入 -->
  <script src="https://cdn.staticfile.org/jquery/2.1.1/jquery.min.js"></script>
 
  <!-- 最新的 Bootstrap 核心 JavaScript 文件 -->
<script src="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script type="text/javascript">
  // 检查用户当前的cdkey使用情况，根据情况跳转相应页面
  $(document).ready(function(){
    // request cdkey and use status from server
    $.get('/wxWeb/api/queryCdkeyUsage',function(data,status){
      console.log('queryCdkeyUsage');
      console.log(data);
      console.log(status);
      // 根据结果，跳转不同的界面，提示二维码过期或者是可以进行抽奖
      if(data.code === 0){
        console.log('cdkey is usable.');
        document.location.href = '/html/drawPrizeActivity.html';
      }
    });

    // 扫码登录
    $("#login").click(function(){
      let cdkey = $("#cdkey").val();
      document.location.href = '/wxWeb/scanActivity?cdkey='+cdkey;
    })

  });
</script>
   </head>
   <body>
      <h1>测试页面</h1>
      <div>
        <h3>扫码登录</h3>
        <label>cdkey</label>
        <input type="text" id="cdkey" placeholder="input cdkey here"></input>
        <button type="submit" id="login">登录</button>
      </div>
      <div>
        <h1>结果</h1>
        <input type="textArea" id="result"></input>
      </div>

   </body>
</html>